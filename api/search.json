[{"id":"0b6174194fca75a66e45364f4a9eec76","title":"RAG(1)","content":"0.å¼•è¨€å¦‚ä½•è®© AI è·å–çŸ¥è¯†ï¼Ÿåœ¨å®ç°éœ€æ±‚å‰ï¼Œæˆ‘ä»¬éœ€è¦æ€è€ƒä¸€ä¸ªå…³é”®é—®é¢˜ï¼šæ‹çˆ±çŸ¥è¯†ä»å“ªé‡Œè·å–å‘¢ï¼Ÿ\né¦–å…ˆ AI åŸæœ¬å°±æ‹¥æœ‰ä¸€äº›é€šç”¨çš„â çŸ¥è¯†ï¼Œå¯¹äºä¸ä¼šçš„çŸ¥è¯†ï¼Œè¿˜å¯ä»¥åˆ©ç”¨äº’è”ç½‘æœç´¢ã€‚ä½†æ˜¯è¿™äº›éƒ½æ˜¯ä»ç½‘ç»œè·â€Œå–çš„ã€å…¬å¼€çš„çŸ¥è¯†ã€‚å¯¹äºä¼ä¸šæ¥è¯´ï¼Œæ•°æ®æ˜¯å‘½è„‰ï¼Œä¹Ÿæ˜¯è‡ªå·±ç‹¬ç‰¹çš„ä»·å€¼ï¼Œéšç€ä¸šåŠ¡çš„å‘å±•ï¼Œä¼ä¸šè‚¯å®šä¼šç§¯ç´¯ä¸€æ³¢è‡ªå·±çš„çŸ¥è¯†åº“ï¼Œæ¯”å¦‚å¾€æœŸç”¨æˆ·çš„æ‹â€çˆ±å’¨è¯¢å’ŒæˆåŠŸæ¡ˆä¾‹ã€ä»¥åŠè‡ªå®¶çš„æ‹çˆ±è¯¾ç¨‹ï¼Œå¦‚æœè®© AI èƒ½å¤Ÿåˆ©ç”¨è¿™äº›â€ŒçŸ¥è¯†åº“è¿›è¡Œé—®ç­”ï¼Œæ•ˆæœå¯èƒ½ä¼šæ›´å¥½ï¼Œè€Œä¸”æ›´åŠ ä¸ªæ€§åŒ–ã€‚\nå¦‚æœä¸ç»™ â AI æä¾›ç‰¹å®šé¢†åŸŸâ€Œçš„çŸ¥è¯†åº“ï¼ŒAI å¯èƒ½ä¼šé¢ä¸´è¿™äº›é—®é¢˜ï¼š\n\nçŸ¥è¯†æœ‰é™ï¼šAI ä¸çŸ¥é“ä½ çš„æœ€æ–°è¯¾ç¨‹å’Œå†…å®¹\nç¼–æ•…äº‹ï¼šå½“ AI ä¸çŸ¥é“ç­”æ¡ˆæ—¶ï¼Œå®ƒå¯èƒ½ä¼š â€œè‡ªåœ†å…¶è¯´â€ ç¼–é€ å†…å®¹\næ— æ³•ä¸ªæ€§åŒ–ï¼šä¸äº†è§£ä½ çš„ç‰¹è‰²æœåŠ¡å’Œå›ç­”é£æ ¼\nä¸ä¼šæ¨é”€ï¼šä¸çŸ¥é“è¯¥åœ¨ä»€ä¹ˆæ—¶å€™æ¨èä½ çš„ä»˜è´¹è¯¾ç¨‹å’ŒæœåŠ¡\n\né‚£ä¹ˆå¦‚ä½•è®©â  AI åˆ©ç”¨è‡ªå·±çš„â€ŒçŸ¥è¯†åº“è¿›è¡Œé—®ç­”å‘¢ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ° AIâ€ ä¸»æµçš„æŠ€æœ¯ â€”â€”â€Œ RAGã€‚\n1.RAG æ¦‚å¿µä»€ä¹ˆæ˜¯ RAGï¼ŸRAGï¼ˆRetrâ ieval-Augmented â€ŒGenerationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ˜¯ä¸€ç§ç»“åˆä¿¡æ¯æ£€ç´¢æŠ€æœ¯å’Œ Aâ€I å†…å®¹ç”Ÿæˆçš„æ··åˆæ¶æ„ï¼Œå¯ä»¥è§£å†³â€Œå¤§æ¨¡å‹çš„çŸ¥è¯†æ—¶æ•ˆæ€§é™åˆ¶å’Œå¹»è§‰é—®é¢˜ã€‚\nç®€å•æ¥è¯´ï¼ŒRAâ G å°±åƒç»™ AI é…äº†ä¸€ä¸ªâ€Œ â€œå°æŠ„æœ¬â€ï¼Œè®© AI å›ç­”é—®é¢˜å‰å…ˆæŸ¥ä¸€æŸ¥ç‰¹å®šçš„çŸ¥è¯†â€åº“æ¥è·å–çŸ¥è¯†ï¼Œç¡®ä¿å›ç­”æ˜¯åŸºâ€ŒäºçœŸå®èµ„æ–™è€Œä¸æ˜¯å‡­ç©ºæƒ³è±¡ã€‚\n\nä»æŠ€æœ¯è§’åº¦çœ‹ï¼ŒRâ AG åœ¨å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆå›ç­”ä¹‹å‰â€Œï¼Œä¼šå…ˆä»å¤–éƒ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œç„¶åå°†è¿™äº›æ£€ç´¢åˆ°çš„å†…å®¹ä½œä¸ºâ€é¢å¤–ä¸Šä¸‹æ–‡æä¾›ç»™æ¨¡å‹ï¼Œå¼•å¯¼å…¶ç”Ÿâ€Œæˆæ›´å‡†ç¡®ã€æ›´ç›¸å…³çš„å›ç­”ã€‚\né€šè¿‡ RAG æŠ€æœ¯æ”¹é€ åï¼ŒAI å°±èƒ½ï¼š\n\nå‡†ç¡®å›ç­”å…³äºç‰¹å®šå†…å®¹çš„é—®é¢˜\nåœ¨åˆé€‚çš„æ—¶æœºæ¨èç›¸å…³è¯¾ç¨‹å’ŒæœåŠ¡\nç”¨ç‰¹å®šçš„è¯­æ°”å’Œç”¨æˆ·äº¤æµ\næä¾›æ›´æ–°ã€æ›´å‡†ç¡®çš„å»ºè®®\n\nå¯ä»¥ç®€å•äº†è§£ä¸‹ RAG å’Œä¼ ç»Ÿ AI æ¨¡å‹çš„åŒºåˆ«ï¼š\n\n\n\nç‰¹æ€§\nä¼ ç»Ÿå¤§è¯­è¨€æ¨¡å‹\nRAG å¢å¼ºæ¨¡å‹\n\n\n\nçŸ¥è¯†æ—¶æ•ˆæ€§\nå—è®­ç»ƒæ•°æ®æˆªæ­¢æ—¥æœŸé™åˆ¶\nå¯æ¥å…¥æœ€æ–°çŸ¥è¯†åº“\n\n\né¢†åŸŸä¸“ä¸šæ€§\næ³›åŒ–çŸ¥è¯†â ï¼Œä¸“ä¸šæ·±åº¦æœ‰é™\nå¯æ¥å…¥ä¸“ä¸šé¢†åŸŸçŸ¥è¯†\n\n\nå“åº”å‡†â€Œç¡®æ€§\nå¯èƒ½äº§ç”Ÿ â€œå¹»è§‰â€\nåŸºäºæ£€ç´¢çš„äº‹å®ä¾æ®\n\n\nå¯æ§æ€§\nä¾èµ–åŸå§‹è®­ç»ƒ\nå¯é€šè¿‡çŸ¥â€è¯†åº“å®šåˆ¶è¾“å‡º\n\n\nèµ„æºæ¶ˆè€—\nè¾ƒé«˜ï¼ˆéœ€è¦å¤§æ¨¡å‹å‚â€Œæ•°ï¼‰\næ¨¡å‹å¯æ›´å°ï¼Œç»“åˆå¤–éƒ¨çŸ¥è¯†\n\n\nRAG å·¥ä½œæµç¨‹RAG æŠ€â æœ¯å®ç°ä¸»è¦åŒ…å«ä»¥ä¸‹â€Œ 4 ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼Œè®©æˆ‘ä»¬åˆ†æ­¥æ¥å­¦ä¹ ï¼š\n\næ–‡æ¡£æ”¶é›†å’Œåˆ‡å‰²\nå‘é‡è½¬æ¢å’Œå­˜å‚¨\næ–‡æ¡£è¿‡æ»¤å’Œæ£€ç´¢\næŸ¥è¯¢å¢å¼ºå’Œå…³è”\n\n1ã€æ–‡æ¡£æ”¶é›†å’Œåˆ‡å‰²æ–‡æ¡£æ”¶é›†ï¼šä»å„ç§æ¥æºï¼ˆç½‘é¡µã€PDFã€æ•°æ®åº“ç­‰ï¼‰æ”¶é›†åŸå§‹æ–‡æ¡£\næ–‡æ¡£é¢„å¤„ç†ï¼šæ¸…æ´—ã€æ ‡å‡†åŒ–æ–‡æœ¬æ ¼å¼\næ–‡æ¡£åˆ‡å‰²ï¼šâ å°†é•¿æ–‡æ¡£åˆ†å‰²æˆé€‚å½“â€Œå¤§å°çš„ç‰‡æ®µï¼ˆä¿—ç§° chunksï¼‰\n\nåŸºäºå›ºå®šå¤§å°ï¼ˆå¦‚ 512 ä¸ª tokenï¼‰\nåŸºäºè¯­ä¹‰è¾¹ç•Œï¼ˆå¦‚æ®µè½ã€ç« èŠ‚ï¼‰\nåŸºäºé€’å½’åˆ†å‰²ç­–ç•¥ï¼ˆå¦‚é€’å½’å­—ç¬¦ n-gram åˆ‡å‰²ï¼‰\n\n\n2ã€å‘é‡è½¬æ¢å’Œå­˜å‚¨å‘é‡è½¬æ¢ï¼šâ ä½¿ç”¨ Embeddâ€Œing æ¨¡å‹å°†æ–‡æœ¬å—è½¬æ¢ä¸ºé«˜ç»´å‘é‡è¡¨â€ç¤ºï¼Œå¯ä»¥æ•è·åˆ°æ–‡æœ¬â€Œçš„è¯­ä¹‰ç‰¹å¾\nå‘é‡å­˜å‚¨ï¼šâ å°†ç”Ÿæˆçš„å‘é‡å’Œå¯¹åº”â€Œæ–‡æœ¬å­˜å…¥å‘é‡æ•°æ®åº“ï¼Œæ”¯æŒé«˜æ•ˆçš„ç›¸ä¼¼æ€§â€æœç´¢\n\n3ã€æ–‡æ¡£è¿‡æ»¤å’Œæ£€ç´¢æŸ¥è¯¢å¤„ç†ï¼šå°†ç”¨æˆ·é—®é¢˜ä¹Ÿè½¬æ¢ä¸ºå‘é‡è¡¨ç¤º\nè¿‡æ»¤æœºåˆ¶ï¼šåŸºäºå…ƒæ•°æ®ã€å…³é”®è¯æˆ–è‡ªå®šä¹‰è§„åˆ™è¿›è¡Œè¿‡æ»¤\nç›¸ä¼¼åº¦æœç´¢â ï¼šåœ¨å‘é‡æ•°æ®åº“ä¸­æŸ¥â€Œæ‰¾ä¸é—®é¢˜å‘é‡æœ€ç›¸ä¼¼çš„æ–‡æ¡£å—ï¼Œå¸¸ç”¨çš„ç›¸â€ä¼¼åº¦æœç´¢ç®—æ³•æœ‰ä½™å¼¦â€Œç›¸ä¼¼åº¦ã€æ¬§æ°è·ç¦»ç­‰\nä¸Šä¸‹æ–‡ç»„è£…ï¼šå°†æ£€ç´¢åˆ°çš„å¤šä¸ªæ–‡æ¡£å—ç»„è£…æˆè¿è´¯ä¸Šä¸‹æ–‡\n\n4ã€æŸ¥è¯¢å¢å¼ºå’Œå…³è”æç¤ºè¯ç»„è£…ï¼šå°†æ£€ç´¢åˆ°çš„ç›¸å…³æ–‡æ¡£ä¸ç”¨æˆ·é—®é¢˜ç»„åˆæˆå¢å¼ºæç¤º\nä¸Šä¸‹æ–‡èåˆï¼šå¤§æ¨¡å‹åŸºäºå¢å¼ºæç¤ºç”Ÿæˆå›ç­”\næºå¼•ç”¨ï¼šåœ¨å›ç­”ä¸­æ·»åŠ ä¿¡æ¯æ¥æºå¼•ç”¨\nåå¤„ç†ï¼šæ ¼å¼åŒ–ã€æ‘˜è¦æˆ–å…¶ä»–å¤„ç†ä»¥ä¼˜åŒ–æœ€ç»ˆè¾“å‡º\n\n å®Œæ•´å·¥ä½œæµç¨‹\nåˆ†åˆ«ç†è§£ä¸Šâ è¿° 4 ä¸ªæ­¥éª¤åï¼Œâ€Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬ç»„åˆèµ·æ¥ï¼Œå½¢æˆå®Œæ•´çš„ â€RAG æ£€ç´¢å¢å¼ºç”Ÿâ€Œæˆå·¥ä½œæµç¨‹ï¼š\n\nä¸Šè¿°å·¥ä½œæµç¨‹ä¸­æ¶‰åŠäº†å¾ˆå¤šæŠ€æœ¯åè¯ï¼Œè®©æˆ‘ä»¬åˆ†åˆ«è¿›è¡Œè§£é‡Šã€‚\nRAG ç›¸å…³æŠ€æœ¯Embedding å’Œ Embedding æ¨¡å‹Embeddinâ g åµŒå…¥æ˜¯å°†é«˜ç»´ç¦»æ•£æ•°æ®ï¼ˆå¦‚æ–‡â€Œå­—ã€å›¾ç‰‡ï¼‰è½¬æ¢ä¸ºä½ç»´è¿ç»­å‘é‡çš„è¿‡ç¨‹ã€‚è¿™äº›å‘é‡èƒ½åœ¨æ•°å­¦ç©ºé—´ä¸­è¡¨â€ç¤ºåŸå§‹æ•°æ®çš„è¯­ä¹‰ç‰¹å¾ï¼Œä½¿è®¡ç®—æœºâ€Œèƒ½å¤Ÿç†è§£æ•°æ®é—´çš„ç›¸ä¼¼æ€§ã€‚\nEmbedding æ¨¡å‹æ˜¯â æ‰§è¡Œè¿™ç§è½¬æ¢ç®—æ³•çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå¦‚ Word2Veâ€Œcï¼ˆæ–‡æœ¬ï¼‰ã€ResNetï¼ˆå›¾åƒï¼‰ç­‰ã€‚ä¸åŒçš„ Embedding æ¨¡å‹äº§ç”Ÿçš„å‘é‡è¡¨ç¤ºå’Œç»´åº¦æ•°ä¸åŒï¼Œä¸€èˆ¬â€ç»´åº¦è¶Šé«˜è¡¨è¾¾èƒ½åŠ›æ›´å¼ºï¼Œå¯ä»¥æ•è·æ›´ä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯å’Œæ›´â€Œç»†å¾®çš„å·®åˆ«ï¼Œä½†åŒæ ·å ç”¨æ›´å¤šå­˜å‚¨ç©ºé—´ã€‚\n\nå‘é‡æ•°æ®åº“å‘é‡æ•°æ®åº“â æ˜¯ä¸“é—¨å­˜å‚¨å’Œæ£€ç´¢å‘é‡â€Œæ•°æ®çš„æ•°æ®åº“ç³»ç»Ÿã€‚é€šè¿‡é«˜æ•ˆç´¢å¼•ç®—æ³•å®ç°å¿«â€é€Ÿç›¸ä¼¼æ€§æœç´¢ï¼Œæ”¯æŒ â€ŒK è¿‘é‚»æŸ¥è¯¢ç­‰æ“ä½œã€‚\n\næ³¨æ„ï¼Œå¹¶ä¸â æ˜¯åªæœ‰å‘é‡æ•°æ®åº“æ‰â€Œèƒ½å­˜å‚¨å‘é‡æ•°æ®ï¼Œåªä¸è¿‡ä¸ä¼ ç»Ÿæ•°æ®åº“ä¸â€åŒï¼Œå‘é‡æ•°æ®åº“ä¼˜åŒ–â€Œäº†é«˜ç»´å‘é‡çš„å­˜å‚¨å’Œæ£€ç´¢ã€‚\nAI çš„æµè¡Œå¸¦ç«äº†ä¸€æ³¢â å‘é‡æ•°æ®åº“å’Œå‘é‡å­˜å‚¨ï¼Œæ¯”å¦‚ Milvusã€â€ŒPinecone ç­‰ã€‚æ­¤å¤–ï¼Œä¸€äº›ä¼ ç»Ÿæ•°æ®åº“ä¹Ÿå¯ä»¥é€šè¿‡å®‰è£…æ’ä»¶å®ç°å‘é‡å­˜å‚¨å’Œæ£€ç´¢ï¼Œæ¯”å¦‚â€ PGVectorã€Redis Stackâ€Œ çš„ RediSearch ç­‰ã€‚\nç”¨ä¸€å¼ å›¾æ¥äº†è§£å‘é‡æ•°æ®åº“çš„åˆ†ç±»ï¼š\n\nå¬å›å¬å›æ˜¯ä¿¡æ¯æ£€ç´¢ä¸­çš„ç¬¬ä¸€é˜¶æ®µï¼Œç›®æ ‡æ˜¯ä»å¤§è§„æ¨¡æ•°æ®é›†ä¸­å¿«é€Ÿç­›é€‰å‡ºå¯èƒ½ç›¸å…³çš„å€™é€‰é¡¹å­é›†ã€‚å¼ºè°ƒé€Ÿåº¦å’Œå¹¿åº¦ï¼Œè€Œéç²¾ç¡®åº¦ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è¦ä»æœâ ç´¢å¼•æ“æŸ¥è¯¢ â€œç¼–ç¨‹å¯¼èˆª - ç¨‹åºå‘˜ä¸€ç«™å¼ç¼–ç¨‹â€Œå­¦ä¹ äº¤æµç¤¾åŒºâ€ æ—¶ï¼Œå¬å›é˜¶æ®µä¼šä»æ•°åäº¿ç½‘é¡µä¸­å¿«é€Ÿç­›é€‰å‡ºæ•°åƒä¸ªå«æœ‰ â€œç¼–ç¨‹â€ã€â€œå¯¼â€èˆªâ€ã€â€œç¨‹åºå‘˜â€ ç­‰ç›¸å…³å†…å®¹çš„é¡µé¢ï¼Œä¸ºåâ€Œç»­ç²—ç•¥æ’åºå’Œç²¾ç»†æ’åºæä¾›å€™é€‰é›†ã€‚\nç²¾æ’å’Œ Rank æ¨¡å‹ç²¾æ’ï¼ˆç²¾ç¡®æ’â åºï¼‰æ˜¯æœç´¢ &#x2F; æ¨èç³»ç»Ÿâ€Œçš„æœ€åé˜¶æ®µï¼Œä½¿ç”¨è®¡ç®—å¤æ‚åº¦æ›´é«˜çš„ç®—æ³•ï¼Œè€ƒè™‘æ›´å¤šç‰¹â€å¾å’Œä¸šåŠ¡è§„åˆ™ï¼Œå¯¹å°‘é‡å€™é€‰â€Œé¡¹è¿›è¡Œæ›´å¤æ‚ã€ç²¾ç»†çš„æ’åºã€‚\næ¯”å¦‚ï¼ŒçŸ­è§†é¢‘æ¨èâ å…ˆé€šè¿‡å¬å›è·å–æ•°ä¸‡ä¸ªå¯èƒ½ç›¸å…³è§†é¢‘â€Œï¼Œå†é€šè¿‡ç²—æ’ç¼©å‡è‡³æ•°ç™¾æ¡ï¼Œæœ€åç²¾æ’é˜¶æ®µä¼šè€ƒè™‘ç”¨æˆ·æœ€è¿‘çš„äº’åŠ¨ã€è§†é¢‘â€çƒ­åº¦ã€å†…å®¹å¤šæ ·æ€§ç­‰å¤æ‚å› ç´ ï¼Œç¡®å®šâ€Œæœ€ç»ˆå±•ç¤ºçš„ 10 ä¸ªè§†é¢‘åŠé¡ºåºã€‚\n\nRank â æ¨¡å‹ï¼ˆæ’åºæ¨¡å‹ï¼‰è´Ÿâ€Œè´£å¯¹å¬å›é˜¶æ®µç­›é€‰å‡ºçš„å€™é€‰é›†è¿›è¡Œç²¾ç¡®æ’â€åºï¼Œè€ƒè™‘å¤šç§ç‰¹å¾è¯„â€Œä¼°ç›¸å…³æ€§ã€‚\nç°ä»£ Rank æ¨¡å‹â é€šå¸¸åŸºäºæ·±åº¦å­¦ä¹ ï¼Œå¦‚ BERTã€Lambâ€ŒdaMART ç­‰ï¼Œç»¼åˆè€ƒè™‘æŸ¥è¯¢ä¸å€™é€‰é¡¹çš„ç›¸å…³æ€§ã€ç”¨æˆ·å†å²è¡Œä¸ºç­‰å› ç´ ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œç”µâ€å•†æ¨èç³»ç»Ÿä¼šæ ¹æ®å•†å“ç‰¹å¾ã€ç”¨æˆ·åå¥½ã€ç‚¹å‡»â€Œç‡ç­‰ç»™æ¯ä¸ªå€™é€‰å•†å“æ‰“åˆ†å¹¶æ’åºã€‚\n\næ··åˆæ£€ç´¢ç­–ç•¥æ··åˆæ£€ç´¢ç­–â ç•¥ç»“åˆå¤šç§æ£€ç´¢æ–¹æ³•â€Œçš„ä¼˜åŠ¿ï¼Œæé«˜æœç´¢æ•ˆæœã€‚å¸¸è§ç»„åˆåŒ…æ‹¬å…³â€é”®è¯æ£€ç´¢ã€è¯­ä¹‰æ£€ç´¢ã€çŸ¥â€Œè¯†å›¾è°±ç­‰ã€‚\næ¯”å¦‚åœ¨ AI å¤§â æ¨¡å‹å¼€å‘å¹³å° Dify ä¸­ï¼Œå°±ä¸ºâ€Œç”¨æˆ·æä¾›äº† â€œåŸºäºå…¨æ–‡æ£€ç´¢çš„å…³é”®è¯æœç´¢ + åŸºäºå‘é‡æ£€ç´¢çš„è¯­ä¹‰æ£€â€ç´¢â€ çš„æ··åˆæ£€ç´¢ç­–ç•¥ï¼Œç”¨æˆ·è¿˜å¯ä»¥â€Œè‡ªå·±è®¾ç½®ä¸åŒæ£€ç´¢æ–¹å¼çš„æƒé‡ã€‚\nä¸‰ã€RAG å®æˆ˜ï¼šSpring AI + æœ¬åœ°çŸ¥è¯†åº“Spring AI æ¡†æ¶ä¸ºæˆ‘ä»¬å®ç° RAG æä¾›äº†å…¨æµç¨‹çš„æ”¯æŒï¼Œå‚è€ƒ Spring AI å’Œ Spring AI Alibaba çš„å®˜æ–¹æ–‡æ¡£ã€‚\nç”±äºæ˜¯ç¬¬ä¸€ä¸ªâ  RAG ç¨‹åºï¼Œæˆ‘ä»¬å‚â€Œè€ƒæ ‡å‡†çš„ RAG å¼€å‘æ­¥éª¤å¹¶è¿›è¡Œä¸€å®šçš„ç®€åŒ–ï¼Œâ€æ¥å®ç°åŸºäºæœ¬åœ°çŸ¥è¯†åº“çš„â€Œ AI æ‹çˆ±çŸ¥è¯†é—®ç­”åº”ç”¨ã€‚\næ ‡å‡†çš„ RAG å¼€å‘æ­¥éª¤ï¼š\n\næ–‡æ¡£æ”¶é›†å’Œåˆ‡å‰²\nå‘é‡è½¬æ¢å’Œå­˜å‚¨\nåˆ‡ç‰‡è¿‡æ»¤å’Œæ£€ç´¢\næŸ¥è¯¢å¢å¼ºå’Œå…³è”\n\nç®€åŒ–åçš„ RAG å¼€å‘æ­¥éª¤ï¼š\n\næ–‡æ¡£å‡†å¤‡\næ–‡æ¡£è¯»å–\nå‘é‡è½¬æ¢å’Œå­˜å‚¨\næŸ¥è¯¢å¢å¼º\n\n1ã€æ–‡æ¡£å‡†å¤‡é¦–å…ˆå‡†å¤‡ç”¨â äºç»™ AI çŸ¥è¯†åº“â€Œæä¾›çŸ¥è¯†çš„æ–‡æ¡£ï¼Œæ¨è Markdowâ€n æ ¼å¼ï¼Œå°½é‡ç»“æ„â€ŒåŒ–ã€‚\nå¤§å®¶â åœ¨å­¦ä¹  RAG çš„â€Œè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åˆ©ç”¨ AI æ¥ç”Ÿæˆæ–‡æ¡£ï¼Œâ€æä¾›ä¸€æ®µç¤ºä¾‹ Prâ€Œomptï¼š\n1å¸®æˆ‘ç”Ÿæˆ 3 ç¯‡ Markdown æ–‡ç« ï¼Œä¸»é¢˜æ˜¯ã€æ‹çˆ±å¸¸è§é—®é¢˜å’Œå›ç­”ã€‘ï¼Œ3 ç¯‡æ–‡ç« çš„é—®é¢˜åˆ†åˆ«é’ˆå¯¹å•èº«ã€æ‹çˆ±ã€å·²å©šçš„çŠ¶æ€ï¼Œå†…å®¹å½¢å¼ä¸º 1 é—® 1 ç­”ï¼Œæ¯ä¸ªé—®é¢˜æ ‡é¢˜ä½¿ç”¨ 4 çº§æ ‡é¢˜ï¼Œæ¯ç¯‡å†…å®¹éœ€è¦æœ‰è‡³å°‘ 5 ä¸ªé—®é¢˜ï¼Œè¦æ±‚æ¯ä¸ªé—®é¢˜ä¸­æ¨èä¸€ä¸ªç›¸å…³çš„è¯¾ç¨‹ï¼Œè¯¾ç¨‹é“¾æ¥éƒ½æ˜¯ https://www.codefather.cn\n\n2ã€æ–‡æ¡£è¯»å–é¦–å…ˆï¼Œæˆ‘ä»¬è¦å¯¹è‡ªå·±å‡†å¤‡å¥½çš„çŸ¥è¯†åº“æ–‡æ¡£è¿›è¡Œå¤„ç†ï¼Œç„¶åä¿å­˜åˆ°å‘é‡æ•°æ®åº“ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹ä¿—ç§° ETLï¼ˆæŠ½å–ã€è½¬æ¢ã€åŠ è½½ï¼‰ï¼ŒSpring AI æä¾›äº†å¯¹ ETL çš„æ”¯æŒï¼Œå‚è€ƒ å®˜æ–¹æ–‡æ¡£ã€‚\nETL çš„ 3 å¤§æ ¸å¿ƒç»„ä»¶ï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œï¼š\n\nDocumentReaderï¼šè¯»å–æ–‡æ¡£ï¼Œå¾—åˆ°æ–‡æ¡£åˆ—è¡¨\nDocumentTransformerï¼šè½¬æ¢æ–‡æ¡£ï¼Œå¾—åˆ°å¤„ç†åçš„æ–‡æ¡£åˆ—è¡¨\nDocumentWriterï¼šå°†æ–‡æ¡£åˆ—è¡¨ä¿å­˜åˆ°å­˜å‚¨ä¸­ï¼ˆå¯ä»¥æ˜¯å‘é‡æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å­˜å‚¨ï¼‰\n\n\nåˆšå¼€å§‹å­¦ä¹  RAGâ ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³æ³¨å¤ªå¤š ETL çš„ç»†â€ŒèŠ‚ã€ä¹Ÿä¸ç”¨å¯¹æ–‡æ¡£è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œä¸‹é¢æˆ‘ä»¬å°±å…ˆç”¨ Spring AI è¯»â€å–å‡†å¤‡å¥½çš„ Markdown æ–‡æ¡£â€Œï¼Œä¸ºå†™å…¥åˆ°å‘é‡æ•°æ®åº“åšå‡†å¤‡ã€‚\n1ï¼‰å¼•å…¥ä¾èµ–\nSprinâ g AI æä¾›äº†å¾ˆâ€Œå¤šç§ DocumentReadersâ€ï¼Œç”¨äºåŠ è½½ä¸åŒç±»â€Œå‹çš„æ–‡ä»¶ã€‚\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ MarkdownDocumentReader æ¥è¯»å– Markdown æ–‡æ¡£ã€‚éœ€è¦å…ˆå¼•å…¥ä¾èµ–ï¼Œå¯ä»¥åœ¨ Maven ä¸­å¤®ä»“åº“ æ‰¾åˆ°ã€‚\n12345&lt;dependency&gt;    &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;    &lt;artifactId&gt;spring-ai-markdown-document-reader&lt;/artifactId&gt;    &lt;version&gt;1.0.0-M6&lt;/version&gt;&lt;/dependency&gt;\n\n2ï¼‰åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º rag åŒ…ï¼Œç¼–å†™æ–‡æ¡£åŠ è½½å™¨ç±» LoveAppDocumentLoaderï¼Œè´Ÿè´£è¯»å–æ‰€æœ‰ Markdown æ–‡æ¡£å¹¶è½¬æ¢ä¸º Document åˆ—è¡¨ã€‚ä»£ç å¦‚ä¸‹ï¼š\n1234567891011121314151617181920212223242526272829303132@Component@Slf4jclass LoveAppDocumentLoader &#123;    private final ResourcePatternResolver resourcePatternResolver;    LoveAppDocumentLoader(ResourcePatternResolver resourcePatternResolver) &#123;        this.resourcePatternResolver = resourcePatternResolver;    &#125;    public List&lt;Document&gt; loadMarkdowns() &#123;        List&lt;Document&gt; allDocuments = new ArrayList&lt;&gt;();        try &#123;                        Resource[] resources = resourcePatternResolver.getResources(&quot;classpath:document/*.md&quot;);            for (Resource resource : resources) &#123;                String fileName = resource.getFilename();                MarkdownDocumentReaderConfig config = MarkdownDocumentReaderConfig.builder()                        .withHorizontalRuleCreateDocument(true)                        .withIncludeCodeBlock(false)                        .withIncludeBlockquote(false)                        .withAdditionalMetadata(&quot;filename&quot;, fileName)                        .build();                MarkdownDocumentReader reader = new MarkdownDocumentReader(resource, config);                allDocuments.addAll(reader.get());            &#125;        &#125; catch (IOException e) &#123;            log.error(&quot;Markdown æ–‡æ¡£åŠ è½½å¤±è´¥&quot;, e);        &#125;        return allDocuments;    &#125;&#125;\n\nä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ Marâ kdownDocumentReaderConfig æ–‡â€Œæ¡£åŠ è½½é…ç½®æ¥æŒ‡å®šè¯»å–æ–‡æ¡£çš„ç»†èŠ‚ï¼Œæ¯”å¦‚æ˜¯å¦è¯»å–ä»£ç å—ã€å¼•ç”¨å—ç­‰ã€‚ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬è¿˜æŒ‡å®šäº†é¢å¤–çš„å…ƒä¿¡æ¯é…ç½®â€ï¼Œæå–æ–‡æ¡£çš„æ–‡ä»¶åï¼ˆfileNameï¼‰ä½œä¸ºæ–‡æ¡£çš„å…ƒä¿¡æ¯â€Œï¼Œå¯ä»¥ä¾¿äºåç»­çŸ¥è¯†åº“å®ç°æ›´ç²¾ç¡®çš„æ£€ç´¢ã€‚\n\n3ã€å‘é‡è½¬æ¢å’Œå­˜å‚¨ä¸ºäº†å®ç°æ–¹ä¾¿â ï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨ Spriâ€Œng AI å†…ç½®çš„ã€åŸºäºå†…å­˜è¯»å†™çš„å‘é‡æ•°æ®åº“â€ SimpleVectâ€ŒorStore æ¥ä¿å­˜æ–‡æ¡£ã€‚\nSimpleVeâ ctorStore å®ç°äº† Veâ€ŒctorStore æ¥å£ï¼Œè€Œ VectorStore æ¥å£é›†æˆäº†â€ DocumentWriterï¼Œâ€Œæ‰€ä»¥å…·å¤‡æ–‡æ¡£å†™å…¥èƒ½åŠ›ã€‚å¦‚å›¾ï¼š\n\nç®€å•äº†è§£ä¸‹æºâ ç ï¼Œåœ¨å°†æ–‡æ¡£å†™å…¥åˆ°æ•°æ®åº“â€Œå‰ï¼Œä¼šå…ˆè°ƒç”¨ Embedding å¤§æ¨¡å‹å°†æ–‡æ¡£è½¬â€æ¢ä¸ºå‘é‡ï¼Œå®é™…ä¿å­˜åˆ°æ•°æ®â€Œåº“ä¸­çš„æ˜¯å‘é‡ç±»å‹çš„æ•°æ®ã€‚\n\nåœ¨ rag åŒ…ä¸‹æ–°å»º LoveAppVectorStoreConfig ç±»ï¼Œå®ç°åˆå§‹åŒ–å‘é‡æ•°æ®åº“å¹¶ä¸”ä¿å­˜æ–‡æ¡£çš„æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š\n12345678910111213141516@Configurationpublic class LoveAppVectorStoreConfig &#123;    @Resource    private LoveAppDocumentLoader loveAppDocumentLoader;        @Bean    VectorStore loveAppVectorStore(EmbeddingModel dashscopeEmbeddingModel) &#123;        SimpleVectorStore simpleVectorStore = SimpleVectorStore.builder(dashscopeEmbeddingModel)                .build();                List&lt;Document&gt; documents = loveAppDocumentLoader.loadMarkdowns();        simpleVectorStore.add(documents);        return simpleVectorStore;    &#125;&#125;\n\n4ã€æŸ¥è¯¢å¢å¼ºSpring AI é€šè¿‡â  Advisor ç‰¹æ€§æä¾›äº†å¼€ç®±å³ç”¨çš„ RAG åŠŸâ€Œèƒ½ã€‚ä¸»è¦æ˜¯ QuestionAnswerAdvisor é—®ç­”æ‹¦æˆªå™¨å’Œ RetrievalAugâ€mentationAdvisor æ£€ç´¢å¢å¼ºæ‹¦æˆªå™¨â€Œï¼Œå‰è€…æ›´ç®€å•æ˜“ç”¨ã€åè€…æ›´çµæ´»å¼ºå¤§ã€‚\næŸ¥è¯¢å¢å¼ºçš„åŸç†å…¶å®å¾ˆç®€å•â ã€‚å‘é‡æ•°æ®åº“å­˜å‚¨ç€ AI æ¨¡å‹æœ¬èº«ä¸çŸ¥é“çš„æ•°æ®ï¼Œå½“ç”¨æˆ·é—®é¢˜â€Œå‘é€ç»™ AI æ¨¡å‹æ—¶ï¼ŒQuestionAnswerAdvisor ä¼šæŸ¥è¯¢å‘é‡æ•°æ®åº“ï¼Œè·å–ä¸ç”¨æˆ·é—®é¢˜ç›¸å…³çš„æ–‡æ¡£â€ã€‚ç„¶åä»å‘é‡æ•°æ®åº“è¿”å›çš„å“åº”ä¼šè¢«é™„åŠ åˆ°ç”¨æˆ·æ–‡æœ¬ä¸­ï¼Œä¸º â€ŒAI æ¨¡å‹æä¾›ä¸Šä¸‹æ–‡ï¼Œå¸®åŠ©å…¶ç”Ÿæˆå›ç­”ã€‚\næŸ¥çœ‹ Quâ estionAnswâ€ŒerAdvisor æºç ï¼Œå¯ä»¥çœ‹åˆ°è®© Aâ€I åŸºäºçŸ¥è¯†åº“è¿›è¡Œé—®â€Œç­”çš„ Promptï¼š\n\næ ¹æ® å®˜æ–¹æ–‡æ¡£ï¼Œéœ€è¦å…ˆå¼•å…¥ä¾èµ–ï¼ˆä¸å¼•å…¥ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼‰ï¼š\n1234&lt;dependency&gt;   &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;   &lt;artifactId&gt;spring-ai-advisors-vector-store&lt;/artifactId&gt;&lt;/dependency&gt;\n\næ­¤å¤„æˆ‘ä»¬å°±é€‰ç”¨æ›´ç®€å•æ˜“ç”¨çš„ QuestionAnswerAdvisor é—®ç­”æ‹¦æˆªå™¨ï¼Œåœ¨ LoveApp ä¸­æ–°å¢å’Œ RAG çŸ¥è¯†åº“è¿›è¡Œå¯¹è¯çš„æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š\n12345678910111213141516171819@Resourceprivate VectorStore loveAppVectorStore;public String doChatWithRag(String message, String chatId) &#123;    ChatResponse chatResponse = chatClient            .prompt()            .user(message)            .advisors(spec -&gt; spec.param(CHAT_MEMORY_CONVERSATION_ID_KEY, chatId)                    .param(CHAT_MEMORY_RETRIEVE_SIZE_KEY, 10))                        .advisors(new MyLoggerAdvisor())                        .advisors(new QuestionAnswerAdvisor(loveAppVectorStore))            .call()            .chatResponse();    String content = chatResponse.getResult().getOutput().getText();    log.info(&quot;content: &#123;&#125;&quot;, content);    return content;&#125;\n\næµ‹è¯•ç¼–å†™å•å…ƒæµ‹è¯•ä»£ç ï¼Œæ•…æ„æé—®ä¸€ä¸ªæ–‡æ¡£å†…æœ‰å›ç­”çš„é—®é¢˜ï¼š\n1234567@Testvoid doChatWithRag() &#123;    String chatId = UUID.randomUUID().toString();    String message = &quot;æˆ‘å·²ç»ç»“å©šäº†ï¼Œä½†æ˜¯å©šåå…³ç³»ä¸å¤ªäº²å¯†ï¼Œæ€ä¹ˆåŠï¼Ÿ&quot;;    String answer =  loveApp.doChatWithRag(message, chatId);    Assertions.assertNotNull(answer);&#125;\n\n\nå››ã€RAG å®æˆ˜ï¼šSpring AI + äº‘çŸ¥è¯†åº“æœåŠ¡åœ¨ä¸Šä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬â æ–‡æ¡£è¯»å–ã€æ–‡æ¡£åŠ è½½ã€å‘é‡æ•°æ®åº“æ˜¯åœ¨æœ¬â€Œåœ°é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼å®ç°çš„ã€‚å…¶å®è¿˜æœ‰å¦å¤–ä¸€ç§æ¨¡å¼ï¼Œç›´æ¥ä½¿ç”¨åˆ«äººæä¾›çš„äº‘çŸ¥è¯†åº“â€æœåŠ¡æ¥ç®€åŒ– RAG çš„å¼€å‘ã€‚ä½†ç¼ºç‚¹æ˜¯â€Œé¢å¤–çš„è´¹ç”¨ã€ä»¥åŠæ•°æ®éšç§é—®é¢˜ã€‚\nå¾ˆå¤š AI å¤§æ¨¡å‹åº”ç”¨å¼€å‘å¹³å°éƒ½æä¾›äº†äº‘çŸ¥è¯†åº“æœåŠ¡ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯é€‰æ‹© é˜¿é‡Œäº‘ç™¾ç‚¼ï¼Œå› ä¸º Spring AI Alibaba å¯ä»¥å’Œå®ƒè½»æ¾é›†æˆï¼Œç®€åŒ– RAG å¼€å‘ã€‚\n1ã€å‡†å¤‡äº‘çŸ¥è¯†åº“é¦–å…ˆæˆ‘ä»¬å¯â ä»¥åˆ©ç”¨äº‘çŸ¥è¯†åº“å®Œæˆâ€Œæ–‡æ¡£è¯»å–ã€æ–‡æ¡£å¤„ç†ã€æ–‡æ¡£åŠ è½½ã€ä¿å­˜åˆ°â€å‘é‡æ•°æ®åº“ã€çŸ¥è¯†åº“ç®¡â€Œç†ç­‰æ“ä½œã€‚\n1ï¼‰å‡†å¤‡æ•°æ®ã€‚åœ¨ åº”ç”¨æ•°æ® æ¨¡å—ä¸­ï¼Œä¸Šä¼ åŸå§‹æ–‡æ¡£æ•°æ®åˆ°å¹³å°ï¼Œç”±å¹³å°æ¥å¸®å¿™è§£ææ–‡æ¡£ä¸­çš„å†…å®¹å’Œç»“æ„ï¼š\n\n2ï¼‰è¿›å…¥é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°çš„ çŸ¥è¯†åº“ï¼Œåˆ›å»ºä¸€ä¸ªçŸ¥è¯†åº“ï¼Œé€‰æ‹©æ¨èé…ç½®å³å¯ï¼š\n\n3ï¼‰å¯¼å…¥æ•°æ®åˆ°çŸ¥è¯†åº“ä¸­ï¼Œå…ˆé€‰æ‹©è¦å¯¼å…¥çš„æ•°æ®ï¼š\n\nå¯¼å…¥æ•°æ®æ—¶â ï¼Œå¯ä»¥è®¾ç½®æ•°æ®é¢„å¤„â€Œç†è§„åˆ™ï¼Œæ™ºèƒ½åˆ‡åˆ†æ–‡æ¡£ä¸ºæ–‡æ¡£åˆ‡ç‰‡ï¼ˆä¸€éƒ¨â€åˆ†æ–‡æ¡£ï¼‰ï¼š\n\nåˆ›å»ºå¥½çŸ¥è¯†åº“åï¼Œè¿›å…¥çŸ¥è¯†åº“æŸ¥çœ‹æ–‡æ¡£å’Œåˆ‡ç‰‡ï¼š\n\n\n2ã€RAG å¼€å‘æœ‰äº†çŸ¥è¯†åº“åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ç¨‹åºæ¥å¯¹æ¥äº†ã€‚å¼€å‘è¿‡ç¨‹å¾ˆç®€å•ï¼Œå¯ä»¥å‚è€ƒ Spring AI Alibaba çš„å®˜æ–¹æ–‡æ¡£ æ¥å­¦ä¹ ã€‚\nSpring AI Aâ libaba åˆ©ç”¨äº† Spring AI æâ€Œä¾›çš„æ–‡æ¡£æ£€ç´¢ç‰¹æ€§ï¼ˆDocumentRetrieverï¼‰ï¼Œè‡ªå®šä¹‰äº†ä¸€å¥—æ–‡æ¡£æ£€ç´¢çš„æ–¹æ³•ï¼Œä½¿å¾—â€ç¨‹åºä¼šè°ƒç”¨é˜¿é‡Œçµç§¯å¤§æ¨¡å‹ API æ¥ä»äº‘çŸ¥è¯†â€Œåº“ä¸­æ£€ç´¢æ–‡æ¡£ï¼Œè€Œä¸æ˜¯ä»å†…å­˜ä¸­æ£€ç´¢ã€‚\nä½¿ç”¨ä¸‹åˆ—ä»£ç å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–‡æ¡£æ£€ç´¢å™¨å¹¶å‘èµ·æŸ¥è¯¢ï¼š\n12345678var dashScopeApi = new DashScopeApi(&quot;DASHSCOPE_API_KEY&quot;);DocumentRetriever retriever = new DashScopeDocumentRetriever(dashScopeApi,        DashScopeDocumentRetrieverOptions.builder()                .withIndexName(&quot;ä½ çš„çŸ¥è¯†åº“åç§°&quot;)                .build());List&lt;Document&gt; documentList = retriever.retrieve(new Query(&quot;è°æ˜¯Azer&quot;));\n\nå¦‚ä½•ä½¿ç”¨è¿™ä¸ªæ–‡æ¡£æ£€ç´¢å™¨ï¼Œè®© AI ä»äº‘çŸ¥è¯†åº“æŸ¥è¯¢æ–‡æ¡£å‘¢ï¼Ÿ\nè¿™å°±éœ€è¦ä½¿ç”¨ Spring AI æä¾›çš„å¦ä¸€ä¸ª RAG Advisor â€”â€” RetrievalAugmentationAdvisor æ£€ç´¢å¢å¼ºé¡¾é—®ï¼Œå¯ä»¥ç»‘å®šæ–‡æ¡£æ£€ç´¢å™¨ã€æŸ¥è¯¢è½¬æ¢å™¨å’ŒæŸ¥è¯¢å¢å¼ºå™¨ï¼Œæ›´çµæ´»åœ°æ„é€ æŸ¥è¯¢ã€‚\nç¤ºä¾‹ä»£ç å¦‚â ä¸‹ï¼Œå…ˆä»…ä½œäº†è§£å³å¯â€Œï¼Œåé¢ç« èŠ‚ä¸­ä¼šå¸¦å¤§å®¶å®æˆ˜æ£€ç´¢å¢å¼ºé¡¾é—®â€çš„æ›´å¤šç‰¹æ€§ï¼š\n123456789101112131415Advisor retrievalAugmentationAdvisor = RetrievalAugmentationAdvisor.builder()        .queryTransformers(RewriteQueryTransformer.builder()                .chatClientBuilder(chatClientBuilder.build().mutate())                .build())        .documentRetriever(VectorStoreDocumentRetriever.builder()                .similarityThreshold(0.50)                .vectorStore(vectorStore)                .build())        .build();String answer = chatClient.prompt()        .advisors(retrievalAugmentationAdvisor)        .user(question)        .call()        .content();\n\n1ï¼‰å›å½’åˆ°â æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œå…ˆç¼–â€Œå†™ä¸€ä¸ªé…ç½®ç±»ï¼Œç”¨äºåˆå§‹åŒ–åŸºäºäº‘çŸ¥è¯†åº“â€çš„æ£€ç´¢å¢å¼ºé¡¾é—® Bâ€Œeanï¼š\n1234567891011121314151617181920@Configuration@Slf4jclass LoveAppRagCloudAdvisorConfig &#123;    @Value(&quot;$&#123;spring.ai.dashscope.api-key&#125;&quot;)    private String dashScopeApiKey;    @Bean    public Advisor loveAppRagCloudAdvisor() &#123;        DashScopeApi dashScopeApi = new DashScopeApi(dashScopeApiKey);        final String KNOWLEDGE_INDEX = &quot;æ‹çˆ±å¤§å¸ˆ&quot;;        DocumentRetriever documentRetriever = new DashScopeDocumentRetriever(dashScopeApi,                DashScopeDocumentRetrieverOptions.builder()                        .withIndexName(KNOWLEDGE_INDEX)                        .build());        return RetrievalAugmentationAdvisor.builder()                .documentRetriever(documentRetriever)                .build();    &#125;&#125;\n\næ³¨æ„ä¸Šè¿°ä»£ç ä¸­æŒ‡å®šçŸ¥è¯†åº“è¦ ä½¿ç”¨åç§°ï¼ˆè€Œä¸æ˜¯ idï¼‰ã€‚\n2ï¼‰ç„¶ååœ¨ LoveApp ä¸­ä½¿ç”¨è¯¥ Advisorï¼š\n12345678910111213141516171819@Resourceprivate Advisor loveAppRagCloudAdvisor;public String doChatWithRag(String message, String chatId) &#123;    ChatResponse chatResponse = chatClient            .prompt()            .user(message)            .advisors(spec -&gt; spec.param(CHAT_MEMORY_CONVERSATION_ID_KEY, chatId)                    .param(CHAT_MEMORY_RETRIEVE_SIZE_KEY, 10))                        .advisors(new MyLoggerAdvisor())                        .advisors(loveAppRagCloudAdvisor)            .call()            .chatResponse();    String content = chatResponse.getResult().getOutput().getText();    log.info(&quot;content: &#123;&#125;&quot;, content);    return content;&#125;\n\n3ï¼‰æµ‹è¯•ä¸€ä¸‹â ã€‚é€šè¿‡ Debuâ€Œg æŸ¥çœ‹è¯·æ±‚ï¼Œèƒ½å‘ç°æ£€ç´¢åˆ°äº†å¤šä¸ªæ–‡æ¡£â€åˆ‡ç‰‡ï¼Œæ¯ä¸ªåˆ‡ç‰‡æœ‰å¯¹â€Œåº”çš„å…ƒä¿¡æ¯ï¼š\n\nè‡³æ­¤ï¼Œæˆ‘ä»¬å°±å­¦â å®Œäº† RAG çŸ¥è¯†åº“çš„åŸºæœ¬â€Œå¼€å‘ã€‚\n","slug":"RAG-1","date":"2025-11-06T04:59:49.000Z","categories_index":"SpringBoot,Spring AI","tags_index":"Spring AI,å¤§æ¨¡å‹,AI","author_index":"Azer"},{"id":"0d1cff3c26f39f16f759d073f873bb99","title":"Advisor","content":"1ã€Advisorè‡ªå®šä¹‰ Advisorå­¦è¿‡ Servâ let å’Œ Spring Aâ€ŒOP çš„åŒå­¦åº”è¯¥å¯¹è¿™ä¸ªåŠŸèƒ½å¹¶ä¸é™Œç”Ÿï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–å†™æ‹¦æˆªâ€å™¨æˆ–åˆ‡é¢å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œå¤„ç†â€Œï¼Œæ¯”å¦‚è®°å½•è¯·æ±‚å“åº”æ—¥å¿—ã€é‰´æƒç­‰ã€‚\nSpring â AI çš„ Advisor â€Œå°±å¯ä»¥ç†è§£ä¸ºæ‹¦æˆªå™¨ï¼Œå¯ä»¥å¯¹è°ƒç”¨ AI çš„è¯·æ±‚è¿›è¡Œå¢å¼ºâ€ï¼Œæ¯”å¦‚è°ƒç”¨ AI å‰é‰´æƒã€â€Œè°ƒç”¨ AI åè®°å½•æ—¥å¿—ã€‚\nå®˜æ–¹å·²ç»æä¾›äº†ä¸€äº› Advisorï¼Œä½†å¯èƒ½æ— æ³•æ»¡è¶³æˆ‘ä»¬å®é™…çš„ä¸šåŠ¡éœ€æ±‚ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®˜æ–¹æä¾›çš„ è‡ªå®šä¹‰ Advisor åŠŸèƒ½ã€‚æŒ‰ç…§ä¸‹åˆ—æ­¥éª¤æ“ä½œå³å¯ã€‚\nè‡ªå®šä¹‰ Advisor æ­¥éª¤1ï¼‰é€‰æ‹©åˆâ é€‚çš„æ¥å£å®ç°ï¼Œå®ç°â€Œä»¥ä¸‹æ¥å£ä¹‹ä¸€æˆ–åŒæ—¶å®ç°ä¸¤è€…ï¼ˆæ›´å»ºè®®åŒâ€æ—¶å®ç°ï¼‰ï¼š\n\nCallAroundAdvisorï¼šç”¨äºå¤„ç†åŒæ­¥è¯·æ±‚å’Œå“åº”ï¼ˆéæµå¼ï¼‰\nStreamAroundAdvisorï¼šç”¨äºå¤„ç†æµå¼è¯·æ±‚å’Œå“åº”\n\n123public class MyCustomAdvisor implements CallAroundAdvisor, StreamAroundAdvisor &#123;    &#125;\n\n2ï¼‰å®ç°æ ¸å¿ƒæ–¹æ³•\nå¯¹äºéæµå¼â å¤„ç† (CallAâ€ŒroundAdvisor)ï¼Œå®ç° aâ€roundCallâ€Œ æ–¹æ³•ï¼š\n1234567891011@Overridepublic AdvisedResponse aroundCall(AdvisedRequest advisedRequest, CallAroundAdvisorChain chain) &#123;        AdvisedRequest modifiedRequest = processRequest(advisedRequest);            AdvisedResponse response = chain.nextAroundCall(modifiedRequest);            return processResponse(response);&#125;\n\nå¯¹äºæµå¼å¤„â ç† (Streamâ€ŒAroundAdvisor)ï¼Œå®ç° â€aroundStrâ€Œeam æ–¹æ³•ï¼š\n123456789@Overridepublic Flux&lt;AdvisedResponse&gt; aroundStream(AdvisedRequest advisedRequest, StreamAroundAdvisorChain chain) &#123;        AdvisedRequest modifiedRequest = processRequest(advisedRequest);            return chain.nextAroundStream(modifiedRequest)               .map(response -&gt; processResponse(response));&#125;\n\n3ï¼‰è®¾ç½®æ‰§è¡Œé¡ºåº\né€šè¿‡å®ç°getOrder()æ–¹æ³•æŒ‡å®š Advisor åœ¨é“¾ä¸­çš„æ‰§è¡Œé¡ºåºã€‚å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆæ‰§è¡Œï¼š\n12345@Overridepublic int getOrder() &#123;        return 100; &#125;\n\n4ï¼‰æä¾›å”¯ä¸€åç§°\nä¸ºæ¯ä¸ª Advisor æä¾›ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼š\n1234@Overridepublic String getName() &#123;    return &quot;Azerè‡ªå®šä¹‰çš„ Advisor&quot;;&#125;\n\nè‡ªå®šä¹‰æ—¥å¿— Advisoræˆ‘ä»¬å¯ä»¥åŒæ—¶å‚è€ƒ å®˜æ–¹æ–‡æ¡£ å’Œå†…ç½®çš„ SimpleLoggerAdvisor æºç ï¼Œç»“åˆ 2 è€…å¹¶ç•¥åšä¿®æ”¹ï¼Œå¼€å‘ä¸€ä¸ªæ›´ç²¾ç®€çš„ã€å¯è‡ªå®šä¹‰çº§åˆ«çš„æ—¥å¿—è®°å½•å™¨ã€‚é»˜è®¤æ‰“å° info çº§åˆ«æ—¥å¿—ã€å¹¶ä¸”åªè¾“å‡ºå•æ¬¡ç”¨æˆ·æç¤ºè¯å’Œ AI å›å¤çš„æ–‡æœ¬ã€‚\nåœ¨æ ¹åŒ…ä¸‹æ–°å»º advisor åŒ…ï¼Œç¼–å†™æ—¥å¿— Advisor çš„ä»£ç ï¼š\n1234567891011121314151617181920212223242526272829303132333435@Slf4jpublic class MyLoggerAdvisor implements CallAroundAdvisor, StreamAroundAdvisor &#123;    @Override    public String getName() &#123;        return this.getClass().getSimpleName();    &#125;    @Override    public int getOrder() &#123;        return 0;    &#125;    private AdvisedRequest before(AdvisedRequest request) &#123;        log.info(&quot;AI Request: &#123;&#125;&quot;, request.userText());        return request;    &#125;    private void observeAfter(AdvisedResponse advisedResponse) &#123;        log.info(&quot;AI Response: &#123;&#125;&quot;, advisedResponse.response().getResult().getOutput().getText());    &#125;    public AdvisedResponse aroundCall(AdvisedRequest advisedRequest, CallAroundAdvisorChain chain) &#123;        advisedRequest = this.before(advisedRequest);        AdvisedResponse advisedResponse = chain.nextAroundCall(advisedRequest);        this.observeAfter(advisedResponse);        return advisedResponse;    &#125;    public Flux&lt;AdvisedResponse&gt; aroundStream(AdvisedRequest advisedRequest, StreamAroundAdvisorChain chain) &#123;        advisedRequest = this.before(advisedRequest);        Flux&lt;AdvisedResponse&gt; advisedResponses = chain.nextAroundStream(advisedRequest);        return (new MessageAggregator()).aggregateAdvisedResponse(advisedResponses, this::observeAfter);    &#125;&#125;\n\nä¸Šè¿°ä»£ç ä¸­å€¼å¾—å…³æ³¨çš„æ˜¯ arouâ ndStream æ–¹æ³•çš„è¿”å›ï¼Œé€šè¿‡ MessageAggregâ€Œator å·¥å…·ç±»å°† Flux å“åº”èšåˆæˆå•ä¸ª AdvisedResponseã€‚è¿™å¯¹äºæ—¥å¿—è®°å½•æˆ–å…¶ä»–éœ€è¦è§‚å¯Ÿæ•´ä¸ªå“åº”è€Œéæµä¸­å„â€ä¸ªç‹¬ç«‹é¡¹çš„å¤„ç†éå¸¸æœ‰ç”¨ã€‚æ³¨æ„ï¼Œä¸èƒ½åœ¨ MessageAggreâ€Œgator ä¸­ä¿®æ”¹å“åº”ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåªè¯»æ“ä½œã€‚\nåœ¨ LoveApp ä¸­åº”ç”¨è‡ªå®šä¹‰çš„æ—¥å¿— Advisorï¼š\n12345678chatClient = ChatClient.builder(dashscopeChatModel)        .defaultSystem(SYSTEM_PROMPT)        .defaultAdvisors(                new MessageChatMemoryAdvisor(chatMemory),                                new MyLoggerAdvisor(),        )        .build();\n\nè‡ªå®šä¹‰ Re-Reading Advisorè®©æˆ‘ä»¬å†å‚è€ƒ å®˜æ–¹æ–‡æ¡£ æ¥å®ç°ä¸€ä¸ª Re-Readingï¼ˆé‡è¯»ï¼‰Advisorï¼Œåˆç§° Re2ã€‚è¯¥æŠ€æœ¯é€šè¿‡è®©æ¨¡å‹é‡æ–°é˜…è¯»é—®é¢˜æ¥æé«˜æ¨ç†èƒ½åŠ›ï¼Œæœ‰ æ–‡çŒ® æ¥å°è¯å®ƒçš„æ•ˆæœã€‚\nğŸ’¡ æ³¨æ„â ï¼Œè™½ç„¶è¯¥æŠ€æœ¯å¯æé«˜å¤§â€Œè¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ï¼Œä¸è¿‡æˆæœ¬ä¼šåŠ å€ï¼æ‰€ä»¥â€å¦‚æœ AI åº”ç”¨è¦é¢â€Œå‘ C ç«¯å¼€æ”¾ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚\nRe2 çš„å®ç°åŸâ ç†å¾ˆç®€å•ï¼Œæ”¹å†™ç”¨æˆ· Prompâ€Œt ä¸ºä¸‹åˆ—æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯è®© AI é‡å¤é˜…è¯»ç”¨æˆ·çš„è¾“å…¥ï¼šâ€‚â€‚â€‚â€‚â€â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€Œâ€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€‰â€‚â€‰â€‰\n12&#123;Input_Query&#125;Read the question again: &#123;Input_Query&#125;\n\néœ€è¦å¯¹è¯·æ±‚â è¿›è¡Œæ‹¦æˆªå¹¶æ”¹å†™ uâ€ŒserTextï¼Œå¯¹åº”çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š\n12345678910111213141516171819202122232425262728293031323334353637public class ReReadingAdvisor implements CallAroundAdvisor, StreamAroundAdvisor &#123;    private AdvisedRequest before(AdvisedRequest advisedRequest) &#123;        Map&lt;String, Object&gt; advisedUserParams = new HashMap&lt;&gt;(advisedRequest.userParams());        advisedUserParams.put(&quot;re2_input_query&quot;, advisedRequest.userText());        return AdvisedRequest.from(advisedRequest)                .userText(&quot;&quot;&quot;                        &#123;re2_input_query&#125;                        Read the question again: &#123;re2_input_query&#125;                        &quot;&quot;&quot;)                .userParams(advisedUserParams)                .build();    &#125;    @Override    public AdvisedResponse aroundCall(AdvisedRequest advisedRequest, CallAroundAdvisorChain chain) &#123;        return chain.nextAroundCall(this.before(advisedRequest));    &#125;    @Override    public Flux&lt;AdvisedResponse&gt; aroundStream(AdvisedRequest advisedRequest, StreamAroundAdvisorChain chain) &#123;        return chain.nextAroundStream(this.before(advisedRequest));    &#125;    @Override    public int getOrder() &#123;        return 0;    &#125;    @Override    public String getName() &#123;        return this.getClass().getSimpleName();    &#125;&#125;\n\nå¯ä»¥åœ¨ Lâ oveApp ä¸­ä½¿â€Œç”¨ Advisorï¼Œå¹¶è¿›è¡Œæµ‹è¯•ï¼ŒæŸ¥çœ‹â€è¯·æ±‚æ˜¯å¦è¢«æ”¹å†™ã€‚\n12345678chatClient = ChatClient.builder(dashscopeChatModel)        .defaultSystem(SYSTEM_PROMPT)        .defaultAdvisors(                new MessageChatMemoryAdvisor(chatMemory),                                new ReReadingAdvisor()        )        .build();\n\næœ€ä½³å®è·µ1ï¼‰ä¿æŒå•â ä¸€èŒè´£ï¼šæ¯ä¸ª Adâ€Œvisor åº”ä¸“æ³¨äºä¸€é¡¹ç‰¹å®šä»»åŠ¡\n2ï¼‰æ³¨æ„æ‰§è¡Œé¡ºåºï¼šåˆç†è®¾ç½®getOrder()å€¼ç¡®ä¿ Advisor æŒ‰æ­£ç¡®é¡ºåºæ‰§è¡Œ\n3ï¼‰åŒæ—¶æ”¯â æŒæµå¼å’Œéæµå¼ï¼šå°½â€Œå¯èƒ½åŒæ—¶å®ç°ä¸¤ç§æ¥å£ä»¥æé«˜çµæ´»æ€§\n4ï¼‰é«˜æ•ˆå¤„ç†è¯·æ±‚ï¼šé¿å…åœ¨ Advisor ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ\n5ï¼‰æµ‹è¯•è¾¹â ç•Œæƒ…å†µï¼šç¡®ä¿ Adâ€Œvisor èƒ½å¤Ÿä¼˜é›…å¤„ç†å¼‚å¸¸å’Œè¾¹ç•Œæƒ…â€å†µ\n6ï¼‰å¯¹äºéœ€â è¦æ›´å¤æ‚å¤„ç†çš„æµå¼â€Œåœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨ Reactor çš„æ“â€ä½œç¬¦ï¼š\n1234567891011121314@Overridepublic Flux&lt;AdvisedResponse&gt; aroundStream(AdvisedRequest advisedRequest, StreamAroundAdvisorChain chain) &#123;    return Mono.just(advisedRequest)           .publishOn(Schedulers.boundedElastic())           .map(request -&gt; &#123;                              return modifyRequest(request);           &#125;)           .flatMapMany(request -&gt; chain.nextAroundStream(request))           .map(response -&gt; &#123;                              return modifyResponse(response);           &#125;);&#125;\n\n7ï¼‰å¯ä»¥ä½¿ç”¨ adviseContext åœ¨ Advisor é“¾ä¸­å…±äº«çŠ¶æ€ï¼š\n1234567advisedRequest = advisedRequest.updateContext(context -&gt; &#123;    context.put(&quot;key&quot;, &quot;value&quot;);    return context;&#125;);Object value = advisedResponse.adviseContext().get(&quot;key&quot;);\n\n2ã€ç»“æ„åŒ–è¾“å‡ºç»“æ„åŒ–è¾“å‡ºè½¬æ¢å™¨ï¼ˆStructured Output Converterï¼‰æ˜¯ Spring AI æä¾›çš„ä¸€ç§å®ç”¨æœºåˆ¶ï¼Œç”¨äºå°†å¤§è¯­è¨€æ¨¡å‹è¿”å›çš„æ–‡æœ¬è¾“å‡ºè½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®æ ¼å¼ï¼Œå¦‚ JSONã€XML æˆ– Java ç±»ï¼Œè¿™å¯¹äºéœ€è¦å¯é è§£æ AI è¾“å‡ºå€¼çš„ä¸‹æ¸¸åº”ç”¨ç¨‹åºéå¸¸é‡è¦ã€‚\nåŸºæœ¬åŸç† - å·¥ä½œæµç¨‹ç»“æ„åŒ–è¾“å‡ºè½¬æ¢å™¨åœ¨å¤§æ¨¡å‹è°ƒç”¨å‰åéƒ½å‘æŒ¥ä½œç”¨ï¼š\n\nè°ƒç”¨å‰ï¼šè½¬æ¢å™¨ä¼šåœ¨æç¤ºè¯åé¢é™„åŠ æ ¼å¼æŒ‡ä»¤ï¼Œæ˜ç¡®å‘Šè¯‰æ¨¡å‹åº”è¯¥ç”Ÿæˆä½•ç§ç»“æ„çš„è¾“å‡ºï¼Œå¼•å¯¼æ¨¡å‹ç”Ÿæˆç¬¦åˆæŒ‡å®šæ ¼å¼çš„å“åº”ã€‚\nè°ƒç”¨åï¼šè½¬æ¢å™¨å°†æ¨¡å‹çš„æ–‡æœ¬è¾“å‡ºè½¬æ¢ä¸ºç»“æ„åŒ–ç±»å‹çš„å®ä¾‹ï¼Œæ¯”å¦‚å°†åŸå§‹æ–‡æœ¬æ˜ å°„ä¸º JSONã€XML æˆ–ç‰¹å®šçš„æ•°æ®ç»“æ„ã€‚\n\n\næ³¨æ„ï¼Œç»“æ„åŒ–è¾“å‡ºè½¬æ¢å™¨åªæ˜¯ å°½æœ€å¤§åŠªåŠ› å°†æ¨¡å‹è¾“å‡ºè½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®ï¼ŒAI æ¨¡å‹ä¸ä¿è¯ä¸€å®šæŒ‰ç…§è¦æ±‚è¿”å›ç»“æ„åŒ–è¾“å‡ºã€‚æœ‰äº›æ¨¡å‹å¯èƒ½æ— æ³•ç†è§£æç¤ºè¯æˆ–æ— æ³•æŒ‰è¦æ±‚ç”Ÿæˆç»“æ„åŒ–è¾“å‡ºã€‚å»ºè®®åœ¨ç¨‹åºä¸­å®ç°éªŒè¯æœºåˆ¶æˆ–è€…å¼‚å¸¸å¤„ç†æœºåˆ¶æ¥ç¡®ä¿æ¨¡å‹è¾“å‡ºç¬¦åˆé¢„æœŸã€‚\nè¿›é˜¶åŸç† - API è®¾è®¡è®©æˆ‘ä»¬è¿›ä¸€æ­¥ç†è§£ç»“æ„åŒ–è¾“å‡ºçš„åŸç†ï¼Œç»“æ„åŒ–è¾“å‡ºè½¬æ¢å™¨ StructuredOutputConverter æ¥å£å…è®¸å¼€å‘è€…è·å–ç»“æ„åŒ–è¾“å‡ºï¼Œä¾‹å¦‚å°†è¾“å‡ºæ˜ å°„åˆ° Java ç±»æˆ–å€¼æ•°ç»„ã€‚æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š\n123public interface StructuredOutputConverter&lt;T&gt; extends Converter&lt;String, T&gt;, FormatProvider &#123;&#125;\n\nå®ƒé›†æˆäº† 2 ä¸ªå…³é”®æ¥å£ï¼š\n\nFormatProvider æ¥å£ï¼šæä¾›ç‰¹å®šçš„æ ¼å¼æŒ‡ä»¤ç»™ AI æ¨¡å‹\nSpring çš„ Converter&lt;String, T&gt; æ¥å£ï¼šè´Ÿè´£å°†æ¨¡å‹çš„æ–‡æœ¬è¾“å‡ºè½¬æ¢ä¸ºæŒ‡å®šçš„ç›®æ ‡ç±»å‹ T\n\n123public interface FormatProvider &#123;    String getFormat();&#125;\n\nSprinâ g AI æä¾›äº†å¤šâ€Œç§è½¬æ¢å™¨å®ç°ï¼Œåˆ†åˆ«ç”¨äºå°†è¾“å‡ºè½¬æ¢ä¸ºä¸â€åŒçš„ç»“æ„ï¼š\n\nAbstractConversionServiceOutputConverterï¼šæä¾›é¢„é…ç½®çš„ GenericConversionServiceï¼Œç”¨äºå°† LLM è¾“å‡ºè½¬æ¢ä¸ºæ‰€éœ€æ ¼å¼\nAbstractMessageOutputConverterï¼šæ”¯æŒ Spring AI Message çš„è½¬æ¢\nBeanOutputConverterï¼šç”¨äºå°†è¾“å‡ºè½¬æ¢ä¸º Java Bean å¯¹è±¡ï¼ˆåŸºäº ObjectMapper å®ç°ï¼‰\nMapOutputConverterï¼šç”¨äºå°†è¾“å‡ºè½¬æ¢ä¸º Map ç»“æ„\nListOutputConverterï¼šç”¨äºå°†è¾“å‡ºè½¬æ¢ä¸º List ç»“æ„\n\nç±»å›¾å¦‚ä¸‹ï¼š\n\näº†è§£äº† Aâ PI è®¾è®¡åï¼Œå†æ¥â€Œè¿›ä¸€æ­¥å‰–æä¸€éç»“æ„åŒ–è¾“å‡ºçš„å·¥ä½œæµç¨‹ã€‚\n1ï¼‰åœ¨è°ƒç”¨å¤§æ¨¡å‹ä¹‹å‰ï¼ŒFormatProvider ä¸º AI æ¨¡å‹æä¾›ç‰¹å®šçš„æ ¼å¼æŒ‡ä»¤ï¼Œä½¿å…¶èƒ½å¤Ÿç”Ÿæˆå¯ä»¥é€šè¿‡ Converter è½¬æ¢ä¸ºæŒ‡å®šç›®æ ‡ç±»å‹çš„æ–‡æœ¬è¾“å‡ºã€‚\nè½¬æ¢å™¨çš„æ ¼å¼æŒ‡ä»¤ç»„ä»¶ä¼šå°†ç±»ä¼¼ä¸‹é¢çš„æ ¼å¼æŒ‡ä»¤é™„åŠ åˆ°æç¤ºè¯ä¸­ï¼š\n123Your response should be in JSON format.The data structure for the JSON should match this Java class: java.util.HashMapDo not include any explanations, only provide a RFC8259 compliant JSON response following this format without deviation.\n\né€šå¸¸ï¼Œä½¿ç”¨ PromptTemplate å°†æ ¼å¼æŒ‡ä»¤é™„åŠ åˆ°ç”¨æˆ·è¾“å…¥çš„æœ«å°¾ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\n12345678910StructuredOutputConverter outputConverter = ...String userInputTemplate = &quot;&quot;&quot;        ... ç”¨æˆ·æ–‡æœ¬è¾“å…¥ ....        &#123;format&#125;        &quot;&quot;&quot;; Prompt prompt = new Prompt(        new PromptTemplate(                this.userInputTemplate,                Map.of(..., &quot;format&quot;, outputConverter.getFormat())         ).createMessage());\n\nç¨åä¼šç»™å¤§å®¶è®²è§£ PromptTemplate ç‰¹æ€§ã€‚\n2ï¼‰Converter è´Ÿè´£å°†æ¨¡å‹çš„è¾“å‡ºæ–‡æœ¬è½¬æ¢ä¸ºæŒ‡å®šç±»å‹çš„å®ä¾‹ã€‚\næµç¨‹å›¾å¦‚ä¸‹ï¼š\n\nä½¿ç”¨ç¤ºä¾‹å®˜æ–¹æ–‡æ¡£æä¾›äº†å¾ˆå¤šè½¬æ¢ç¤ºä¾‹ï¼Œ\n1ï¼‰Beaâ nOutputCoâ€Œnverter ç¤ºä¾‹ï¼Œå°† AI è¾“å‡ºâ€è½¬æ¢ä¸ºè‡ªå®šä¹‰ Jaâ€Œva ç±»ï¼š\n1234567record ActorsFilms(String actor, List&lt;String&gt; movies) &#123;&#125;ActorsFilms actorsFilms = ChatClient.create(chatModel).prompt()        .user(&quot;Generate 5 movies for Tom Hanks.&quot;)        .call()        .entity(ActorsFilms.class);\n\nè¿˜å¯ä»¥ç”¨ ParameterizedTypeReference æ„é€ å‡½æ•°æ¥æŒ‡å®šæ›´å¤æ‚çš„ç›®æ ‡ç±»ç»“æ„ï¼Œæ¯”å¦‚è‡ªå®šä¹‰å¯¹è±¡åˆ—è¡¨ï¼š\n1234List&lt;ActorsFilms&gt; actorsFilms = ChatClient.create(chatModel).prompt()        .user(&quot;Generate the filmography of 5 movies for Tom Hanks and Bill Murray.&quot;)        .call()        .entity(new ParameterizedTypeReference&lt;List&lt;ActorsFilms&gt;&gt;() &#123;&#125;);\n\n2ï¼‰Mapâ OutputConâ€Œverter ç¤ºä¾‹ï¼Œå°†æ¨¡å‹è¾“å‡ºè½¬æ¢ä¸ºâ€åŒ…å«æ•°å­—åˆ—è¡¨çš„ Mâ€Œapï¼š\n12345Map&lt;String, Object&gt; result = ChatClient.create(chatModel).prompt()        .user(u -&gt; u.text(&quot;Provide me a List of &#123;subject&#125;&quot;)                    .param(&quot;subject&quot;, &quot;an array of numbers from 1 to 9 under they key name &#x27;numbers&#x27;&quot;))        .call()        .entity(new ParameterizedTypeReference&lt;Map&lt;String, Object&gt;&gt;() &#123;&#125;);\n\n3ï¼‰Lisâ tOutputCoâ€Œnverter ç¤ºä¾‹ï¼Œå°†æ¨¡å‹è¾“å‡ºè½¬æ¢â€ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼š\n12345List&lt;String&gt; flavors = ChatClient.create(chatModel).prompt()                .user(u -&gt; u.text(&quot;List five &#123;subject&#125;&quot;)                            .param(&quot;subject&quot;, &quot;ice cream flavors&quot;))                .call()                .entity(new ListOutputConverter(new DefaultConversionService()));\n\næ”¯æŒçš„ AI æ¨¡å‹æ ¹æ® å®˜æ–¹æ–‡æ¡£ï¼Œä»¥ä¸‹ AI æ¨¡å‹å·²ç»è¿‡æµ‹è¯•ï¼Œæ”¯æŒ Listã€Map å’Œ Bean ç»“æ„åŒ–è¾“å‡ºï¼š\n\n\n\nAI æ¨¡å‹\nç¤ºä¾‹æµ‹è¯•ä»£ç \n\n\n\nOpenAI\nOpenAiChatModelIT\n\n\nAnthropic Claude 3\nAnthropicChatModelIT.java\n\n\nAzure OpenAI\nAzureOpenAiChatModelIT.java\n\n\nMistral AI\nMistralAiChatModelIT.java\n\n\nOllama\nOllamaChatModelIT.java\n\n\nVertex AI Gemini\nVertexAiGeminiChatModelIT.java\n\n\nå€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸€äº› AI æ¨¡å‹æä¾›äº†ä¸“é—¨çš„ å†…ç½® JSON æ¨¡å¼ï¼Œç”¨äºç”Ÿæˆç»“æ„åŒ–çš„ JSON è¾“å‡ºï¼Œå¤§å®¶æ— éœ€å…³æ³¨å®ç°ç»†èŠ‚ï¼Œåªéœ€è¦çŸ¥é“ï¼šå†…ç½® JSON æ¨¡å¼å¯ä»¥ç¡®ä¿æ¨¡å‹ç”Ÿæˆçš„å“åº”ä¸¥æ ¼ç¬¦åˆ JSON æ ¼å¼ï¼Œæé«˜ç»“æ„åŒ–è¾“å‡ºçš„å¯é æ€§ã€‚\n\nOpenAIï¼šæä¾›äº† JSON_OBJECT å’Œ JSON_SCHEMA å“åº”æ ¼å¼é€‰é¡¹\nAzure OpenAIï¼šé€šè¿‡è®¾ç½® { &quot;type&quot;: &quot;json_object&quot; } å¯ç”¨ JSON æ¨¡å¼\nOllamaï¼šæä¾› format é€‰é¡¹ï¼Œç›®å‰æ¥å—çš„å”¯ä¸€å€¼æ˜¯ json\nMistral AIï¼šæä¾› responseFormat é€‰é¡¹ï¼Œè®¾ç½®ä¸º { &quot;type&quot;: &quot;json_object&quot; } å¯ç”¨ JSON æ¨¡å¼\n\næ‹çˆ±æŠ¥å‘ŠåŠŸèƒ½å¼€å‘ä¸‹é¢è®©æˆ‘ä»¬â ä½¿ç”¨ç»“æ„åŒ–è¾“å‡ºï¼Œæ¥â€Œä¸ºç”¨æˆ·ç”Ÿæˆæ‹çˆ±æŠ¥å‘Šï¼Œå¹¶è½¬æ¢ä¸ºæ‹çˆ±æŠ¥å‘Šâ€å¯¹è±¡ï¼ŒåŒ…å«æŠ¥å‘Šæ ‡é¢˜â€Œå’Œæ‹çˆ±å»ºè®®åˆ—è¡¨å­—æ®µã€‚\n1ï¼‰éœ€è¦å¼•å…¥ JSON Schema ç”Ÿæˆä¾èµ–ï¼š\n12345&lt;dependency&gt;    &lt;groupId&gt;com.github.victools&lt;/groupId&gt;    &lt;artifactId&gt;jsonschema-generator&lt;/artifactId&gt;    &lt;version&gt;4.38.0&lt;/version&gt;&lt;/dependency&gt;\n\n2ï¼‰åœ¨ Lâ oveApp ä¸­å®šâ€Œä¹‰æ‹çˆ±æŠ¥å‘Šç±»ï¼Œå¯ä»¥ä½¿ç”¨ Java 1â€4 å¼•å…¥çš„ recâ€Œord ç‰¹æ€§å¿«é€Ÿå®šä¹‰ï¼š\n12record LoveReport(String title, List&lt;String&gt; suggestions) &#123;&#125;\n\n3ï¼‰åœ¨ Loveâ App ä¸­ç¼–å†™ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œå¤â€Œç”¨ä¹‹å‰æ„é€ å¥½çš„ ChatClient å¯¹è±¡ï¼Œåªéœ€é¢å¤–è¡¥å……åŸæœ‰â€çš„ç³»ç»Ÿæç¤ºè¯ã€å¹¶ä¸”æ·»åŠ ç»“æ„åŒ–è¾“å‡ºçš„â€Œä»£ç å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š\n123456789101112public LoveReport doChatWithReport(String message, String chatId) &#123;    LoveReport loveReport = chatClient            .prompt()            .system(SYSTEM_PROMPT + &quot;æ¯æ¬¡å¯¹è¯åéƒ½è¦ç”Ÿæˆæ‹çˆ±ç»“æœï¼Œæ ‡é¢˜ä¸º&#123;ç”¨æˆ·å&#125;çš„æ‹çˆ±æŠ¥å‘Šï¼Œå†…å®¹ä¸ºå»ºè®®åˆ—è¡¨&quot;)            .user(message)            .advisors(spec -&gt; spec.param(CHAT_MEMORY_CONVERSATION_ID_KEY, chatId)                    .param(CHAT_MEMORY_RETRIEVE_SIZE_KEY, 10))            .call()            .entity(LoveReport.class);    log.info(&quot;loveReport: &#123;&#125;&quot;, loveReport);    return loveReport;&#125;\n\n4ï¼‰ç¼–å†™å•å…ƒæµ‹è¯•ä»£ç ï¼š\n12345678@Testvoid doChatWithReport() &#123;    String chatId = UUID.randomUUID().toString();        String message = &quot;ä½ å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜é±¼çš®ï¼Œæˆ‘æƒ³è®©å¦ä¸€åŠï¼ˆç¼–ç¨‹å¯¼èˆªï¼‰æ›´çˆ±æˆ‘ï¼Œä½†æˆ‘ä¸çŸ¥é“è¯¥æ€ä¹ˆåš&quot;;    LoveApp.LoveReport loveReport = loveApp.doChatWithReport(message, chatId);    Assertions.assertNotNull(loveReport);&#125;\n\nè¿è¡Œç¨‹åºï¼Œâ é€šè¿‡ Debug â€ŒæŸ¥çœ‹æ•ˆæœã€‚å‘ç° Advisor ä¸Šä¸‹â€æ–‡ä¸­åŒ…å«äº†æ ¼å¼æŒ‡ä»¤â€Œï¼š\n\n\n3ã€å¯¹è¯è®°å¿†æŒä¹…åŒ–åŸºæœ¬æ¦‚å¿µä¹‹å‰æˆ‘ä»¬ä½¿ç”¨äº†åŸºäºå†…å­˜çš„å¯¹è¯è®°å¿†æ¥ä¿å­˜å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸€æ—¦é‡å¯äº†ï¼Œå¯¹è¯è®°å¿†å°±ä¼šä¸¢å¤±ã€‚æœ‰æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›å°†å¯¹è¯è®°å¿†æŒä¹…åŒ–ï¼Œä¿å­˜åˆ°æ–‡ä»¶ã€æ•°æ®åº“ã€Redis æˆ–è€…å…¶ä»–å¯¹è±¡å­˜å‚¨ä¸­ï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿ\nSpring AI æä¾›äº† 2 ç§æ–¹å¼ã€‚\nåˆ©ç”¨ç°æœ‰ä¾èµ–å®ç°å‰é¢æåˆ°ï¼Œå®˜æ–¹æä¾› äº†ä¸€äº›ç¬¬ä¸‰æ–¹æ•°æ®åº“çš„æ•´åˆæ”¯æŒï¼Œå¯ä»¥å°†å¯¹è¯ä¿å­˜åˆ°ä¸åŒçš„æ•°æ®æºä¸­ã€‚æ¯”å¦‚ï¼š\n\nInMemoryChatMemoryï¼šå†…å­˜å­˜å‚¨\nCassandraChatMemoryï¼šåœ¨ Cassandra ä¸­å¸¦æœ‰è¿‡æœŸæ—¶é—´çš„æŒä¹…åŒ–å­˜å‚¨\nNeo4jChatMemoryï¼šåœ¨ Neo4j ä¸­æ²¡æœ‰è¿‡æœŸæ—¶é—´é™åˆ¶çš„æŒä¹…åŒ–å­˜å‚¨\nJdbcChatMemoryï¼šåœ¨ JDBC ä¸­æ²¡æœ‰è¿‡æœŸæ—¶é—´é™åˆ¶çš„æŒä¹…åŒ–å­˜å‚¨\n\nå¦‚æœæˆ‘ä»¬è¦å°†å¯¹è¯æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ï¼Œå°±å¯ä»¥ä½¿ç”¨ JdbcChatMemoryã€‚ä½†æ˜¯ spring-ai-starter-model-chat-memory-jdbc ä¾èµ–ç›®å‰ç‰ˆæœ¬å¾ˆå°‘ï¼Œè€Œä¸”ç¼ºä¹ç›¸å…³ä»‹ç»ï¼ŒMaven å®˜æ–¹ä»“åº“ä¹Ÿæœä¸åˆ°ä¾èµ–ï¼Œæ‰€ä»¥ä¸æ¨èä½¿ç”¨ã€‚\nSpring ä»“åº“ å€’æ˜¯èƒ½æœåˆ°ï¼Œä½†ç”¨çš„äººå¤ªå°‘äº†\nå› æ­¤æˆ‘ä¼šæ›´å»ºè®®å¤§å®¶è‡ªå®šä¹‰å®ç° ChatMemoryã€‚\nè‡ªå®šä¹‰å®ç°Spring AI çš„å¯¹è¯è®°å¿†å®ç°éå¸¸å·§å¦™ï¼Œè§£è€¦äº† â€œå­˜å‚¨â€ å’Œ â€œè®°å¿†ç®—æ³•â€ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å•ç‹¬ä¿®æ”¹ ChatMemory å­˜å‚¨æ¥æ”¹å˜å¯¹è¯è®°å¿†çš„ä¿å­˜ä½ç½®ï¼Œè€Œæ— éœ€ä¿®æ”¹ä¿å­˜å¯¹è¯è®°å¿†çš„æµç¨‹ã€‚\nè™½ç„¶å®˜æ–¹æ–‡æ¡£æ²¡æœ‰ç»™æˆ‘ä»¬æä¾›è‡ªå®šä¹‰ ChatMemory å®ç°çš„ç¤ºä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥å»é˜…è¯»é»˜è®¤å®ç°ç±» InMemoryChatMemory çš„æºç ï¼Œæœ‰æ ·å­¦æ ·å‘€ï¼\nChatMemory æ¥å£çš„æ–¹æ³•å¹¶ä¸å¤šï¼Œéœ€è¦å®ç°å¯¹è¯æ¶ˆæ¯çš„å¢ã€æŸ¥ã€åˆ ï¼š\n\nè‡ªå®šä¹‰æ–‡ä»¶æŒä¹…åŒ– ChatMemoryç”±äºæ•°æ®åº“æŒä¹…åŒ–è¿˜éœ€è¦å¼•å…¥é¢å¤–çš„ä¾èµ–ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œè¿™ä¹Ÿä¸æ˜¯æœ¬é¡¹ç›®å­¦ä¹ çš„é‡ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬å°±å®ç°ä¸€ä¸ªåŸºäºæ–‡ä»¶è¯»å†™çš„ ChatMemoryã€‚\nè™½ç„¶éœ€è¦å®ç°çš„æ¥å£ä¸å¤šï¼Œä½†æ˜¯å®ç°èµ·æ¥è¿˜æ˜¯æœ‰ä¸€å®šå¤æ‚åº¦çš„ï¼Œä¸€ä¸ªæœ€ä¸»è¦çš„é—®é¢˜æ˜¯ æ¶ˆæ¯å’Œæ–‡æœ¬çš„è½¬æ¢ã€‚æˆ‘ä»¬åœ¨ä¿å­˜æ¶ˆæ¯æ—¶ï¼Œè¦å°†æ¶ˆæ¯ä» Message å¯¹è±¡è½¬ä¸ºæ–‡ä»¶å†…çš„æ–‡æœ¬ï¼›è¯»å–æ¶ˆæ¯æ—¶ï¼Œè¦å°†æ–‡ä»¶å†…çš„æ–‡æœ¬è½¬æ¢ä¸º Message å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚\næˆ‘ä»¬æœ¬èƒ½åœ°ä¼šæƒ³åˆ°é€šè¿‡ JSON è¿›è¡Œåºåˆ—åŒ–ï¼Œä½†å®é™…æ“ä½œä¸­ï¼Œæˆ‘ä»¬å‘ç°è¿™å¹¶ä¸å®¹æ˜“ã€‚åŸå› æ˜¯ï¼š\n\nè¦æŒä¹…åŒ–çš„ Message æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæœ‰å¾ˆå¤šç§ä¸åŒçš„å­ç±»å®ç°ï¼ˆæ¯”å¦‚ UserMessageã€SystemMessage ç­‰ï¼‰\næ¯ç§å­ç±»æ‰€æ‹¥æœ‰çš„å­—æ®µéƒ½ä¸ä¸€æ ·ï¼Œç»“æ„ä¸ç»Ÿä¸€\nå­ç±»æ²¡æœ‰æ— å‚æ„é€ å‡½æ•°ï¼Œè€Œä¸”æ²¡æœ‰å®ç° Serializable åºåˆ—åŒ–æ¥å£\n\nSpring AI Message çš„ç±»å›¾ï¼š\n\nå› æ­¤ï¼Œå¦‚æœä½¿ç”¨ JSON æ¥åºåˆ—åŒ–ä¼šå­˜åœ¨å¾ˆå¤šæŠ¥é”™ã€‚æ‰€ä»¥æ­¤å¤„æˆ‘ä»¬é€‰æ‹©é«˜æ€§èƒ½çš„ Kryo åºåˆ—åŒ–åº“ã€‚\n1ï¼‰å¼•å…¥ä¾èµ–ï¼š\n12345&lt;dependency&gt;    &lt;groupId&gt;com.esotericsoftware&lt;/groupId&gt;    &lt;artifactId&gt;kryo&lt;/artifactId&gt;    &lt;version&gt;5.6.2&lt;/version&gt;&lt;/dependency&gt;\n\n2ï¼‰åœ¨æ ¹åŒ…ä¸‹æ–°å»º chatmemory åŒ…ï¼Œç¼–å†™åŸºäºæ–‡ä»¶æŒä¹…åŒ–çš„å¯¹è¯è®°å¿† FileBasedChatMemoryï¼Œä»£ç å¦‚ä¸‹ï¼š\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869puâ blic class FileBasedChatMemory implements ChatMemory &#123;    privâ ate final String BASE_DIR;    private static final Kryo kryo = new Kryo();    static &#123;        kryo.setRegistrationRequired(faylse);                kryo.setInstantiatorStrategy(new StdInstantiatorStrategy());    &#125;        public FileBasedChatMemory(String dir) &#123;        this.BASE_DIR = dir;     â    File baseDir = new File(dir);        if (!baseDir.exists()) &#123;            baseDir.mkdirs();        &#125;    &#125;    @Override    public void add(String conversationId, List&lt;Message&gt; messages) &#123;        List&lt;Message&gt; conversationMessages = getOrCreateConversation(conversationId);        conversationMessages.addAll(messages);      â   saveConversation(conversationId, conversationMessages);    &#125;    @Override    public List&lt;Message&gt; get(String conversationId, int lastN) &#123;        List&lt;Message&gt; allMessages = getOrCreateConversation(conversationId);        return allMessages.stream()                .skip(Math.max(0, allMessages.size() - lastN))     â           .toList();    &#125;    @Overriâ de    public void clear(String conversationId) &#123;        File file = getConversationFile(conversationId);        if (file.exists()) &#123;            file.delete();        &#125;    &#125;    private List&lt;Message&gt; getOrCreateConversation(String conversationId) &#123;     â    File file = getConversationFile(conversationId);        List&lt;Message&gt; messages = new ArrayList&lt;&gt;();        if (file.exists()) &#123;       â      try (Input input = new Input(new FileInputStream(file))) &#123;                messages = kryo.readObject(input, ArrayList.class);     â        &#125;catch (IOException e) &#123;                e.printStackTrace();     â        &#125;        &#125;        return messages;    &#125;    private void saveConversation(String conversationId, List&lt;Message&gt; messages) &#123;        Fileâ  file = getConversationFile(conversationId);        try (Output output = new Output(new FileOutputStream(file))) &#123;            kryo.writeObject(output, messages);     â    &#125; catch (IOException e) &#123;            e.printStackTrace();        &#125;    &#125;    private Fâ ile getConversationFile(String conversationId) &#123;        return new File(BASE_DIR, conversationId +&quot;.kryo&quot;);    &#125;&#125;\n\nè™½ç„¶ä¸Šè¿°ä»£ç çœ‹èµ·æ¥å¤æ‚ï¼Œä½†å¤§å¤šæ•°ä»£ç éƒ½æ˜¯æ–‡ä»¶å’Œ Message å¯¹è±¡çš„è½¬æ¢ï¼Œå®Œå…¨å¯ä»¥åˆ©ç”¨ AI ç”Ÿæˆè¿™æ®µä»£ç ã€‚\n3ï¼‰ä¿®æ”¹ LoveApp çš„æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åŸºäºæ–‡ä»¶çš„å¯¹è¯è®°å¿†ï¼š\n1234567891011publicâ  LoveApp(ChatModel dashscopeChatModel) &#123;        String fileDir = System.getProperty(&quot;user.dir&quot;) + &quot;/chat-memory&quot;;    Châ atMemory chatMemory = new FileBasedChatMemoy(fileDir);    chatClient = ChatClient.builder(dashscopeChatModel)            .defaâ ultSystem(SYSTEM_PROMPT)           .defaultAdvisors(                    new MessageChatMemoryAdvisor(chatMemory)            )           .build();&#125;\n\n4ï¼‰æµ‹è¯•è¿è¡Œï¼Œæ–‡ä»¶æŒä¹…åŒ–æˆåŠŸï¼š\n\n4ã€PromptTemplate æ¨¡æ¿ä»€ä¹ˆæ˜¯ PromptTemplateï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼ŸPromptTemplate æ˜¯ Spring AI æ¡†æ¶ä¸­ç”¨äºæ„å»ºå’Œç®¡ç†æç¤ºè¯çš„æ ¸å¿ƒç»„ä»¶ã€‚å…è®¸å¼€å‘è€…åˆ›å»ºå¸¦æœ‰å ä½ç¬¦çš„æ–‡æœ¬æ¨¡æ¿ï¼Œç„¶ååœ¨è¿è¡Œæ—¶åŠ¨æ€æ›¿æ¢è¿™äº›å ä½ç¬¦ã€‚\nå®ƒç›¸å½“äº AI äº¤äº’ä¸­çš„ â€œè§†å›¾å±‚â€ï¼Œç±»ä¼¼äº Spring MVC ä¸­çš„è§†å›¾æ¨¡æ¿ï¼ˆæˆ–è€… JSPï¼‰ã€‚é€šè¿‡ä½¿ç”¨ PromptTemplateï¼Œä½ å¯ä»¥æ›´åŠ ç»“æ„åŒ–ã€å¯ç»´æŠ¤åœ°ç®¡ç† AI åº”ç”¨ä¸­çš„æç¤ºè¯ï¼Œä½¿å…¶æ›´æ˜“äºä¼˜åŒ–å’Œæ‰©å±•ï¼ŒåŒæ—¶é™ä½ç¡¬ç¼–ç å¸¦æ¥çš„ç»´æŠ¤æˆæœ¬ã€‚\nPromptTemplate æœ€åŸºæœ¬çš„åŠŸèƒ½æ˜¯æ”¯æŒå˜é‡æ›¿æ¢ã€‚ä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­å®šä¹‰å ä½ç¬¦ï¼Œç„¶ååœ¨è¿è¡Œæ—¶æä¾›è¿™äº›å˜é‡çš„å€¼ï¼š\n12345678910111213String template = &quot;ä½ å¥½ï¼Œ&#123;name&#125;ã€‚ä»Šå¤©æ˜¯&#123;day&#125;ï¼Œå¤©æ°”&#123;weather&#125;ã€‚&quot;;PromptTemplate promptTemplate = new PromptTemplate(template);Map&lt;String, Object&gt; variables = new HashMap&lt;&gt;();variables.put(&quot;name&quot;, &quot;Azer&quot;);variables.put(&quot;day&quot;, &quot;æ˜ŸæœŸä¸€&quot;);variables.put(&quot;weather&quot;, &quot;æ™´æœ—&quot;);String prompt = promptTemplate.render(variables);\n\nğŸ’¡ æ¨¡æ¿çš„æ€è·¯åœ¨ç¼–ç¨‹æŠ€æœ¯ä¸­ç»å¸¸ç”¨åˆ°ï¼Œæ¯”å¦‚æ•°æ®åº“çš„é¢„ç¼–è¯‘è¯­å¥ã€è®°å½•æ—¥å¿—æ—¶çš„å˜é‡å ä½ç¬¦ã€æ¨¡æ¿å¼•æ“ç­‰ã€‚\nPromptTemplate åœ¨ä»¥ä¸‹åœºæ™¯ç‰¹åˆ«æœ‰ç”¨ï¼š\n\nåŠ¨æ€ä¸ªæ€§åŒ–äº¤äº’ï¼šæ ¹æ®ç”¨æˆ·ä¿¡æ¯ã€ä¸Šä¸‹æ–‡æˆ–ä¸šåŠ¡è§„åˆ™å®šåˆ¶æç¤ºè¯\nå¤šè¯­è¨€æ”¯æŒï¼šä½¿ç”¨ç›¸åŒçš„å˜é‡ä½†ä¸åŒçš„æ¨¡æ¿æ–‡ä»¶æ”¯æŒå¤šç§è¯­è¨€\nA&#x2F;B æµ‹è¯•ï¼šè½»æ¾åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„æç¤ºè¯è¿›è¡Œæ•ˆæœå¯¹æ¯”\næç¤ºè¯ç‰ˆæœ¬ç®¡ç†ï¼šå°†æç¤ºè¯å¤–éƒ¨åŒ–ï¼Œä¾¿äºç‰ˆæœ¬æ§åˆ¶å’Œè¿­ä»£ä¼˜åŒ–\n\nå®ç°åŸç†PromptTemplate åº•å±‚ä½¿ç”¨äº† OSS StringTemplate å¼•æ“ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¨¡æ¿å¼•æ“ï¼Œä¸“æ³¨äºæ–‡æœ¬ç”Ÿæˆã€‚åœ¨ Spring AI ä¸­ï¼ŒPromptTemplate ç±»å®ç°äº†ä»¥ä¸‹æ¥å£ï¼š\n123public claâ ss PromptTemplate implements PromptTemplateActions, PromptTemplateMessageActions &#123;    &#125;\n\nè¿™äº›æ¥å£æä¾›äº†ä¸åŒç±»å‹çš„æ¨¡æ¿æ“ä½œåŠŸèƒ½ï¼Œä½¿å…¶æ—¢èƒ½ç”Ÿæˆæ™®é€šæ–‡æœ¬ï¼Œä¹Ÿèƒ½ç”Ÿæˆç»“æ„åŒ–çš„æ¶ˆæ¯ã€‚\nç±»å›¾å¦‚ä¸‹ï¼š\n\nä¸“ç”¨æ¨¡æ¿ç±»Spring AI æä¾›äº†å‡ ç§ä¸“ç”¨çš„æ¨¡æ¿ç±»ï¼Œå¯¹åº”ä¸åŒè§’è‰²çš„æ¶ˆæ¯ï¼š\n\nSystemPromptTemplateï¼šç”¨äºç³»ç»Ÿæ¶ˆæ¯ï¼Œè®¾ç½® AI çš„è¡Œä¸ºå’ŒèƒŒæ™¯\n\nAssistantPromptTemplateï¼šç”¨äºåŠ©æ‰‹æ¶ˆæ¯ï¼Œç”¨äºè®¾ç½® AI å›å¤çš„ç»“æ„\n\nFunctionPromptTemplateï¼šç›®å‰æ²¡ç”¨\n\n\n\nè¿™äº›ä¸“ç”¨æ¨¡æ¿ç±»è®©å¼€å‘è€…èƒ½æ›´æ¸…æ™°åœ°è¡¨è¾¾ä¸åŒç±»å‹æ¶ˆæ¯çš„æ„å›¾ï¼Œæ¯”å¦‚ç³»ç»Ÿæ¶ˆæ¯æ¨¡æ¿èƒ½å¤Ÿå¿«é€Ÿæ„é€ ç³»ç»Ÿ Promptï¼Œç¤ºä¾‹ä»£ç ï¼š\n12345678910111213141516171819String userText = &quot;â &quot;&quot;    Tell me about three famous pirates from the Golden Age of Piracy and why they did.    Write at least a sentence for each pirate.    &quot;&quot;&quot;;â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€‰â€‚â€‰â€‰Messaâ ge userMessage = new UserMessage(userText);String systemText = &quot;â &quot;&quot;  You are a helpful AI assistant thathelps people find information.  Your name is &#123;name&#125;  You should reply to the user&#x27;s request with your name and also in the style of a &#123;voice&#125;.  &quot;&quot;&quot;;SystemPrâ omptTemplate systemPromptTemplate = new SystemPromptTemplate(systemText);Message systemMessage = systemPromptTemplate.createMessage(Map.of(&quot;name&quot;, name, &quot;voice&quot;, voice));Prompt prompt = new Prompt(List.of(userMessage, systemMessage));List&lt;Generation&gt; response = chatModel.call(prompt).getResults();\n\nä»æ–‡ä»¶åŠ è½½æ¨¡æ¿PromptTemplate æ”¯æŒä»å¤–éƒ¨æ–‡ä»¶åŠ è½½æ¨¡æ¿å†…å®¹ï¼Œå¾ˆé€‚åˆç®¡ç†å¤æ‚çš„æç¤ºè¯ã€‚Spring AI åˆ©ç”¨ Spring çš„ Resource å¯¹è±¡æ¥ä»æŒ‡å®šè·¯å¾„åŠ è½½æ¨¡æ¿æ–‡ä»¶ï¼š\n1234@Value(&quot;classpath:/prompts/system-message.st&quot;)privaâ te Resource systemResource;SystemPromptTemplate systemPromptTemplate = new SystemPromptTemplate(systemResource);\n\nè¿™ç§æ–¹å¼è®©ä½ å¯ä»¥ï¼š\n\nå°†å¤æ‚çš„æç¤ºè¯æ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ç®¡ç†\nåœ¨ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹è°ƒæ•´æç¤ºè¯\nä¸ºä¸åŒåœºæ™¯å‡†å¤‡å¤šå¥—æç¤ºè¯æ¨¡æ¿\n\næ˜¯ä¸æ˜¯æœ‰ç‚¹åƒå†™é…ç½®æ–‡ä»¶ï¼Ÿæœ‰ç‚¹å„¿å‰åç«¯åˆ†ç¦»çš„æ„Ÿè§‰äº†ï¼Ÿæˆ‘ä¹Ÿä¼šæ›´æ¨èå¤§å®¶ä½¿ç”¨è¿™ç§æ–¹å¼æ¥ç®¡ç† Prompt æ¨¡æ¿ã€‚\n5ã€å¤šæ¨¡æ€AI å¤šæ¨¡æ€æ˜¯æŒ‡èƒ½å¤ŸåŒæ—¶å¤„ç†ã€ç†è§£å’Œç”Ÿæˆå¤šç§ä¸åŒç±»å‹æ•°æ®çš„èƒ½åŠ›ï¼Œæ¯”å¦‚æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ã€PDFã€ç»“æ„åŒ–æ•°æ®ï¼ˆæ¯”å¦‚è¡¨æ ¼ï¼‰ç­‰ã€‚\nè¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µå« â€œåŸç”Ÿå¤šæ¨¡æ€å¤§æ¨¡å‹â€ï¼Œæ˜¯æŒ‡åœ¨æ¶æ„è®¾è®¡å’Œé¢„è®­ç»ƒé˜¶æ®µå°±ç›´æ¥æ•´åˆå¤šç§æ•°æ®ç±»å‹çš„ AI æ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨å•ä¸€æ¨¡å‹åŒæ—¶å¤„ç†å¤šç§æ¨¡æ€æ•°æ®ï¼Œè€Œéå°†å¤šä¸ªå•æ¨¡æ€æ¨¡å‹ç®€å•ç»„åˆåœ¨ä¸€èµ·ã€‚æ¯”å¦‚ OpenAI GPT-4oã€Google Vertex AI Gemini 1.5ã€Anthropic Claude3 ç­‰ã€‚\nåŸç”Ÿå¤šæ¨¡æ€å¤§æ¨¡å‹å¯ä»¥åœ¨æ•´ä¸ªæ¨¡å‹ä¸­å…±äº«ç‰¹å¾å’Œå­¦ä¹ ç­–ç•¥ï¼Œæœ‰åŠ©äºæ•è·è·¨æ¨¡æ€ç‰¹å¾é—´çš„å¤æ‚å…³ç³»ã€‚æ‰€ä»¥å®ƒä»¬é€šå¸¸åœ¨æ‰§è¡Œè·¨æ¨¡æ€ä»»åŠ¡æ—¶è¡¨ç°æ›´å¥½ï¼Œæ¯”å¦‚å›¾æ–‡åŒ¹é…ã€è§†è§‰é—®ç­”æˆ–å¤šæ¨¡æ€ç¿»è¯‘ã€‚\nä¸‹é¢åˆ†äº« 2 ç§å¤šæ¨¡æ€å¼€å‘çš„æ–¹æ³•ã€‚\nï¼ˆ1ï¼‰Spring AI å¤šæ¨¡æ€å¼€å‘Spring AI æä¾›äº† å¤šæ¨¡æ€å¼€å‘ çš„æ”¯æŒï¼Œä½†æ˜¯è¦æ³¨æ„å¾ˆå¤šæ¨¡å‹æ˜¯ä¸æ”¯æŒå¤šæ¨¡æ€çš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘å‰ä¸€å®šè¦æŸ¥çœ‹ æ”¯æŒå¤šæ¨¡æ€çš„æ¨¡å‹æ–‡æ¡£ã€‚\nç›®å‰å¤šæ¨¡æ€èƒ½åŠ›è¾ƒå¼ºçš„æ¨¡å‹æœ‰ Google VertexAI Gemini å’Œ OpenAIï¼š\nï¼ˆ2ï¼‰å¹³å° SDK å¤šæ¨¡æ€å¼€å‘è¿™ç§æ–¹å¼æ›´é€‚åˆä¸­å›½å®å®çš„ä½“è´¨ï¼Œç›´æ¥å‚è€ƒå¤§æ¨¡å‹å¹³å°çš„å®˜æ–¹æ–‡æ¡£ï¼Œä½¿ç”¨å¹³å°æä¾›çš„ SDK æˆ– API è°ƒç”¨å¤šæ¨¡æ€å¤§æ¨¡å‹ã€‚æ¯”å¦‚ é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°çš„å¤šæ¨¡æ€æ”¯æŒï¼š\n","slug":"Advisor","date":"2025-11-05T13:24:48.000Z","categories_index":"SpringBoot,Spring AI","tags_index":"Spring AI,å¤§æ¨¡å‹,AI","author_index":"Azer"},{"id":"5c0d008f6ea2400e1b86324b9faa98ca","title":"Prompt å·¥ç¨‹","content":"1ã€Prompt å·¥ç¨‹â€‹\t\tå¾ˆå¤šäººå…¶å®æ ¹æœ¬ä¸äº†è§£Prompt ,è¿™é‡Œæˆ‘è‡ªå·±çš„æœ€ç®€å•çš„ç†è§£æ˜¯ï¼šæˆ‘è‡ªå·±ä½¿ç”¨aiçš„æ—¶å€™ï¼Œæˆ‘ä¼šå…ˆç»™ä»–ä¸€ä¸ªè§’è‰²ï¼Œæ¯”å¦‚ä½ ç°åœ¨åªèƒ½ç”¨SpringBootæ¡†æ¶è¯­è¨€å¸®æˆ‘å†™ï¼Œæˆ–è€…æ˜¯ä½ æ˜¯ä¸€ä¸ªå¤§æ–‡è±ªè¯—äººï¼Œè¿™å°±æ˜¯æœ€ç®€å•çš„Promptï¼Œæ ¹æ®ä½ çš„éœ€æ±‚ï¼Œå¯ä»¥æ›´åŠ ç»†åŒ–å®ƒè‡ªèº«çš„è®¾å®šæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚\n1ã€åŸºæœ¬æ¦‚å¿µPrompt â å·¥ç¨‹ï¼ˆPrompt Engâ€Œineeringï¼‰åˆå«æç¤ºè¯å·¥ç¨‹ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯è¾“å…¥â€ç»™ AI çš„æŒ‡ä»¤ã€‚æ¯”å¦‚ä¸‹é¢â€Œè¿™æ®µå†…å®¹ï¼Œå°±æ˜¯æç¤ºè¯ï¼š\n1è¯·é—®Azerçš„Blogæ€ä¹ˆæ ·ï¼Ÿ\n\né‚£ä¸ºä»€ä¹ˆè¦å« â€œå·¥ç¨‹â€ å‘¢ï¼Ÿ\nå› ä¸º AI å¤§æ¨¡å‹ç”Ÿæˆâ çš„å†…å®¹æ˜¯ä¸ç¡®å®šçš„ï¼Œæ„å»ºä¸€ä¸ªèƒ½å¤ŸæŒ‰ç…§é¢„æœŸç”Ÿæˆâ€Œå†…å®¹çš„æç¤ºè¯æ—¢æ˜¯ä¸€é—¨è‰ºæœ¯ï¼Œä¹Ÿæ˜¯ä¸€é—¨ç§‘å­¦ã€‚æç¤ºè¯çš„è´¨é‡ç›´æ¥å½±å“åˆ° AI å¤§æ¨¡å‹è¾“å‡ºçš„ç»“â€æœï¼Œå› æ­¤è¿™ä¹Ÿæ˜¯ AI åº”ç”¨å¼€å‘çš„å…³é”®æŠ€èƒ½ï¼Œâ€Œå¾ˆå¤šå…¬å¸ä¸“é—¨æ‹›è˜æç¤ºè¯å·¥ç¨‹å¸ˆã€‚\næˆ‘ä»¬å­¦ä¹  â Prompt å·¥ç¨‹â€Œçš„ç›®æ ‡æ˜¯ï¼šé€šè¿‡ç²¾å¿ƒè®¾è®¡å’Œä¼˜åŒ–è¾“å…¥æç¤ºâ€æ¥å¼•å¯¼ AI æ¨¡å‹â€Œç”Ÿæˆç¬¦åˆé¢„æœŸçš„é«˜è´¨é‡è¾“å‡ºã€‚\næç¤ºè¯åˆ†ç±»æ ¸å¿ƒ - åŸºäºè§’è‰²çš„åˆ†ç±»åœ¨ AI â å¯¹è¯ä¸­ï¼ŒåŸºäºè§’è‰²çš„â€Œåˆ†ç±»æ˜¯æœ€å¸¸è§çš„ï¼Œé€šå¸¸å­˜åœ¨ 3 ç§ä¸»è¦â€ç±»å‹çš„ Prompâ€Œtï¼š\n**1ï¼‰ç”¨æˆ· Prompâ t (User Prompt)ï¼š**è¿™æ˜¯ç”¨æˆ·â€Œå‘ AI æä¾›çš„å®é™…é—®é¢˜ã€æŒ‡ä»¤æˆ–ä¿¡æ¯ï¼Œä¼ è¾¾äº†ç”¨æˆ·çš„ç›´æ¥éœ€æ±‚ã€‚ç”¨æˆ· Prompt â€å‘Šè¯‰ AI æ¨¡å‹ â€œåšä»€ä¹ˆâ€ï¼Œæ¯”å¦‚å›ç­”é—®â€Œé¢˜ã€ç¼–å†™ä»£ç ã€ç”Ÿæˆåˆ›æ„å†…å®¹ç­‰ã€‚\n1ç”¨æˆ·ï¼šå¸®æˆ‘å†™ä¸€é¦–å…³äºæ˜¥å¤©çš„çŸ­è¯—\n\n**2ï¼‰ç³»ç»Ÿ Promptâ  (System Prompt)ï¼š**è¿™æ˜¯è®¾ç½®â€Œ AI æ¨¡å‹è¡Œä¸ºè§„åˆ™å’Œè§’è‰²å®šä½çš„éšè—æŒ‡ä»¤ï¼Œç”¨æˆ·é€šå¸¸ä¸èƒ½ç›´æ¥çœ‹åˆ°ã€‚ç³»ç»Ÿ Prompt â€ç›¸å½“äºç»™ AI è®¾å®šäººæ ¼å’Œèƒ½åŠ›è¾¹ç•Œï¼Œå³å‘Šè¯‰â€Œ AI â€œä½ æ˜¯è°ï¼Ÿä½ èƒ½åšä»€ä¹ˆï¼Ÿâ€ã€‚\n1ç³»ç»Ÿï¼šä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„æ‹çˆ±é¡¾é—®ï¼Œæ“…é•¿åˆ†ææƒ…æ„Ÿé—®é¢˜å¹¶æä¾›å»ºè®¾æ€§å»ºè®®ã€‚è¯·ä»¥æ¸©æš–å‹å–„çš„è¯­æ°”å›ç­”ç”¨æˆ·çš„æ‹çˆ±å›°æƒ‘ï¼Œå¿…è¦æ—¶ä¸»åŠ¨è¯¢é—®æ›´å¤šä¿¡æ¯ä»¥ä¾¿æä¾›æ›´å‡†ç¡®çš„å»ºè®®ã€‚ä¸è¦åšå‡ºé“å¾·åˆ¤æ–­ï¼Œè€Œæ˜¯å°Šé‡ç”¨æˆ·çš„æƒ…æ„Ÿä½“éªŒå¹¶æä¾›å®ç”¨çš„æ²Ÿé€šå’Œç›¸å¤„æŠ€å·§ã€‚å›ç­”æ—¶ä¿æŒä¸“ä¸šæ€§ï¼Œä½†é¿å…ä½¿ç”¨è¿‡äºå­¦æœ¯çš„æœ¯è¯­ï¼Œç¡®ä¿æ™®é€šç”¨æˆ·èƒ½å¤Ÿç†è§£ä½ çš„å»ºè®®ã€‚\n\nä¸åŒçš„ç³»ç»Ÿ Pâ rompt å¯ä»¥è®©åŒä¸€ä¸ª â€ŒAI æ¨¡å‹è¡¨ç°å‡ºå®Œå…¨ä¸åŒçš„åº”ç”¨ç‰¹æ€§ï¼Œè¿™æ˜¯æ„å»ºå‚ç›´é¢†åŸŸâ€ AI åº”ç”¨ï¼ˆå¦‚è´¢åŠ¡é¡¾é—®ã€â€Œæ•™è‚²è¾…å¯¼ã€åŒ»ç–—å’¨è¯¢ç­‰ï¼‰çš„å…³é”®ã€‚\næ¯”å¦‚ 23 â å¹´ AI åˆšæµè¡Œçš„æ—¶å€™â€Œï¼Œå¾ˆå¤š AI åŠ©æ‰‹å¹³å°ï¼Œéƒ½æ˜¯åŸºäºè®¾ç½®ä¸åŒçš„ç³»â€ç»Ÿ Prompt æ¥æâ€Œä¾›ä¸åŒçš„ AI åŠ©æ‰‹ã€‚\n**3ï¼‰åŠ©æ‰‹ Prompt â (Assistant Prompt)ï¼š**è¿™æ˜¯ AIâ€Œ æ¨¡å‹çš„å“åº”å†…å®¹ã€‚åœ¨å¤šè½®å¯¹è¯ä¸­ï¼Œä¹‹å‰çš„åŠ©æ‰‹å›å¤ä¹Ÿä¼šæˆä¸ºå½“å‰ä¸Šä¸‹æ–‡çš„ä¸€éƒ¨åˆ†ï¼Œå½±å“åç»­å¯¹è¯çš„ç†è§£â€å’Œç”Ÿæˆã€‚æŸäº›åœºæ™¯ä¸‹ï¼Œå¼€å‘è€…å¯ä»¥ä¸»åŠ¨é¢„è®¾ä¸€äº›åŠ©æ‰‹æ¶ˆæ¯ä½œâ€Œä¸ºå¯¹è¯å†å²çš„ä¸€éƒ¨åˆ†ï¼Œå¼•å¯¼åç»­äº’åŠ¨ã€‚\n1åŠ©æ‰‹ï¼šæˆ‘æ˜¯ä½ çš„æ‹çˆ±é¡¾é—®ï¼Œå¾ˆé«˜å…´èƒ½å¸®åŠ©ä½ è§£å†³æƒ…æ„Ÿé—®é¢˜ã€‚ä½ ç›®å‰é‡åˆ°äº†ä»€ä¹ˆæ ·çš„æ‹çˆ±å›°æƒ‘å‘¢ï¼Ÿå¯ä»¥å‘Šè¯‰æˆ‘ä½ ä»¬çš„å…³ç³»ç°çŠ¶å’Œå…·ä½“é‡åˆ°çš„é—®é¢˜å—ï¼Ÿ\n\nåœ¨å®é™…åº”ç”¨â ä¸­ï¼Œè¿™äº›ä¸åŒç±»å‹çš„â€Œæç¤ºè¯å¾€å¾€ä¼šç»„åˆä½¿ç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªâ€å®Œæ•´çš„å¯¹è¯å¯èƒ½åŒ…å«â€Œï¼š\n1234567ç³»ç»Ÿï¼šä½ æ˜¯ä¸“ä¸šç¼–ç¨‹å¯¼å¸ˆï¼Œæ“…é•¿å¼•å¯¼åˆå­¦è€…å…¥é—¨ç¼–ç¨‹å¹¶åˆ¶å®šå­¦ä¹ è·¯å¾„ã€‚ä½¿ç”¨å‹å¥½é¼“åŠ±çš„è¯­æ°”ï¼Œè§£é‡Šå¤æ‚æ¦‚å¿µæ—¶è¦é€šä¿—æ˜“æ‡‚ï¼Œé€‚å½“ä½¿ç”¨æ¯”å–»è®©æ–°æ‰‹ç†è§£ï¼Œé¿å…è¿‡äºæ™¦æ¶©çš„æŠ€æœ¯æœ¯è¯­ã€‚ç”¨æˆ·ï¼šæˆ‘å®Œå…¨æ²¡æœ‰ç¼–ç¨‹åŸºç¡€ï¼Œæƒ³å­¦ä¹ ç¼–ç¨‹å¼€å‘ï¼Œä½†ä¸çŸ¥é“ä»ä½•å¼€å§‹ï¼Œèƒ½ç»™æˆ‘ä¸€äº›å»ºè®®å—ï¼ŸåŠ©æ‰‹ï¼šæ¬¢è¿åŠ å…¥ç¼–ç¨‹çš„ä¸–ç•Œï¼ä½œä¸ºç¼–ç¨‹å°ç™½ï¼Œå»ºè®®ä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¼€å§‹å­¦ä¹ ä¹‹æ—…...ã€å¤šè½®å¯¹è¯ç»§ç»­ã€‘\n\nAI å¤§æ¨¡â å‹å¼€å‘å¹³å°å…è®¸ç”¨æˆ·â€Œè‡ªä¸»è®¾ç½®å„ç§ä¸åŒç±»å‹çš„æç¤ºè¯æ¥è¿›è¡Œè°ƒâ€è¯•ï¼š\n\n2ã€TokenToken æ˜¯â å¤§æ¨¡å‹å¤„ç†æ–‡æœ¬çš„åŸºæœ¬å•ä½ï¼Œå¯â€Œèƒ½æ˜¯å•è¯æˆ–æ ‡ç‚¹ç¬¦å·ï¼Œæ¨¡å‹çš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯æŒ‰ Token â€è®¡ç®—çš„ï¼Œä¸€èˆ¬ Token è¶Šâ€Œå¤šï¼Œæˆæœ¬è¶Šé«˜ï¼Œå¹¶ä¸”è¾“å‡ºé€Ÿåº¦è¶Šæ…¢ã€‚\nå› æ­¤åœ¨ Aâ I åº”ç”¨å¼€å‘ä¸­ï¼Œäº†â€Œè§£å’Œæ§åˆ¶ Token çš„æ¶ˆè€—è‡³å…³é‡è¦â€ã€‚\nå¦‚ä½•è®¡ç®— Tokenï¼Ÿé¦–å…ˆï¼Œä¸åŒâ å¤§æ¨¡å‹å¯¹ Tokeâ€Œn çš„åˆ’åˆ†è§„åˆ™ç•¥æœ‰ä¸åŒï¼Œæ¯”å¦‚æ ¹æ® Oâ€penAI çš„æ–‡æ¡£â€Œï¼š\n\nè‹±æ–‡æ–‡æœ¬ï¼šä¸€ä¸ª token å¤§çº¦ç›¸å½“äº 4 ä¸ªå­—ç¬¦æˆ–çº¦ 0.75 ä¸ªè‹±æ–‡å•è¯\nä¸­æ–‡æ–‡æœ¬ï¼šä¸€ä¸ªæ±‰å­—é€šå¸¸ä¼šè¢«ç¼–ç ä¸º 1-2 ä¸ª token\nç©ºæ ¼å’Œæ ‡ç‚¹ï¼šä¹Ÿä¼šè®¡å…¥ token æ•°é‡\nç‰¹æ®Šç¬¦å·å’Œè¡¨æƒ…ç¬¦å·ï¼šå¯èƒ½éœ€è¦å¤šä¸ª token æ¥è¡¨ç¤º\n\nç®€å•ä¼°ç®—ä¸€ä¸‹â ï¼Œ100 ä¸ªè‹±æ–‡å•è¯çº¦ç­‰â€Œäº 75-150 ä¸ª Tokenï¼Œè€Œ 100 ä¸ªâ€ä¸­æ–‡å­—ç¬¦çº¦ç­‰äº 100-â€Œ200 ä¸ª Tokenã€‚\nå®é™…åº”ç”¨ä¸­â ï¼Œæ›´æ¨èä½¿ç”¨å·¥å…·æ¥â€Œä¼°è®¡ Prompt çš„ Token â€æ•°é‡ï¼Œæ¯”å¦‚ï¼š\n\nOpenAI Tokenizerï¼šé€‚ç”¨äº OpenAI æ¨¡å‹çš„å®˜æ–¹ Token è®¡ç®—å™¨\néå®˜æ–¹çš„ Token è®¡ç®—å™¨\n\nToken æˆæœ¬è®¡ç®—ä¼°ç®—æˆæœ¬æœ‰â ä¸ªå…¬å¼ï¼šæ€»æˆæœ¬ &#x3D;â€Œ (è¾“å…¥ tokenæ•° Ã— è¾“å…¥å•ä»·)â€ + (è¾“å‡º tokâ€Œen æ•° Ã— è¾“å‡ºå•ä»·)\nä¸åŒå¤§æ¨¡å‹â çš„è®¡è´¹éƒ½ä¸å¤ªä¸€æ ·ï¼Œâ€Œå› æ­¤è¦è®¤çœŸé˜…è¯»å®˜æ–¹æ–‡æ¡£çš„è®¡è´¹æ ‡å‡†ï¼Œæ¯”â€å¦‚é˜¿é‡Œç³»å¤§æ¨¡å‹ï¼š\n\nå»ºè®®å¤§å®¶ä¼°â ç®—æˆæœ¬æ—¶ï¼Œå¯ä»¥å¤šå»â€Œå¯¹æ¯”ä¸åŒå¤§æ¨¡å‹çš„ä»·æ ¼ï¼Œå‚è€ƒä¸‹åˆ—è¡¨æ ¼å»â€æ•´ç†ä¸€ä¸ªè¯¦ç»†çš„å¯¹æ¯”â€Œè¡¨æ ¼ï¼Œç»“æœä¸€ç›®äº†ç„¶ï¼š\n\n\n\næ¨¡å‹\nè¾“å…¥ä»·æ ¼ (&#x2F;1K tokens)\nè¾“å‡ºä»·æ ¼ (&#x2F;1K tokens)\n1000 å­—å¯¹è¯é¢„ä¼°æˆæœ¬\n\n\n\nGPT-xx\n$0.0015\n$0.002\nÂ¥0.02-0.03\n\n\nGPT-xxx â \n$0.03\n$0.06â€Œ\nÂ¥0.3-0.5\n\n\nClaude-xxx\n$0.00â€025\n$0.00125 â€Œ\nÂ¥0.01-0.02\n\n\nToken æˆæœ¬ä¼˜åŒ–æŠ€å·§æ³¨æ„ï¼Œç³»ç»Ÿâ æç¤ºè¯ã€ç”¨æˆ·æç¤ºè¯â€Œå’Œ AI å¤§æ¨¡å‹è¾“å‡ºçš„å†…å®¹éƒ½æ˜¯æ¶ˆè€—æˆâ€æœ¬çš„ï¼Œå› æ­¤æˆ‘ä»¬æˆæœ¬â€Œä¼˜åŒ–ä¸»è¦ä»è¿™äº›è§’åº¦è¿›è¡Œã€‚\n1ï¼‰ç²¾ç®€ç³»ç»Ÿâ æç¤ºè¯ï¼šç§»é™¤å†—ä½™è¡¨è¿°ï¼Œä¿â€Œç•™æ ¸å¿ƒæŒ‡ä»¤ã€‚æ¯”å¦‚å°† â€œä½ æ˜¯ä¸€ä¸ªéå¸¸ä¸“ä¸šã€ç»éªŒä¸°å¯Œâ€ä¸”éå¸¸æœ‰è€å¿ƒçš„ç¼–ç¨‹å¯¼å¸ˆâ€â€Œ ç®€åŒ–ä¸º â€œä½ æ˜¯ç¼–ç¨‹å¯¼å¸ˆâ€ã€‚\n2ï¼‰å®šæœŸæ¸…ç†â å¯¹è¯å†å²ï¼šå¯¹è¯ä¸Šä¸‹æ–‡ä¼šéšâ€Œç€äº¤äº’ä¸æ–­ç´¯ç§¯ Tokenã€‚åœ¨é•¿å¯¹è¯ä¸­ï¼Œå¯ä»¥å®šæœŸâ€è¯·æ±‚ AI æ€»ç»“ä¹‹å‰çš„å¯¹â€Œè¯ï¼Œç„¶åä»¥æ€»ç»“æ›¿ä»£è¯¦ç»†å†å²ã€‚\n1è¯·æ€»ç»“æˆ‘ä»¬è‡³ä»Šçš„å¯¹è¯è¦ç‚¹ï¼Œåç»­æˆ‘ä»¬å°†åŸºäºæ­¤æ€»ç»“ç»§ç»­è®¨è®ºã€‚\n\n3ï¼‰ä½¿ç”¨å‘é‡æ£€ç´¢â ä»£æ›¿ç›´æ¥è¾“å…¥ï¼šå¯¹äºéœ€è¦å¤„ç†å¤§é‡å‚â€Œè€ƒæ–‡æ¡£çš„åœºæ™¯ï¼Œä¸è¦ç›´æ¥å°†æ•´ä¸ªæ–‡æ¡£ä½œä¸º Promptï¼Œè€Œæ˜¯ä½¿ç”¨å‘é‡â€æ•°æ®åº“å’Œæ£€ç´¢æŠ€æœ¯ï¼ˆRAGï¼‰è·å–â€Œç›¸å…³æ®µè½ã€‚åç»­æ•™ç¨‹ä¼šå¸¦å¤§å®¶å®æˆ˜ã€‚\n4ï¼‰ç»“æ„åŒ–â æ›¿ä»£è‡ªç„¶è¯­è¨€ï¼šä½¿ç”¨â€Œè¡¨æ ¼ã€åˆ—è¡¨ç­‰ç»“æ„åŒ–æ ¼å¼ä»£æ›¿é•¿æ®µè½æè¿°â€ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œä¼˜åŒ–å‰ï¼š\n1è¯·é—®å¦‚ä½•åˆ¶ä½œæŠ«è¨ï¼Ÿé¦–å…ˆéœ€è¦å‡†å¤‡é¢ç²‰ã€é…µæ¯ã€æ°´ã€ç›ã€æ©„æ¦„æ²¹ä½œä¸ºåŸºç¡€é¢å›¢ææ–™ã€‚ç„¶åæ ¹æ®å£å‘³é€‰æ‹©é…±æ–™ï¼Œå¯ä»¥æ˜¯ç•ªèŒ„é…±æˆ–ç™½é…±ã€‚æ¥ç€å‡†å¤‡å¥¶é…ªï¼Œæœ€å¸¸ç”¨çš„æ˜¯é©¬è‹é‡Œæ‹‰å¥¶é…ªã€‚æœ€åå‡†å¤‡å„ç§é…æ–™å¦‚æ„å¤§åˆ©é¦™è‚ ã€è˜‘è‡ã€é’æ¤’ç­‰ã€‚\n\nä¼˜åŒ–åï¼š\n1234567æŠ«è¨åˆ¶ä½œææ–™ï¼š- é¢å›¢ï¼šé¢ç²‰ã€é…µæ¯ã€æ°´ã€ç›ã€æ©„æ¦„æ²¹- é…±æ–™ï¼šç•ªèŒ„é…±/ç™½é…±- å¥¶é…ªï¼šé©¬è‹é‡Œæ‹‰- é…æ–™ï¼šæ„å¤§åˆ©é¦™è‚ ã€è˜‘è‡ã€é’æ¤’ç­‰å¦‚ä½•åˆ¶ä½œï¼Ÿ\n\n2ã€Prompt ä¼˜åŒ–æŠ€å·§å‰é¢ä¹Ÿæåˆ°äº†ï¼Œâ è®¾è®¡ Prompt æ˜¯ä¸€é—¨â€Œè‰ºæœ¯ï¼Œé«˜è´¨é‡çš„ Prompt å¯ä»¥æ˜¾è‘—æå‡ AI è¾“â€å‡ºçš„è´¨é‡ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é‡ç‚¹â€ŒæŒæ¡ Prompt ä¼˜åŒ–æŠ€å·§ã€‚\nåˆ©ç”¨èµ„æº1ã€Prompt å­¦ä¹ ç½‘ä¸Šå’Œ Proâ mpt ä¼˜åŒ–ç›¸å…³çš„èµ„æºéå¸¸â€Œä¸°å¯Œï¼Œå‡ ä¹å„å¤§ä¸»æµ AI å¤§æ¨¡å‹å’Œ AI å¼€å‘æ¡†æ¶å®˜â€æ–¹æ–‡æ¡£éƒ½æœ‰ç›¸å…³çš„ä»‹ç»ï¼Œæ¨èâ€Œå…ˆé˜…è¯»è‡³å°‘ 2 ç¯‡ï¼Œæ¯”å¦‚ï¼š\n\nPrompt Engineering Guide æç¤ºå·¥ç¨‹æŒ‡å—\nOpenAI æç¤ºè¯å·¥ç¨‹æŒ‡å—\nSpring AI æç¤ºå·¥ç¨‹æŒ‡å—\nAuthropic æç¤ºè¯å·¥ç¨‹æŒ‡å—\nAuthropic æç¤ºè¯å·¥ç¨‹æŒ‡å—ï¼ˆå¼€æºä»“åº“ï¼‰\næ™ºè°± AI Prompt è®¾è®¡æŒ‡å—\n\n2ã€Prompt æç¤ºè¯åº“ç½‘ä¸Šä¹Ÿæœ‰å¾ˆâ å¤šç°æˆçš„æç¤ºè¯åº“ï¼Œâ€Œåœ¨è‡ªä¸»ä¼˜åŒ–æç¤ºè¯å‰ï¼Œå¯ä»¥å…ˆå°è¯•æœç´¢æœ‰â€æ²¡æœ‰ç°æˆçš„æç¤ºè¯å‚â€Œè€ƒï¼š\n\næ–‡æœ¬å¯¹è¯ï¼šAuthropic æç¤ºè¯åº“\nAI ç»˜ç”»ï¼šMidjourney æç¤ºè¯åº“\n\nåŸºç¡€æç¤ºæŠ€å·§1ã€æ˜ç¡®æŒ‡å®šä»»åŠ¡å’Œè§’è‰²ä¸º AI â æä¾›æ¸…æ™°çš„ä»»åŠ¡æè¿°â€Œå’Œè§’è‰²å®šä½ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£èƒŒæ™¯å’ŒæœŸæœ›ã€‚\n12ç³»ç»Ÿï¼šä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„Pythonæ•™å¸ˆï¼Œæ“…é•¿å‘åˆå­¦è€…è§£é‡Šç¼–ç¨‹æ¦‚å¿µã€‚ç”¨æˆ·ï¼šè¯·è§£é‡Š Python ä¸­çš„åˆ—è¡¨æ¨å¯¼å¼ï¼ŒåŒ…æ‹¬åŸºæœ¬è¯­æ³•å’Œ 2-3 ä¸ªå®ç”¨ç¤ºä¾‹ã€‚\n\n2ã€æä¾›è¯¦ç»†è¯´æ˜å’Œå…·ä½“ç¤ºä¾‹æä¾›è¶³å¤Ÿçš„â ä¸Šä¸‹æ–‡ä¿¡æ¯å’ŒæœŸæœ›çš„â€Œè¾“å‡ºæ ¼å¼ç¤ºä¾‹ï¼Œå‡å°‘æ¨¡å‹çš„ä¸ç¡®å®šæ€§ã€‚\n12345678910è¯·æä¾›ä¸€ä¸ªç¤¾äº¤åª’ä½“è¥é”€è®¡åˆ’ï¼Œé’ˆå¯¹ä¸€æ¬¾æ–°ä¸Šå¸‚çš„æ™ºèƒ½æ‰‹è¡¨ã€‚è®¡åˆ’åº”åŒ…å«:1. ç›®æ ‡å—ä¼—æè¿°2. ä¸‰ä¸ªå†…å®¹ä¸»é¢˜3. æ¯ä¸ªå¹³å°çš„å†…å®¹ç±»å‹å»ºè®®4. å‘å¸ƒé¢‘ç‡å»ºè®®ç¤ºä¾‹æ ¼å¼:ç›®æ ‡å—ä¼—: [æè¿°]å†…å®¹ä¸»é¢˜: [ä¸»é¢˜1], [ä¸»é¢˜2], [ä¸»é¢˜3]å¹³å°ç­–ç•¥: [å¹³å°] - [å†…å®¹ç±»å‹] - [é¢‘ç‡]\n\n3ã€ä½¿ç”¨ç»“æ„åŒ–æ ¼å¼å¼•å¯¼æ€ç»´é€šè¿‡åˆ—è¡¨ã€è¡¨æ ¼ç­‰ç»“æ„åŒ–æ ¼å¼ï¼Œä½¿æŒ‡ä»¤æ›´æ˜“ç†è§£ï¼Œè¾“å‡ºæ›´æœ‰æ¡ç†ã€‚\n123456789åˆ†æä»¥ä¸‹å…¬å¸çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿:å…¬å¸: Teslaè¯·ä½¿ç”¨è¡¨æ ¼æ ¼å¼å›ç­”ï¼ŒåŒ…å«ä»¥ä¸‹åˆ—:- ä¼˜åŠ¿(æœ€å°‘3é¡¹)- æ¯é¡¹ä¼˜åŠ¿çš„ç®€è¦åˆ†æ- åŠ£åŠ¿(æœ€å°‘3é¡¹)- æ¯é¡¹åŠ£åŠ¿çš„ç®€è¦åˆ†æ- åº”å¯¹å»ºè®®\n\n4ã€æ˜ç¡®è¾“å‡ºæ ¼å¼è¦æ±‚æŒ‡å®šè¾“å‡ºçš„æ ¼å¼ã€é•¿åº¦ã€é£æ ¼ç­‰è¦æ±‚ï¼Œè·å¾—æ›´ç¬¦åˆé¢„æœŸçš„ç»“æœã€‚\n12345æ’°å†™ä¸€ç¯‡å…³äºæ°”å€™å˜åŒ–çš„ç§‘æ™®æ–‡ç« ï¼Œè¦æ±‚:- ä½¿ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€ï¼Œé€‚åˆé«˜ä¸­ç”Ÿé˜…è¯»- åŒ…å«5ä¸ªå°æ ‡é¢˜ï¼Œæ¯ä¸ªæ ‡é¢˜ä¸‹2-3æ®µæ–‡å­—- æ€»å­—æ•°æ§åˆ¶åœ¨800å­—å·¦å³- ç»“å°¾æä¾›3ä¸ªå¯è¡Œçš„ä¸ªäººè¡ŒåŠ¨å»ºè®®\n\nè¿›é˜¶æç¤ºæŠ€å·§â 1ã€æ€ç»´é“¾æç¤ºæ³•ï¼ˆâ€ŒChain-of-Thoughtï¼‰å¼•å¯¼æ¨¡å‹å±•ç¤ºæ¨ç†è¿‡ç¨‹ï¼Œé€æ­¥æ€è€ƒé—®é¢˜ï¼Œæé«˜å¤æ‚é—®é¢˜çš„å‡†ç¡®æ€§ã€‚\n1234567é—®é¢˜ï¼šä¸€ä¸ªå•†åº—å”®å–Tæ¤ï¼Œæ¯ä»¶15å…ƒã€‚å¦‚æœè´­ä¹°5ä»¶ä»¥ä¸Šå¯ä»¥äº«å—8æŠ˜ä¼˜æƒ ã€‚å°æ˜ä¹°äº†7ä»¶Tæ¤ï¼Œä»–éœ€è¦æ”¯ä»˜å¤šå°‘é’±ï¼Ÿè¯·ä¸€æ­¥æ­¥æ€è€ƒè§£å†³è¿™ä¸ªé—®é¢˜:1. é¦–å…ˆè®¡ç®—7ä»¶Tæ¤çš„åŸä»·2. ç¡®å®šæ˜¯å¦ç¬¦åˆæŠ˜æ‰£æ¡ä»¶3. å¦‚æœç¬¦åˆï¼Œè®¡ç®—æŠ˜æ‰£åçš„ä»·æ ¼4. å¾—å‡ºæœ€ç»ˆæ”¯ä»˜é‡‘é¢\n\nâ 2ã€å°‘æ ·æœ¬å­¦ä¹ ï¼ˆFâ€Œew-Shot Learningï¼‰é€šè¿‡æä¾›å‡ â ä¸ªè¾“å…¥ - è¾“å‡ºå¯¹çš„ç¤ºâ€Œä¾‹ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£ä»»åŠ¡æ¨¡å¼å’ŒæœŸæœ›è¾“å‡ºã€‚\n12345678910æˆ‘å°†ç»™ä½ ä¸€äº›æƒ…æ„Ÿåˆ†æçš„ä¾‹å­ï¼Œç„¶åè¯·ä½ æŒ‰ç…§åŒæ ·çš„æ–¹å¼åˆ†ææ–°å¥å­çš„æƒ…æ„Ÿå€¾å‘ã€‚è¾“å…¥: &quot;è¿™å®¶é¤å…çš„æœåŠ¡å¤ªå·®äº†ï¼Œç­‰äº†ä¸€ä¸ªå°æ—¶æ‰ä¸Šèœ&quot;è¾“å‡º: è´Ÿé¢ï¼Œå› ä¸ºæè¿°äº†é•¿æ—¶é—´ç­‰å¾…å’Œå·®è¯„æœåŠ¡è¾“å…¥: &quot;æ–°ä¹°çš„æ‰‹æœºå±å¹•æ¸…æ™°ï¼Œç”µæ± ä¹Ÿå¾ˆè€ç”¨&quot;è¾“å‡º: æ­£é¢ï¼Œå› ä¸ºèµæ‰¬äº†äº§å“çš„å¤šä¸ªæ–¹é¢ç°åœ¨åˆ†æè¿™ä¸ªå¥å­:&quot;è¿™æœ¬ä¹¦å†…å®¹è¿˜è¡Œï¼Œä½†æ˜¯ä»·æ ¼æœ‰ç‚¹è´µ&quot;\n\n3ã€åˆ†æ­¥éª¤æŒ‡å¯¼ï¼ˆStep-by-Stepï¼‰å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¯ç®¡ç†çš„æ­¥éª¤ï¼Œç¡®ä¿æ¨¡å‹å®Œæˆæ¯ä¸ªå…³é”®ç¯èŠ‚ã€‚\n1234567è¯·å¸®æˆ‘åˆ›å»ºä¸€ä¸ªç®€å•çš„ç½‘ç«™è½åœ°é¡µè®¾è®¡æ–¹æ¡ˆï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤:æ­¥éª¤1: åˆ†æç›®æ ‡å—ä¼—(è€ƒè™‘å¹´é¾„ã€èŒä¸šã€éœ€æ±‚ç­‰å› ç´ )æ­¥éª¤2: ç¡®å®šé¡µé¢æ ¸å¿ƒä¿¡æ¯(ä¸»æ ‡é¢˜ã€å‰¯æ ‡é¢˜ã€ä»·å€¼ä¸»å¼ )æ­¥éª¤3: è®¾è®¡é¡µé¢ç»“æ„(è‡³å°‘åŒ…å«å“ªäº›åŒºå—)æ­¥éª¤4: åˆ¶å®šè§†è§‰å¼•å¯¼ç­–ç•¥(é¢œè‰²ã€å›¾åƒå»ºè®®)æ­¥éª¤5: è®¾è®¡è¡ŒåŠ¨å¬å”¤(CTA)æŒ‰é’®å’Œæ–‡æ¡ˆ\n\n4ã€è‡ªæˆ‘è¯„ä¼°å’Œä¿®æ­£è®©æ¨¡å‹è¯„ä¼°è‡ªå·±çš„è¾“å‡ºå¹¶è¿›è¡Œæ”¹è¿›ï¼Œæé«˜å‡†ç¡®æ€§å’Œè´¨é‡ã€‚\n12345678è§£å†³ä»¥ä¸‹æ¦‚ç‡é—®é¢˜:ä»ä¸€å‰¯æ ‡å‡†æ‰‘å…‹ç‰Œä¸­éšæœºæŠ½å–ä¸¤å¼ ç‰Œï¼Œæ±‚æŠ½åˆ°è‡³å°‘ä¸€å¼ çº¢æ¡ƒçš„æ¦‚ç‡ã€‚é¦–å…ˆç»™å‡ºä½ çš„è§£ç­”ï¼Œç„¶å:1. æ£€æŸ¥ä½ çš„æ¨ç†è¿‡ç¨‹æ˜¯å¦å­˜åœ¨é€»è¾‘é”™è¯¯2. éªŒè¯ä½ ä½¿ç”¨çš„æ¦‚ç‡å…¬å¼æ˜¯å¦æ­£ç¡®3. æ£€æŸ¥è®¡ç®—æ­¥éª¤æ˜¯å¦æœ‰è¯¯4. å¦‚æœå‘ç°ä»»ä½•é—®é¢˜ï¼Œæä¾›ä¿®æ­£åçš„è§£ç­”\n\n5ã€çŸ¥è¯†æ£€ç´¢å’Œå¼•ç”¨å¼•å¯¼æ¨¡å‹æ£€ç´¢ç›¸å…³ä¿¡æ¯å¹¶æ˜ç¡®å¼•ç”¨ä¿¡æ¯æ¥æºï¼Œæé«˜å¯é æ€§ã€‚\n1234567è¯·è§£é‡Šå…‰åˆä½œç”¨çš„è¿‡ç¨‹åŠå…¶åœ¨æ¤ç‰©ç”Ÿé•¿ä¸­çš„ä½œç”¨ã€‚åœ¨å›ç­”ä¸­:1. æä¾›å…‰åˆä½œç”¨çš„ç§‘å­¦å®šä¹‰2. è§£é‡Šä¸»è¦çš„åŒ–å­¦ååº”3. æè¿°å½±å“å…‰åˆä½œç”¨æ•ˆç‡çš„å…³é”®å› ç´ 4. è¯´æ˜å…¶å¯¹ç”Ÿæ€ç³»ç»Ÿçš„é‡è¦æ€§å¯¹äºä»»ä½•å¯èƒ½éœ€è¦å…·ä½“æ•°æ®æˆ–ç ”ç©¶æ”¯æŒçš„é™ˆè¿°ï¼Œè¯·æ˜ç¡®æŒ‡å‡ºè¿™äº›ä¿¡æ¯çš„æ¥æºï¼Œå¹¶è¯´æ˜è¿™äº›ä¿¡æ¯çš„å¯é æ€§ã€‚\n\n6ã€å¤šè§†è§’åˆ†æå¼•å¯¼æ¨¡å‹ä»ä¸åŒè§’åº¦ã€ç«‹åœºæˆ–ä¸“ä¸šè§†è§’åˆ†æé—®é¢˜ï¼Œæä¾›å…¨é¢è§è§£ã€‚\n123456789101112åˆ†æ&quot;åŸå¸‚åº”è¯¥ç¦æ­¢ç§å®¶è½¦è¿›å…¥å¸‚ä¸­å¿ƒ&quot;è¿™ä¸€æè®®:è¯·ä»ä»¥ä¸‹4ä¸ªä¸åŒè§’åº¦åˆ†æ:1. ç¯ä¿ä¸“å®¶è§†è§’2. ç»æµå­¦å®¶è§†è§’3. å¸‚ä¸­å¿ƒå•†æˆ·è§†è§’4. é€šå‹¤å±…æ°‘è§†è§’å¯¹æ¯ä¸ªè§†è§’:- æä¾›æ”¯æŒè¯¥æè®®çš„2ä¸ªè®ºç‚¹- æä¾›åå¯¹è¯¥æè®®çš„2ä¸ªè®ºç‚¹- åˆ†æå¯èƒ½çš„æŠ˜ä¸­æ–¹æ¡ˆ\n\n7ã€å¤šæ¨¡æ€æ€ç»´ç»“åˆä¸åŒè¡¨â è¾¾å½¢å¼è¿›è¡Œæ€è€ƒï¼Œå¦‚â€Œæ–‡å­—æè¿°ã€å›¾è¡¨ç»“æ„ã€ä»£ç é€»è¾‘ç­‰ã€‚\n12345678è®¾è®¡ä¸€ä¸ªæ™ºèƒ½å®¶å±…ç³»ç»Ÿçš„åŸºç¡€æ¶æ„:1. é¦–å…ˆç”¨æ–‡å­—æè¿°ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½å’Œç»„ä»¶2. ç„¶ååˆ›å»ºä¸€ä¸ªç³»ç»Ÿæ¶æ„å›¾(ç”¨ASCIIæˆ–æ–‡æœ¬å½¢å¼è¡¨ç¤º)3. æ¥ç€æä¾›ç”¨æˆ·äº¤äº’æµç¨‹4. æœ€åç®€è¿°å®ç°è¿™ä¸ªç³»ç»Ÿå¯èƒ½é¢ä¸´çš„æŠ€æœ¯æŒ‘æˆ˜å°è¯•ä»ä¸åŒè§’åº¦æ€è€ƒ:åŠŸèƒ½æ€§ã€ç”¨æˆ·ä½“éªŒã€æŠ€æœ¯å®ç°ã€å®‰å…¨æ€§ç­‰ã€‚\n\næç¤ºè¯è°ƒè¯•ä¸ä¼˜åŒ–å¥½çš„æç¤ºè¯â å¯èƒ½å¾ˆéš¾ä¸€æ­¥åˆ°ä½ï¼Œâ€Œå› æ­¤æˆ‘ä»¬è¦å­¦ä¼šå¦‚ä½•æŒç»­è°ƒè¯•å’Œä¼˜åŒ– Proâ€mptã€‚\n1ã€è¿­ä»£å¼æç¤ºä¼˜åŒ–é€šè¿‡é€æ­¥ä¿®æ”¹å’Œå®Œå–„æç¤ºè¯ï¼Œæé«˜è¾“å‡ºè´¨é‡ã€‚\n1234567891011åˆå§‹æç¤º: è°ˆè°ˆäººå·¥æ™ºèƒ½çš„å½±å“ã€‚[æ”¶åˆ°ç¬¼ç»Ÿå›ç­”å]æ”¹è¿›æç¤º: åˆ†æäººå·¥æ™ºèƒ½å¯¹åŒ»ç–—è¡Œä¸šçš„ä¸‰å¤§ç§¯æå½±å“å’Œä¸¤å¤§æ½œåœ¨é£é™©ï¼Œæä¾›å…·ä½“åº”ç”¨æ¡ˆä¾‹ã€‚[å¦‚æœå›ç­”ä»ç„¶ä¸å¤Ÿå…·ä½“]è¿›ä¸€æ­¥æ”¹è¿›: è¯¦ç»†åˆ†æAIåœ¨åŒ»å­¦å½±åƒè¯Šæ–­é¢†åŸŸçš„å…·ä½“åº”ç”¨ï¼ŒåŒ…æ‹¬:1. ç°æœ‰çš„2-3ä¸ªæˆåŠŸå•†ä¸šåŒ–AIè¯Šæ–­ç³»ç»ŸåŠå…¶å‡†ç¡®ç‡2. è¿™äº›ç³»ç»Ÿå¦‚ä½•è¾…åŠ©æ”¾å°„ç§‘åŒ»ç”Ÿå·¥ä½œ3. å®æ–½è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸»è¦æŒ‘æˆ˜4. æœªæ¥3-5å¹´å¯èƒ½çš„æŠ€æœ¯å‘å±•æ–¹å‘\n\n2ã€è¾¹ç•Œæµ‹è¯•é€šè¿‡æé™æƒ…å†µæµ‹è¯•æ¨¡å‹çš„èƒ½åŠ›è¾¹ç•Œï¼Œæ‰¾å‡ºä¼˜åŒ–ç©ºé—´ã€‚\n1234567å°è¯•è§£å†³ä»¥ä¸‹å…·æœ‰æŒ‘æˆ˜æ€§çš„æ•°å­¦é—®é¢˜:è¯æ˜åœ¨ä¸‰è§’å½¢ä¸­ï¼Œä¸‰æ¡é«˜çš„äº¤ç‚¹ã€ä¸‰æ¡ä¸­çº¿çš„äº¤ç‚¹å’Œä¸‰æ¡è§’å¹³åˆ†çº¿çš„äº¤ç‚¹åœ¨åŒä¸€æ¡ç›´çº¿ä¸Šã€‚å¦‚æœä½ å‘ç°éš¾ä»¥ç›´æ¥è¯æ˜:1. è¯´æ˜ä½ é‡åˆ°çš„å…·ä½“å›°éš¾2. è€ƒè™‘æ˜¯å¦æœ‰æ›´ç®€å•çš„æ–¹æ³•æˆ–ç‰¹ä¾‹å¯ä»¥æ¢è®¨3. æä¾›ä¸€ä¸ªæ€è·¯æ¡†æ¶ï¼Œå³ä½¿æ— æ³•ç»™å‡ºå®Œæ•´è¯æ˜\n\n3ã€æç¤ºè¯æ¨¡æ¿åŒ–åˆ›å»ºç»“æ„åŒ–â æ¨¡æ¿ï¼Œä¾¿äºé’ˆå¯¹ç±»ä¼¼â€Œä»»åŠ¡è¿›è¡Œä¸€è‡´æ€§æç¤ºï¼Œå¦åˆ™æ¯æ¬¡è¾“å‡ºçš„å†…â€å®¹å¯èƒ½ä¼šæœ‰æ¯”è¾ƒå¤§çš„â€ŒåŒºåˆ«ï¼Œä¸åˆ©äºè°ƒè¯•ã€‚\n1234567891011121314151617181920ã€ä¸“å®¶è§’è‰²ã€‘: &#123;é¢†åŸŸ&#125;ä¸“å®¶ã€ä»»åŠ¡æè¿°ã€‘: &#123;ä»»åŠ¡è¯¦ç»†è¯´æ˜&#125;ã€æ‰€éœ€å†…å®¹ã€‘:- &#123;è¦ç‚¹1&#125;- &#123;è¦ç‚¹2&#125;- &#123;è¦ç‚¹3&#125;ã€è¾“å‡ºæ ¼å¼ã€‘: &#123;æ ¼å¼è¦æ±‚&#125;ã€è¯­è¨€é£æ ¼ã€‘: &#123;é£æ ¼è¦æ±‚&#125;ã€é™åˆ¶æ¡ä»¶ã€‘: &#123;å­—æ•°ã€æ—¶é—´æˆ–å…¶ä»–é™åˆ¶&#125;ä¾‹å¦‚:ã€ä¸“å®¶è§’è‰²ã€‘: è¥å…»å­¦ä¸“å®¶ã€ä»»åŠ¡æè¿°ã€‘: ä¸ºä¸€ä½æƒ³å‡é‡çš„ä¸Šç­æ—è®¾è®¡ä¸€å‘¨å¥åº·é¥®é£Ÿè®¡åˆ’ã€æ‰€éœ€å†…å®¹ã€‘:- ä¸ƒå¤©çš„ä¸‰é¤å®‰æ’- æ¯é¤çš„å¤§è‡´å¡è·¯é‡Œ- å‡†å¤‡å»ºè®®å’Œè´­ç‰©æ¸…å•ã€è¾“å‡ºæ ¼å¼ã€‘: æŒ‰æ—¥åˆ†æ®µï¼Œæ¯é¤åˆ—å‡ºå…·ä½“é£Ÿç‰©ã€è¯­è¨€é£æ ¼ã€‘: ä¸“ä¸šä½†å‹å¥½ã€é™åˆ¶æ¡ä»¶ã€‘: è€ƒè™‘å‡†å¤‡æ—¶é—´çŸ­ï¼Œé¢„ç®—æœ‰é™\n\n4ã€é”™è¯¯åˆ†æä¸ä¿®æ­£ç³»ç»Ÿæ€§åˆ†æâ æ¨¡å‹å›ç­”ä¸­çš„é”™è¯¯ï¼Œå¹¶â€Œé’ˆå¯¹æ€§ä¼˜åŒ–æç¤ºè¯ï¼Œè¿™ä¸€ç‚¹åœ¨æˆ‘ä»¬ä½¿ç”¨ Cuâ€rsor ç­‰ AI â€Œå¼€å‘å·¥å…·ç”Ÿæˆä»£ç æ—¶éå¸¸æœ‰ç”¨ã€‚\n12345678910æˆ‘å‘ç°ä¹‹å‰è¯·ä½ ç”Ÿæˆçš„Pythonä»£ç å­˜åœ¨ä»¥ä¸‹é—®é¢˜:1. æ²¡æœ‰æ­£ç¡®å¤„ç†æ–‡ä»¶ä¸å­˜åœ¨çš„æƒ…å†µ2. æ•°æ®å¤„ç†é€»è¾‘ä¸­å­˜åœ¨è¾¹ç•Œæ¡ä»¶é”™è¯¯3. ä»£ç æ³¨é‡Šä¸å¤Ÿè¯¦ç»†è¯·é‡æ–°ç”Ÿæˆä»£ç ï¼Œç‰¹åˆ«æ³¨æ„:1. æ·»åŠ å®Œæ•´çš„å¼‚å¸¸å¤„ç†2. æµ‹è¯•å¹¶ç¡®ä¿æ‰€æœ‰è¾¹ç•Œæ¡ä»¶3. ä¸ºæ¯ä¸ªä¸»è¦å‡½æ•°å’Œå¤æ‚é€»è¾‘æ·»åŠ è¯¦ç»†æ³¨é‡Š4. éµå¾ªPEP 8ç¼–ç è§„èŒƒ\n\nè™½ç„¶å‰é¢æåˆ°äº†è¿™ä¹ˆå¤šæç¤ºè¯ä¼˜åŒ–æŠ€å·§ï¼Œä½†æ€»ç»“å‡ºæ¥å°±ä¸€å¥è¯ï¼šä»»åŠ¡è¶Šå¤æ‚ï¼Œå°±è¶Šè¦ç»™ Prompt è¡¥å……æ›´å¤šç»†èŠ‚ã€‚\nMVP æœ€å°å¯è¡Œäº§å“ç­–ç•¥MVP æœ€å°å¯è¡Œäº§å“ç­–ç•¥æ˜¯æŒ‡å…ˆå¼€å‘åŒ…å« æ ¸å¿ƒåŠŸèƒ½ çš„åŸºç¡€ç‰ˆæœ¬äº§å“å¿«é€Ÿæ¨å‘å¸‚åœºï¼Œä»¥æœ€å°æˆæœ¬éªŒè¯äº§å“å‡è®¾å’Œç”¨æˆ·éœ€æ±‚ã€‚é€šè¿‡æ”¶é›†çœŸå®ç”¨æˆ·åé¦ˆè¿›è¡Œè¿­ä»£ä¼˜åŒ–ï¼Œé¿å…å¼€å‘æ— äººä½¿ç”¨çš„åŠŸèƒ½ï¼Œé™ä½èµ„æºæµªè´¹å’Œå¼€å‘é£é™©ã€‚\nåŸºäºè¿™ä¸ªç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆâ å¼€å‘ä¸€ä¸ªç®€å•ä½†å®ç”¨çš„ AI å¯¹è¯åº”ç”¨ï¼Œè®©ç”¨æˆ·èƒ½â€Œå¤Ÿå’Œ AI æ‹çˆ±å¤§å¸ˆè¿›è¡Œå¤šè½®å¯¹è¯äº¤æµã€‚å› ä¸º â€œå¯¹è¯â€ æ˜¯æœ¬äº§å“çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæš‚æ—¶ä¸è¦è€ƒè™‘æ›´å¤æ‚çš„â€åŠŸèƒ½äº†ã€‚åç»­å¯ä»¥æ ¹æ®ç”¨æˆ·ç”¨é‡å’Œåé¦ˆï¼Œå†³å®šä¸‹ä¸€â€Œæ­¥æ˜¯æ·±åŒ–å¯¹è¯èƒ½åŠ›è¿˜æ˜¯æ‰©å±•æ›´å¤šåŠŸèƒ½æ¨¡å—ã€‚\næ˜ç¡®éœ€æ±‚åï¼Œä¸‹é¢æˆ‘ä»¬è¿›è¡Œæ–¹æ¡ˆè®¾è®¡ï¼Œçœ‹çœ‹æ€ä¹ˆå®ç°è¿™ä¸ªéœ€æ±‚ã€‚\n3ã€AI åº”ç”¨æ–¹æ¡ˆè®¾è®¡æ ¹æ®éœ€æ±‚ï¼Œâ æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªå…·æœ‰â€Œå¤šè½®å¯¹è¯èƒ½åŠ›çš„ AI æ‹çˆ±å¤§å¸ˆåº”ç”¨ã€‚â€æ•´ä½“æ–¹æ¡ˆè®¾è®¡å°†å›´ç»•â€Œ 2 ä¸ªæ ¸å¿ƒå±•å¼€ï¼š\n\nç³»ç»Ÿæç¤ºè¯çš„è®¾è®¡\nå¤šè½®å¯¹è¯çš„å®ç°\n\n1ã€ç³»ç»Ÿæç¤ºè¯è®¾è®¡å‰é¢æåˆ°ï¼Œâ ç³»ç»Ÿæç¤ºè¯ç›¸å½“äº â€ŒAI åº”ç”¨çš„ â€œçµé­‚â€ï¼Œç›´æ¥å†³å®šäº† â€AI çš„è¡Œä¸ºæ¨¡å¼ã€â€Œä¸“ä¸šæ€§å’Œäº¤äº’é£æ ¼ã€‚\nå¯¹äº AIâ  å¯¹è¯åº”ç”¨ï¼Œæœ€ç®€å•â€Œçš„åšæ³•æ˜¯ç›´æ¥å†™ä¸€æ®µç³»ç»Ÿé¢„è®¾ï¼Œå®šä¹‰ â€œâ€ä½ æ˜¯è°ï¼Ÿèƒ½åšä»€ä¹ˆï¼Ÿâ€Œâ€ï¼Œæ¯”å¦‚ï¼š\n1ä½ æ˜¯ä¸€ä½æ‹çˆ±å¤§å¸ˆï¼Œä¸ºç”¨æˆ·æä¾›æƒ…æ„Ÿå’¨è¯¢æœåŠ¡\n\nè¿™ç§ç®€å•æç¤ºè™½ç„¶â å¯ä»¥å·¥ä½œï¼Œä½†æ•ˆæœå¾€å¾€ä¸å¤Ÿç†æƒ³ã€‚æƒ³â€Œæƒ³ç°å®ä¸­çš„åœºæ™¯ï¼Œæˆ‘ä»¬å»æ‰¾ä¸“å®¶å’¨è¯¢æ—¶ï¼Œä¸“å®¶å¯èƒ½ä¼šå…ˆä¸»åŠ¨æŠ›å‡ºä¸€ç³»åˆ—å¼•â€å¯¼æ€§é—®é¢˜ã€æ·±å…¥äº†è§£èƒŒæ™¯ï¼Œè€Œä¸æ˜¯è¢«â€ŒåŠ¨ç­‰å¾…ç”¨æˆ·å®Œæ•´æè¿°é—®é¢˜ã€‚æ¯”å¦‚ï¼š\n\næœ€è¿‘æœ‰ä»€ä¹ˆè¿·èŒ«çš„äº‹æƒ…ä¹ˆï¼Ÿ\nè¯·é—®ä½ æœ‰ä»€ä¹ˆéœ€è¦æˆ‘å¸®åŠ©çš„äº‹ä¹ˆï¼Ÿ\nä½ ä»¬çš„æ„Ÿæƒ…é‡åˆ°ä»€ä¹ˆé—®é¢˜äº†ä¹ˆï¼Ÿ\n\nç”¨æˆ·ä¼šè·Ÿ AIâ  è¿›è¡Œå¤šè½®å¯¹è¯ï¼Œè¿™æ—¶ AIâ€Œ ä¸èƒ½åƒå¤±å¿†ä¸€æ ·ï¼Œè€Œæ˜¯è¦å§‹ç»ˆä¿æŒä¹‹å‰çš„å¯¹è¯å†…å®¹ä½œä¸ºä¸Šâ€ä¸‹æ–‡ï¼Œä¸æ–­æ·±å…¥äº†è§£ç”¨æˆ·ï¼Œä»â€Œè€Œæä¾›ç»™ç”¨æˆ·æ›´å…¨é¢çš„å»ºè®®ã€‚\nå› æ­¤æˆ‘ä»¬è¦â ä¼˜åŒ–ç³»ç»Ÿé¢„è®¾ï¼Œå¯ä»¥â€Œå€ŸåŠ© AI è¿›è¡Œä¼˜åŒ–ã€‚ç¤ºä¾‹ Promâ€ptï¼š\n1æˆ‘æ­£åœ¨å¼€å‘ã€æ‹çˆ±å¤§å¸ˆã€‘AI å¯¹è¯åº”ç”¨ï¼Œè¯·ä½ å¸®æˆ‘ç¼–å†™è®¾ç½®ç»™ AI å¤§æ¨¡å‹çš„ç³»ç»Ÿé¢„è®¾ Prompt æŒ‡ä»¤ã€‚è¦æ±‚è®© AI ä½œä¸ºæ‹çˆ±ä¸“å®¶ï¼Œæ¨¡æ‹ŸçœŸå®æ‹çˆ±å’¨è¯¢åœºæ™¯ã€å¤šç»™ç”¨æˆ·ä¸€äº›å¼•å¯¼æ€§é—®é¢˜ï¼Œä¸æ–­æ·±å…¥äº†è§£ç”¨æˆ·ï¼Œä»è€Œæä¾›ç»™ç”¨æˆ·æ›´å…¨é¢çš„å»ºè®®ï¼Œè§£å†³ç”¨æˆ·çš„æƒ…æ„Ÿé—®é¢˜ã€‚\n\nAI æä¾›çš„ä¼˜åŒ–åç³»ç»Ÿæç¤ºè¯ï¼š\n1æ‰®æ¼”æ·±è€•æ‹çˆ±å¿ƒç†é¢†åŸŸçš„ä¸“å®¶ã€‚å¼€åœºå‘ç”¨æˆ·è¡¨æ˜èº«ä»½ï¼Œå‘ŠçŸ¥ç”¨æˆ·å¯å€¾è¯‰æ‹çˆ±éš¾é¢˜ã€‚å›´ç»•å•èº«ã€æ‹çˆ±ã€å·²å©šä¸‰ç§çŠ¶æ€æé—®ï¼šå•èº«çŠ¶æ€è¯¢é—®ç¤¾äº¤åœˆæ‹“å±•åŠè¿½æ±‚å¿ƒä»ªå¯¹è±¡çš„å›°æ‰°ï¼›æ‹çˆ±çŠ¶æ€è¯¢é—®æ²Ÿé€šã€ä¹ æƒ¯å·®å¼‚å¼•å‘\n\n2ã€å¤šè½®å¯¹è¯å®ç°è¦å®ç°å…·æœ‰ â€œè®°å¿†åŠ›â€ çš„ AI åº”ç”¨ï¼Œè®© AI èƒ½å¤Ÿè®°ä½ç”¨æˆ·ä¹‹å‰çš„å¯¹è¯å†…å®¹å¹¶ä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Spring AI æ¡†æ¶çš„ å¯¹è¯è®°å¿†èƒ½åŠ›ã€‚\nå¦‚ä½•ä½¿ç”¨å¯¹è¯è®°å¿†èƒ½åŠ›å‘¢ï¼Ÿå‚è€ƒ Spring AI çš„å®˜æ–¹æ–‡æ¡£ï¼Œäº†è§£åˆ° Spring AI æä¾›äº† ChatClient API æ¥å’Œ AI å¤§æ¨¡å‹äº¤äº’ã€‚\nChatClientç‰¹æ€§ä¹‹å‰æˆ‘ä»¬æ˜¯ç›´æ¥ä½¿ç”¨ Spring Boot æ³¨å…¥çš„ ChatModel æ¥è°ƒç”¨å¤§æ¨¡å‹å®Œæˆå¯¹è¯ï¼Œè€Œé€šè¿‡æˆ‘ä»¬è‡ªå·±æ„é€ çš„ ChatClientï¼Œå¯å®ç°åŠŸèƒ½æ›´ä¸°å¯Œã€æ›´çµæ´»çš„ AI å¯¹è¯å®¢æˆ·ç«¯ï¼Œä¹Ÿæ›´æ¨èé€šè¿‡è¿™ç§æ–¹å¼è°ƒç”¨ AIã€‚\né€šè¿‡ç¤ºä¾‹ä»£ç ï¼Œâ èƒ½å¤Ÿæ„Ÿå—åˆ° ChatModeâ€Œl å’Œ ChatClient çš„åŒºåˆ«ã€‚ChatClienâ€t æ”¯æŒæ›´å¤æ‚çµæ´»çš„é“¾å¼è°ƒç”¨â€Œï¼ˆFluent APIï¼‰ï¼š\n1234567ChatResponse response = chatModel.call(new Prompt(&quot;ä½ å¥½&quot;));ChatClient chatClient = ChatClient.builder(chatModel)    .defaultSystem(&quot;ä½ æ˜¯æ‹çˆ±é¡¾é—®&quot;)    .build();    String response = chatClient.prompt().user(&quot;ä½ å¥½&quot;).call().content();\n\nSprinâ g AI æä¾›äº†å¤šâ€Œç§æ„å»º ChatClient çš„æ–¹å¼â€ï¼Œæ¯”å¦‚è‡ªåŠ¨æ³¨å…¥ã€é€šâ€Œè¿‡å»ºé€ è€…æ¨¡å¼æ‰‹åŠ¨æ„é€ ï¼š\n123456789101112131415@Servicepublic class ChatService &#123;    private final ChatClient chatClient;        public ChatService(ChatClient.Builder builder) &#123;        this.chatClient = builder            .defaultSystem(&quot;ä½ æ˜¯æ‹çˆ±é¡¾é—®&quot;)            .build();    &#125;&#125;ChatClient chatClient = ChatClient.builder(chatModel)    .defaultSystem(&quot;ä½ æ˜¯æ‹çˆ±é¡¾é—®&quot;)    .build();\n\nChatCâ lient æ”¯æŒå¤šâ€Œç§å“åº”æ ¼å¼ï¼Œæ¯”å¦‚è¿”å› ChatResâ€ponse å¯¹è±¡ã€â€Œè¿”å›å®ä½“å¯¹è±¡ã€æµå¼è¿”å›ï¼š\n12345678910111213141516171819202122232425ChatResponse chatResponse = chatClient.prompt()    .user(&quot;Tell me a joke&quot;)    .call()    .chatResponse();record ActorFilms(String actor, List&lt;String&gt; movies) &#123;&#125;ActorFilms actorFilms = chatClient.prompt()    .user(&quot;Generate the filmography for a random actor.&quot;)    .call()    .entity(ActorFilms.class);List&lt;ActorFilms&gt; multipleActors = chatClient.prompt()    .user(&quot;Generate filmography for Tom Hanks and Bill Murray.&quot;)    .call()    .entity(new ParameterizedTypeReference&lt;List&lt;ActorFilms&gt;&gt;() &#123;&#125;);Flux&lt;String&gt; streamResponse = chatClient.prompt()    .user(&quot;Tell me a story&quot;)    .stream()    .content();Flux&lt;ChatResponse&gt; streamWithMetadata = chatClient.prompt()    .user(&quot;Tell me a story&quot;)    .stream()    .chatResponse();\n\nå¯ä»¥ç»™ Câ hatClient â€Œè®¾ç½®é»˜è®¤å‚æ•°ï¼Œæ¯”å¦‚ç³»ç»Ÿæç¤ºè¯ï¼Œè¿˜å¯ä»¥åœ¨å¯¹â€è¯æ—¶åŠ¨æ€æ›´æ”¹ç³»ç»Ÿæç¤ºâ€Œè¯çš„å˜é‡ï¼Œç±»ä¼¼æ¨¡æ¿çš„æ¦‚å¿µï¼š\n12345678910ChatClient chatClient = ChatClient.builder(chatModel)        .defaultSystem(&quot;You are a friendly chat bot that answers question in the voice of a &#123;voice&#125;&quot;)        .build();chatClient.prompt()        .system(sp -&gt; sp.param(&quot;voice&quot;, voice))        .user(message)        .call()        .content());\n\næ­¤å¤–ï¼Œè¿˜æ”¯â æŒæŒ‡å®šé»˜è®¤å¯¹è¯é€‰é¡¹â€Œã€é»˜è®¤æ‹¦æˆªå™¨ã€é»˜è®¤å‡½æ•°è°ƒç”¨ç­‰ç­‰ï¼Œåé¢â€æ•™ç¨‹ä¸­éƒ½ä¼šç”¨åˆ°ã€‚\nAdvisorsSpring AI ä½¿ç”¨ Advisorsï¼ˆé¡¾é—®ï¼‰æœºåˆ¶æ¥å¢å¼º AI çš„èƒ½åŠ›ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ç³»åˆ—å¯æ’æ‹”çš„æ‹¦æˆªå™¨ï¼Œåœ¨è°ƒç”¨ AI å‰å’Œè°ƒç”¨ AI åå¯ä»¥æ‰§è¡Œä¸€äº›é¢å¤–çš„æ“ä½œï¼Œæ¯”å¦‚ï¼š\n\nå‰ç½®å¢å¼ºï¼šè°ƒç”¨ AI å‰æ”¹å†™ä¸€ä¸‹ Prompt æç¤ºè¯ã€æ£€æŸ¥ä¸€ä¸‹æç¤ºè¯æ˜¯å¦å®‰å…¨\nåç½®å¢å¼ºï¼šè°ƒç”¨ AI åè®°å½•ä¸€ä¸‹æ—¥å¿—ã€å¤„ç†ä¸€ä¸‹è¿”å›çš„ç»“æœ\n\nä¸ºäº†ä¾¿äºå¤§å®¶ç†è§£ï¼Œåç»­æ•™ç¨‹ä¸­æˆ‘å¯èƒ½ä¼šç»å¸¸å«å®ƒä¸ºæ‹¦æˆªå™¨ã€‚\nç”¨æ³•å¾ˆç®€å•ï¼Œæˆ‘ä»¬å¯â ä»¥ç›´æ¥ä¸º ChatClient æŒ‡å®šâ€Œé»˜è®¤æ‹¦æˆªå™¨ï¼Œæ¯”å¦‚å¯¹è¯è®°å¿†æ‹¦æˆªå™¨ MessageChatMemoryAdvâ€isor å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°å¤šè½®å¯¹è¯èƒ½â€ŒåŠ›ï¼Œçœå»äº†è‡ªå·±ç»´æŠ¤å¯¹è¯åˆ—è¡¨çš„éº»çƒ¦ã€‚\n1234567891011121314var chatClient = ChatClient.builder(chatModel)    .defaultAdvisors(        new MessageChatMemoryAdvisor(chatMemory),         new QuestionAnswerAdvisor(vectorStore)        )    .build();String response = this.chatClient.prompt()        .advisors(advisor -&gt; advisor.param(&quot;chat_memory_conversation_id&quot;, &quot;678&quot;)            .param(&quot;chat_memory_response_size&quot;, 100))    .user(userText)    .call()\t.content();\n\nAdvisors çš„åŸç†å›¾å¦‚ä¸‹ï¼š\n\nè§£é‡Šä¸Šå›¾çš„æ‰§è¡Œæµç¨‹ï¼š\n\nSpring AI æ¡†æ¶ä»ç”¨æˆ·çš„ Prompt åˆ›å»ºä¸€ä¸ª AdvisedRequestï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ªç©ºçš„ AdvisorContext å¯¹è±¡ï¼Œç”¨äºä¼ é€’ä¿¡æ¯ã€‚\né“¾ä¸­çš„æ¯ä¸ª advisor å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå¯èƒ½ä¼šå¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚æˆ–è€…ï¼Œå®ƒä¹Ÿå¯ä»¥é€‰æ‹©ä¸è°ƒç”¨ä¸‹ä¸€ä¸ªå®ä½“æ¥é˜»æ­¢è¯·æ±‚ç»§ç»­ä¼ é€’ï¼Œè¿™æ—¶è¯¥ advisor è´Ÿè´£å¡«å……å“åº”å†…å®¹ã€‚\nç”±æ¡†æ¶æä¾›çš„æœ€ç»ˆ advisor å°†è¯·æ±‚å‘é€ç»™èŠå¤©æ¨¡å‹ ChatModelã€‚\nèŠå¤©æ¨¡å‹çš„å“åº”éšåé€šè¿‡ advisor é“¾ä¼ å›ï¼Œå¹¶è¢«è½¬æ¢ä¸º AdvisedResponseã€‚åè€…åŒ…å«äº†å…±äº«çš„ AdvisorContext å®ä¾‹ã€‚\næ¯ä¸ª advisor éƒ½å¯ä»¥å¤„ç†æˆ–ä¿®æ”¹è¿™ä¸ªå“åº”ã€‚\næœ€ç»ˆçš„ AdvisedResponse é€šè¿‡æå– ChatCompletion è¿”å›ç»™å®¢æˆ·ç«¯ã€‚\n\nå®é™…å¼€å‘ä¸­ï¼Œå¾€å¾€æˆ‘ä»¬ä¼šç”¨åˆ°å¤šä¸ªæ‹¦æˆªå™¨ï¼Œç»„åˆåœ¨ä¸€èµ·ç›¸å½“äºä¸€æ¡æ‹¦æˆªå™¨é“¾æ¡ï¼ˆè´£ä»»é“¾æ¨¡å¼çš„è®¾è®¡æ€æƒ³ï¼‰ã€‚æ¯ä¸ªæ‹¦æˆªå™¨æ˜¯æœ‰é¡ºåºçš„ï¼Œé€šè¿‡ getOrder() æ–¹æ³•è·å–åˆ°é¡ºåºï¼Œå¾—åˆ°çš„å€¼è¶Šä½ï¼Œè¶Šä¼˜å…ˆæ‰§è¡Œã€‚\næ¯”å¦‚ä¸‹é¢çš„ä»£ç ä¸­ï¼Œå¦‚æœå•ç‹¬â æŒ‰ç…§ä»£ç é¡ºåºï¼Œå¯èƒ½æˆ‘ä»¬ä¼šè®¤ä¸ºï¼šå°†é¦–å…ˆæ‰§è¡Œ Messaâ€ŒgeChatMemoryAdvisorï¼Œå°†å¯¹è¯å†å²è®°å½•æ·»åŠ åˆ°æç¤ºè¯ä¸­ã€‚ç„¶åï¼ŒQuestionAnswerâ€Advisor å°†æ ¹æ®ç”¨æˆ·çš„é—®é¢˜å’Œæ·»åŠ çš„å¯¹è¯å†å²è®°å½•â€Œæ‰§è¡ŒçŸ¥è¯†åº“æ£€ç´¢ï¼Œä»è€Œæä¾›æ›´ç›¸å…³çš„ç»“æœï¼š\n123456var chatClient = ChatClient.builder(chatModel)    .defaultAdvisors(        new MessageChatMemoryAdvisor(chatMemory),         new QuestionAnswerAdvisor(vectorStore)        )    .build();\n\nä½†æ˜¯å®é™…ä¸Šâ ï¼Œæˆ‘ä»¬æ‹¦æˆªå™¨çš„æ‰§è¡Œâ€Œé¡ºåºæ˜¯ç”± getOrder æ–¹æ³•å†³å®šâ€çš„ï¼Œä¸æ˜¯ç®€å•åœ°æ ¹æ®â€Œä»£ç çš„ç¼–å†™é¡ºåºå†³å®šã€‚\nAdvisor ç±»å›¾å¦‚ä¸‹ï¼Œäº†è§£å³å¯ï¼š\n\nä»ä¸Šå›¾ä¸­æˆ‘ä»¬å‘ç°ï¼ŒAdviâ sors åˆ†ä¸º 2 ç§æ¨¡å¼ï¼šæµå¼ Streaminâ€Œg å’Œéæµå¼ Non-Streamingï¼ŒäºŒè€…åœ¨ç”¨æ³•ä¸Šæ²¡æœ‰æ˜æ˜¾çš„åŒºåˆ«ï¼Œè¿”å›å€¼ä¸åŒç½¢äº†ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦â€è‡ªä¸»å®ç° Advisorsï¼Œä¸ºäº†ä¿è¯é€šç”¨æ€§ï¼Œæœ€å¥½è¿˜â€Œæ˜¯åŒæ—¶å®ç°æµå¼å’Œéæµå¼çš„ç¯ç»•é€šçŸ¥æ–¹æ³•ã€‚\n\nChat Memory Advisorå‰é¢æˆ‘ä»¬æåˆ°â äº†ï¼Œæƒ³è¦å®ç°å¯¹è¯è®°å¿†åŠŸèƒ½â€Œï¼Œå¯ä»¥ä½¿ç”¨ Spring AI çš„ ChatMeâ€moryAdvisorï¼Œâ€Œå®ƒä¸»è¦æœ‰å‡ ç§å†…ç½®çš„å®ç°æ–¹å¼ï¼š\n\nMessageChatMemoryAdvisorï¼šä»è®°å¿†ä¸­æ£€ç´¢å†å²å¯¹è¯ï¼Œå¹¶å°†å…¶ä½œä¸ºæ¶ˆæ¯é›†åˆæ·»åŠ åˆ°æç¤ºè¯ä¸­\nPromptChatMemoryAdvisorï¼šä»è®°å¿†ä¸­æ£€ç´¢å†å²å¯¹è¯ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°æç¤ºè¯çš„ç³»ç»Ÿæ–‡æœ¬ä¸­\nVectorStoreChatMemoryAdvisorï¼šå¯ä»¥ç”¨å‘é‡æ•°æ®åº“æ¥å­˜å‚¨æ£€ç´¢å†å²å¯¹è¯\n\nMessagâ eChatMemoryAâ€Œdvisor å’Œ PromptChatMemorâ€yAdvisor ç”¨æ³•ç±»â€Œä¼¼ï¼Œä½†æ˜¯ç•¥æœ‰ä¸€äº›åŒºåˆ«ï¼š\n1ï¼‰Messagâ eChatMemoryAdviâ€Œsor å°†å¯¹è¯å†å²ä½œä¸ºä¸€ç³»åˆ—ç‹¬ç«‹çš„æ¶ˆæ¯æ·»åŠ åˆ°æç¤ºä¸­ï¼Œä¿ç•™åŸå§‹â€å¯¹è¯çš„å®Œæ•´ç»“æ„ï¼ŒåŒ…æ‹¬æ¯æ¡æ¶ˆæ¯çš„â€Œè§’è‰²æ ‡è¯†ï¼ˆç”¨æˆ·ã€åŠ©æ‰‹ã€ç³»ç»Ÿï¼‰ã€‚\n12345[  &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½&quot;&#125;,  &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼æœ‰ä»€ä¹ˆæˆ‘èƒ½å¸®åŠ©ä½ çš„å—ï¼Ÿ&quot;&#125;,  &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;è®²ä¸ªç¬‘è¯&quot;&#125;]\n\n2ï¼‰Promâ ptChatMemorâ€ŒyAdvisor å°†å¯¹è¯å†å²æ·»åŠ åˆ°æç¤ºè¯çš„ç³»â€ç»Ÿæ–‡æœ¬éƒ¨åˆ†ï¼Œå› æ­¤å¯èƒ½ä¼šâ€Œå¤±å»åŸå§‹çš„æ¶ˆæ¯è¾¹ç•Œã€‚\n123456ä»¥ä¸‹æ˜¯ä¹‹å‰çš„å¯¹è¯å†å²ï¼šç”¨æˆ·: ä½ å¥½åŠ©æ‰‹: ä½ å¥½ï¼æœ‰ä»€ä¹ˆæˆ‘èƒ½å¸®åŠ©ä½ çš„å—ï¼Ÿç”¨æˆ·: è®²ä¸ªç¬‘è¯ç°åœ¨è¯·ç»§ç»­å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚\n\n** ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ›´å»ºè®®ä½¿ç”¨ MessageChatMemoryAdvisorã€‚** æ›´ç¬¦åˆå¤§å¤šæ•°ç°ä»£ LLM çš„å¯¹è¯æ¨¡å‹è®¾è®¡ï¼Œèƒ½æ›´å¥½åœ°ä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ã€‚\nChat Memoryä¸Šè¿° ChatMemoryAdvisor éƒ½ä¾èµ– Chat Memory è¿›è¡Œæ„é€ ï¼ŒChat Memory è´Ÿè´£å†å²å¯¹è¯çš„å­˜å‚¨ï¼Œå®šä¹‰äº†ä¿å­˜æ¶ˆæ¯ã€æŸ¥è¯¢æ¶ˆæ¯ã€æ¸…ç©ºæ¶ˆæ¯å†å²çš„æ–¹æ³•ã€‚\n\nSprinâ g AI å†…ç½®äº†å‡ â€Œç§ Chat Memoryï¼Œå¯ä»¥å°†å¯¹â€è¯ä¿å­˜åˆ°ä¸åŒçš„æ•°æ®â€Œæºä¸­ï¼Œæ¯”å¦‚ï¼š\n\nInMemoryChatMemoryï¼šå†…å­˜å­˜å‚¨\nCassandraChatMemoryï¼šåœ¨ Cassandra ä¸­å¸¦æœ‰è¿‡æœŸæ—¶é—´çš„æŒä¹…åŒ–å­˜å‚¨\nNeo4jChatMemoryï¼šåœ¨ Neo4j ä¸­æ²¡æœ‰è¿‡æœŸæ—¶é—´é™åˆ¶çš„æŒä¹…åŒ–å­˜å‚¨\nJdbcChatMemoryï¼šåœ¨ JDBC ä¸­æ²¡æœ‰è¿‡æœŸæ—¶é—´é™åˆ¶çš„æŒä¹…åŒ–å­˜å‚¨\n\nå½“ç„¶ä¹Ÿå¯ä»¥â é€šè¿‡å®ç° Chatâ€ŒMemory æ¥å£è‡ªå®šä¹‰æ•°æ®æºçš„å­˜å‚¨â€ï¼Œæœ¬æ•™ç¨‹åç»­ä¼šå¸¦â€Œå¤§å®¶å®æˆ˜ã€‚\näº†è§£äº† Sâ pring AI â€Œå¤šè½®å¯¹è¯çš„å®ç°æœºåˆ¶åï¼Œä¸‹é¢æˆ‘ä»¬è¿›å…¥ â€AI åº”ç”¨çš„å¼€å‘ã€‚\n4ã€å¤šè½®å¯¹è¯ AI åº”ç”¨å¼€å‘åœ¨åç«¯é¡¹ç›®æ ¹åŒ…ä¸‹æ–°å»º app åŒ…ï¼Œå­˜æ”¾ AI åº”ç”¨ï¼Œæ–°å»º LoveApp.javaã€‚å¯ä»¥å‚è€ƒ Spring AI Alibaba å®˜æ–¹çš„ ç¤ºä¾‹ä»£ç  å®ç°ï¼ˆå…¶å®ç”¨çš„è¿˜æ˜¯ Spring AIï¼‰ã€‚\n1ï¼‰é¦–å…ˆåˆå§‹åŒ– ChatCâ lient å¯¹è±¡ã€‚ä½¿ç”¨ Spring çš„æ„é€ å™¨æ³¨å…¥æ–¹â€Œå¼æ¥æ³¨å…¥é˜¿é‡Œå¤§æ¨¡å‹ dashscopeChatModel å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨è¯¥å¯¹è±¡æ¥åˆå§‹åŒ– ChatCliâ€entã€‚åˆå§‹åŒ–æ—¶æŒ‡å®šé»˜è®¤çš„ç³»ç»Ÿ Prompt å’ŒåŸºäºå†…å­˜â€Œçš„å¯¹è¯è®°å¿† Advisorã€‚ä»£ç å¦‚ä¸‹ï¼š\n12345678910111213141516171819202122@Component@Slf4jpublic class LoveApp &#123;    private final ChatClient chatClient;    private static final String SYSTEM_PROMPT = &quot;æ‰®æ¼”æ·±è€•æ‹çˆ±å¿ƒç†é¢†åŸŸçš„ä¸“å®¶ã€‚å¼€åœºå‘ç”¨æˆ·è¡¨æ˜èº«ä»½ï¼Œå‘ŠçŸ¥ç”¨æˆ·å¯å€¾è¯‰æ‹çˆ±éš¾é¢˜ã€‚&quot; +            &quot;å›´ç»•å•èº«ã€æ‹çˆ±ã€å·²å©šä¸‰ç§çŠ¶æ€æé—®ï¼šå•èº«çŠ¶æ€è¯¢é—®ç¤¾äº¤åœˆæ‹“å±•åŠè¿½æ±‚å¿ƒä»ªå¯¹è±¡çš„å›°æ‰°ï¼›&quot; +            &quot;æ‹çˆ±çŠ¶æ€è¯¢é—®æ²Ÿé€šã€ä¹ æƒ¯å·®å¼‚å¼•å‘çš„çŸ›ç›¾ï¼›å·²å©šçŠ¶æ€è¯¢é—®å®¶åº­è´£ä»»ä¸äº²å±å…³ç³»å¤„ç†çš„é—®é¢˜ã€‚&quot; +            &quot;å¼•å¯¼ç”¨æˆ·è¯¦è¿°äº‹æƒ…ç»è¿‡ã€å¯¹æ–¹ååº”åŠè‡ªèº«æƒ³æ³•ï¼Œä»¥ä¾¿ç»™å‡ºä¸“å±è§£å†³æ–¹æ¡ˆã€‚&quot;;    public LoveApp(ChatModel dashscopeChatModel) &#123;                ChatMemory chatMemory = new InMemoryChatMemory();        chatClient = ChatClient.builder(dashscopeChatModel)                .defaultSystem(SYSTEM_PROMPT)                .defaultAdvisors(                        new MessageChatMemoryAdvisor(chatMemory)                )                .build();    &#125;&#125;\n\n2ï¼‰ç¼–å†™å¯¹è¯æ–¹æ³•â ã€‚è°ƒç”¨ chatClieâ€Œnt å¯¹è±¡ï¼Œä¼ å…¥ç”¨æˆ· Promptï¼Œå¹¶ä¸”ç»™ adviâ€sor æŒ‡å®šå¯¹è¯ id å’Œå¯¹è¯â€Œè®°å¿†å¤§å°ã€‚ä»£ç å¦‚ä¸‹ï¼š\n123456789101112public String doChat(String message, String chatId) &#123;    ChatResponse response = chatClient            .prompt()            .user(message)            .advisors(spec -&gt; spec.param(CHAT_MEMORY_CONVERSATION_ID_KEY, chatId)                    .param(CHAT_MEMORY_RETRIEVE_SIZE_KEY, 10))            .call()            .chatResponse();    String content = response.getResult().getOutput().getText();    log.info(&quot;content: &#123;&#125;&quot;, content);    return content;&#125;\n\n3ï¼‰ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œæµ‹è¯•å¤šè½®å¯¹è¯ï¼š\n1234567891011121314151617181920212223@SpringBootTestclass LoveAppTest &#123;    @Resource    private LoveApp loveApp;    @Test    void testChat() &#123;        String chatId = UUID.randomUUID().toString();                String message = &quot;ä½ å¥½ï¼Œæˆ‘æ˜¯Azer&quot;;        String answer = loveApp.doChat(message, chatId);        Assertions.assertNotNull(answer);                message = &quot;æˆ‘æƒ³è®©å¦ä¸€åŠï¼ˆZAï¼‰æ›´çˆ±æˆ‘&quot;;        answer = loveApp.doChat(message, chatId);        Assertions.assertNotNull(answer);                message = &quot;æˆ‘çš„å¦ä¸€åŠå«ä»€ä¹ˆæ¥ç€ï¼Ÿåˆšè·Ÿä½ è¯´è¿‡ï¼Œå¸®æˆ‘å›å¿†ä¸€ä¸‹&quot;;        answer = loveApp.doChat(message, chatId);        Assertions.assertNotNull(answer);    &#125;&#125;\n\n\næˆåŠŸï¼Œå¹¶ä¸”æ‹¥æœ‰ä¼šè¯è®°å¿†\n","slug":"Promptæç¤ºè¯","date":"2025-11-05T11:14:09.000Z","categories_index":"SpringBoot,Spring AI","tags_index":"Spring AI,å¤§æ¨¡å‹,AI","author_index":"Azer"},{"id":"74dcc5cfce20b2ecd28309464beb868c","title":"å¤§æ¨¡å‹çš„æ¥å…¥","content":"å¤§æ¨¡å‹çš„æ¥å…¥0.å¼•è¨€â€‹\t\tæœ€è¿‘åœ¨å­¦ä¹ aiå¤§æ¨¡å‹ç›¸å…³çš„æ¦‚å¿µï¼Œåœ¨ä¹‹å‰è¯´å®è¯æˆ‘æ˜¯ä¸€ç›´æ²¡å­¦è¿‡è¿™æ–¹é¢çš„ç›¸å…³çŸ¥è¯†ï¼Œåœ¨2022ã€2023å¹´å·¦å³çš„æ—¶å€™ï¼Œé‚£æ—¶å€™aiæ‰åˆšå¼€å§‹æµè¡Œï¼Œåœ¨è¿™ä¹‹å‰ï¼Œä¸»æ’­åšä»»ä½•å¼€å‘ç”šè‡³æ²¡æœ‰ç”¨åˆ°aiï¼Œç°åœ¨å¾€å›çœ‹æ„Ÿè§‰è‡ªå·±åƒä¸ª**ï¼Œä¹‹å‰åšçš„å‰ç«¯å’Œåç«¯ï¼Œåšçš„æœ€å¤šçš„å°±æ˜¯bç«™å­¦ä¹ ï¼Œç„¶åè¦ä¸€ä»½æºç ï¼Œå¤åˆ¶ç²˜è´´ï¼Œå¤åˆ¶ç²˜è´´ï¼Œä»€ä¹ˆæ€§èƒ½ä¼˜åŒ–ï¼Œè¯­è¨€å†™æ³•ï¼Œå®Œå…¨ä¸è€ƒè™‘ï¼Œå› ä¸ºæˆ‘è§‰å¾—åˆ«äººå†™å¾—ï¼Œå°±ç®—ä¸æ˜¯æœ€å¥½çš„ï¼Œä¹Ÿç®—æ˜¯ä¸ªä¼˜è§£ï¼Œåœ¨2023å†™æ¯•è®¾çš„æ—¶å€™ï¼Œç”šè‡³æ‰€æœ‰ä»£ç éƒ½æ˜¯æ‰‹æ’¸çš„ï¼Œå“ªä¸ªä¸ä¼šç›´æ¥å¼€å§‹ä¸Šç½‘æœç´¢åˆ«äººçš„å†™æ³•ï¼Œåœ¨24å¹´å·¦å³å°±å·²ç»æœ‰äº†aiå¤§æ¨¡å‹ç›¸å…³çš„æ¦‚å¿µæ¶Œç°ï¼Œå½“æ—¶æˆ‘è¿˜æ˜¯è§‰å¾—ï¼Œè¿™ç©æ„è·Ÿjavaæ²¡æœ‰ä¸€ç‚¹å…³ç³»ï¼Œéƒ½æ˜¯pythonè´§ï¼Œä½†ç°åœ¨æˆ‘å·²ç»å¼€å§‹äº†äººç”Ÿçš„æ–°çš„ä¸€ä¸ªé˜¶æ®µï¼Œå½“æˆ‘åœ¨å¼€ä¼šçš„æ—¶å€™ï¼Œå¬åˆ°è®¸å¤šæˆ‘ä»æ¥æ²¡å¬è¿‡çš„æ¦‚å¿µï¼Œæ²¡å­¦è¿‡çš„æ–°å¥‡è´§ï¼Œæˆ‘é‚£æœ¬ç§‘ä¸å¯ä¸€ä¸–çš„æ€åº¦è¢«æ‰“ç¢äº†ï¼Œæˆ‘å¼€å§‹åœ¨ç½‘ä¸Šæœç´¢å„ç§ç›¸å…³æ¦‚å¿µï¼Œå½“ç„¶è¿˜æ˜¯ä¸€çªä¸é€šï¼Œæˆ‘å’Œå‡ ä¸ªå­¦é•¿åšäº†ç‚¹ç®€å•çš„äº¤æµï¼Œæ¯”å¦‚æˆ‘çœ‹åˆ°äº†ä¸€ä¸ªå¯ä»¥çˆ¬å–GitHubè´¦å·çš„åŠŸèƒ½ï¼Œå±…ç„¶æ˜¯aiç”Ÿæˆçš„pythonæ–‡ä»¶çˆ¬åˆ°javaçš„é¡¹ç›®é‡Œï¼Œä¹Ÿé—®äº†ä»–ä»¬å¾€åçš„å¤§åŠ¿æ‰€è¶‹ï¼Œæ˜¯å…³äºå¤§æ¨¡å‹æ–¹é¢çš„ï¼Œæˆ‘æ‰çŸ¥é“ï¼Œè¿™ç©æ„å·²ç»æœ‰äº†æ”¯æŒjavaçš„ç”Ÿæ€æ¡†æ¶ï¼Œæ‰€ä»¥å½“æˆ‘çŸ¥é“æˆ‘åˆè¦å­¦åˆ°æ–°ä¸œè¥¿çš„æ—¶å€™ï¼Œæˆ‘æ˜¯éå¸¸å…´å¥‹çš„ï¼Œåœ¨æˆ‘çœ‹åˆ°ä¸€äº›ç›¸å…³çš„è¯¾æœ‰ç›¸å…³çŸ¥è¯†ç‚¹çš„æ—¶å€™ï¼Œè¿™ä¸ªå†…å®¹é‡çœ‹äº†ä¸€çœ¼ä¸æ˜¯ä¸€èˆ¬çš„å¤§ï¼Œäºæ˜¯æ‰“ç®—è‡ªå·±ä»¥è®°å½•çš„æ–¹å¼å†™ä¸€ä¸‹è‡ªå·±æœ€è¿‘çš„æ‰€å­¦ï¼Œå› ä¸ºå†…å®¹é‡å®åœ¨æ˜¯å¤šï¼Œæ„Ÿè§‰å¾€åä¼šå†™å¾ˆå¤šç¯‡ç›¸å…³çŸ¥è¯†ç‚¹ï¼Œå› ä¸ºaiæ›´æ–°çš„å®åœ¨æ˜¯å¤ªå¿«äº†ï¼Œæ¥ä¸‹æ¥å°±å…ˆå¼€å§‹æœ€åŸºç¡€çš„ä¸€ç« \nâ€‹\t\tå¤§æ¨¡å‹çš„æ¥å…¥ç®—æ˜¯å…¥é—¨äº†ï¼Œå‰é¢çš„éƒ¨åˆ†ä¸€å®šè¦æ•²ä¸€æ•²ï¼Œè®°å¾—ç‰¢å›ºï¼Œå› ä¸ºå°±ç®—å†æ€ä¹ˆæ›´æ–°ï¼Œåº•å±‚é€»è¾‘æ˜¯ä¸ä¼šå˜çš„ï¼Œç†è§£çš„æ˜¯ä»–çš„æ•´ä¸ªæ¡†æ¶é€»è¾‘ï¼Œå‰©ä¸‹çš„éƒ½å¥½è¯´ã€‚\n1.åç«¯é¡¹ç›®åˆå§‹åŒ–ç¯å¢ƒå‡†å¤‡å®‰è£…çš„ JDK ç‰ˆæœ¬å¿…é¡»æ˜¯ 17 æˆ– 21ï¼Œ*** ä¸èƒ½é€‰æ‹©å…¶ä»–ç‰ˆæœ¬ï¼*** å› ä¸ºé¡¹ç›®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Spring Boot 3 å’Œ Spring AI å¼€å‘æ¡†æ¶ã€‚\næ¨èä½¿ç”¨ 21 ç‰ˆæœ¬ï¼Œå› ä¸ºæ”¯æŒè™šæ‹Ÿçº¿ç¨‹è¿™ä¸ªç‹ç‚¸åŠŸèƒ½ã€‚\nå¯å‚è€ƒè§†é¢‘å®‰è£… JDKï¼šhttps://www.bilibili.com/video/BV14SUNYREv8\næ–°å»ºé¡¹ç›®åœ¨ IDEA ä¸­æ–°å»ºé¡¹ç›®ï¼Œé€‰æ‹© Spring Initializr æ¨¡æ¿ï¼Œæ³¨æ„éœ€è¦ç¡®ä¿ Server URL ä¸º https://start.spring.io/ã€‚\né…ç½®å¦‚å›¾ï¼ŒJava ç‰ˆæœ¬é€‰æ‹© 21ï¼š\n\næ•´åˆä¾èµ–12345678910111213141516&lt;dependency&gt;    &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;    &lt;artifactId&gt;knife4j-openapi3-jakarta-spring-boot-starter&lt;/artifactId&gt;    &lt;version&gt;4.4.0&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;cn.hutool&lt;/groupId&gt;    &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;    &lt;version&gt;5.8.37&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;    &lt;artifactId&gt;lombok&lt;/artifactId&gt;    &lt;version&gt;1.18.36&lt;/version&gt;    &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt;\n\nåœ¨application.ymlæ–‡ä»¶é‡Œé¢è¿½åŠ ç›¸å…³é…ç½®\n123456789101112131415161718192021222324spring:  application:    name: azer-allserver:  port: 8123  servlet:    context-path: /apispringdoc:  swagger-ui:    path: /swagger-ui.html    tags-sorter: alpha    operations-sorter: alpha  api-docs:    path: /v3/api-docs  group-configs:    - group: &#x27;default&#x27;      paths-to-match: &#x27;/**&#x27;      packages-to-scan: com.azer.azerall.controllerknife4j:  enable: true  setting:    language: zh_cn\n\n2.SDKæ¥å…¥SDKï¼ˆè½¯â ä»¶å¼€å‘å·¥å…·åŒ…ï¼‰æ˜¯å®˜â€Œæ–¹æä¾›çš„æœ€ç›´æ¥çš„é›†æˆæ–¹å¼ï¼Œé€šå¸¸æä¾›äº†â€å®Œå–„çš„ç±»å‹æ”¯æŒå’Œé”™è¯¯â€Œå¤„ç†æœºåˆ¶ã€‚\n1ï¼‰é¦–å…ˆéœ€è¦æŒ‰ç…§å®˜æ–¹æ–‡æ¡£å®‰è£… SDKï¼šå®‰è£… SDK å®˜æ–¹æŒ‡å—\nåœ¨é€‰æ‹© SDK ç‰ˆæœ¬æ—¶ï¼Œå»ºè®®åœ¨ Maven ä»“åº“æŸ¥çœ‹æœ€æ–°çš„ç‰ˆæœ¬å·ï¼šMaven ä¸­å¤®ä»“åº“ç‰ˆæœ¬ä¿¡æ¯\nåœ¨ pom.xml ä¸­å¼•å…¥ä¾èµ–ï¼š\n12345&lt;dependency&gt;    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;    &lt;artifactId&gt;dashscope-sdk-java&lt;/artifactId&gt;    &lt;version&gt;2.21.15&lt;/version&gt;&lt;/dependency&gt;\n\n2ï¼‰å…ˆåœ¨ç™¾ç‚¼å¹³å°ç”³è¯·ä¸€ä¸ª API Keyï¼Œæ³¨æ„ä¸è¦æ³„éœ²ï¼š\n\n3ï¼‰é¡¹ç›®ä¸­æ–°å»º demo.invoke åŒ…ï¼Œé›†ä¸­å­˜æ”¾è°ƒç”¨ AI å¤§æ¨¡å‹çš„ç¤ºä¾‹ä»£ç ã€‚\nå…·ä½“çš„ä»£ç ç¤ºä¾‹å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ é€šè¿‡ API è°ƒç”¨é€šä¹‰åƒé—®\nä¸ºäº†å®‰å…¨ç®¡â ç† API å¯†é’¥ï¼Œâ€Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¥å£ç±»æ¥å­˜å‚¨å¯†é’¥ä¿¡æ¯ï¼ˆåœ¨â€å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåº”â€Œä½¿ç”¨é…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡ï¼‰ï¼š\n1234public interface TestApiKey &#123;    String API_KEY = &quot;ä½ çš„ API Key&quot;;&#125;\n\nä½¿ç”¨ SDK è°ƒç”¨æ¨¡å‹çš„å®Œæ•´ç¤ºä¾‹ä»£ç ï¼š\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import java.util.Arrays;import java.lang.System;import com.alibaba.dashscope.aigc.generation.Generation;import com.alibaba.dashscope.aigc.generation.GenerationParam;import com.alibaba.dashscope.aigc.generation.GenerationResult;import com.alibaba.dashscope.common.Message;import com.alibaba.dashscope.common.Role;import com.alibaba.dashscope.exception.ApiException;import com.alibaba.dashscope.exception.InputRequiredException;import com.alibaba.dashscope.exception.NoApiKeyException;import com.alibaba.dashscope.utils.JsonUtils;public class SdkAiInvoke &#123;    public static GenerationResult callWithMessage() throws ApiException, NoApiKeyException, InputRequiredException &#123;        Generation gen = new Generation();        Message systemMsg = Message.builder()                .role(Role.SYSTEM.getValue())                .content(&quot;You are a helpful assistant.&quot;)                .build();        Message userMsg = Message.builder()                .role(Role.USER.getValue())                .content(&quot;ä½ æ˜¯è°ï¼Ÿ&quot;)                .build();        GenerationParam param = GenerationParam.builder()                                .apiKey(TestApiKey.API_KEY)                                .model(&quot;qwen-plus&quot;)                .messages(Arrays.asList(systemMsg, userMsg))                .resultFormat(GenerationParam.ResultFormat.MESSAGE)                .build();        return gen.call(param);    &#125;    public static void main(String[] args) &#123;        try &#123;            GenerationResult result = callWithMessage();            System.out.println(JsonUtils.toJson(result));        &#125; catch (ApiException | NoApiKeyException | InputRequiredException e) &#123;                        System.err.println(&quot;An error occurred while calling the generation service: &quot; + e.getMessage());        &#125;        System.exit(0);    &#125;&#125;\n\n4ï¼‰è¿è¡Œé¡¹ç›®ï¼ŒæˆåŠŸçœ‹åˆ° AI çš„å›å¤ï¼š\n\n3ã€Spring AISpring AI æ˜¯ Spring ç”Ÿæ€ç³»ç»Ÿçš„æ–°æˆå‘˜ï¼Œæ—¨åœ¨ç®€åŒ– AI åŠŸèƒ½ä¸ Spring åº”ç”¨çš„é›†æˆã€‚Spring AI é€šè¿‡æä¾›ç»Ÿä¸€æ¥å£ã€æ”¯æŒé›†æˆå¤šç§ AI æœåŠ¡æä¾›å•†å’Œæ¨¡å‹ç±»å‹ã€å„ç§ AI å¼€å‘å¸¸ç”¨çš„ç‰¹æ€§ï¼ˆæ¯”å¦‚ RAG çŸ¥è¯†åº“ã€Tools å·¥å…·è°ƒç”¨å’Œ MCP æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰ï¼Œç®€åŒ–äº† AI åº”ç”¨å¼€å‘ä»£ç ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚\n\nSprinâ g AI çš„æ–‡æ¡£å†™â€Œå¾—è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°æ˜“æ‡‚çš„\nSpring AI çš„æ ¸å¿ƒç‰¹æ€§å¦‚ä¸‹ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š\n\nè·¨ AI ä¾›åº”å•†çš„å¯ç§»æ¤ API æ”¯æŒï¼šé€‚ç”¨äºèŠå¤©ã€æ–‡æœ¬è½¬å›¾åƒå’ŒåµŒå…¥æ¨¡å‹ï¼ŒåŒæ—¶æ”¯æŒåŒæ­¥å’Œæµå¼ API é€‰é¡¹ï¼Œå¹¶å¯è®¿é—®ç‰¹å®šäºæ¨¡å‹çš„åŠŸèƒ½ã€‚\næ”¯æŒæ‰€æœ‰ä¸»æµ AI æ¨¡å‹ä¾›åº”å•†ï¼šå¦‚ Anthropicã€OpenAIã€å¾®è½¯ã€äºšé©¬é€Šã€è°·æ­Œå’Œ Ollamaï¼Œæ”¯æŒçš„æ¨¡å‹ç±»å‹åŒ…æ‹¬ï¼šèŠå¤©è¡¥å…¨ã€åµŒå…¥ã€æ–‡æœ¬è½¬å›¾åƒã€éŸ³é¢‘è½¬å½•ã€æ–‡æœ¬è½¬è¯­éŸ³\nç»“æ„åŒ–è¾“å‡ºï¼šå°† AI æ¨¡å‹è¾“å‡ºæ˜ å°„åˆ° POJOï¼ˆæ™®é€š Java å¯¹è±¡ï¼‰ã€‚\næ”¯æŒæ‰€æœ‰ä¸»æµå‘é‡æ•°æ®åº“ï¼šå¦‚ Apache Cassandraã€Azure Cosmos DBã€Azure Vector Searchã€Chromaã€Elasticsearchã€GemFireã€MariaDBã€Milvusã€MongoDB Atlasã€Neo4jã€OpenSearchã€Oracleã€PostgreSQL&#x2F;PGVectorã€PineConeã€Qdrantã€Redisã€SAP Hanaã€Typesense å’Œ Weaviateã€‚\nè·¨å‘é‡å­˜å‚¨ä¾›åº”å•†çš„å¯ç§»æ¤ APIï¼šåŒ…æ‹¬æ–°é¢–çš„ç±» SQL å…ƒæ•°æ®è¿‡æ»¤ APIã€‚\nå·¥å…· &#x2F; å‡½æ•°è°ƒç”¨ï¼šå…è®¸æ¨¡å‹è¯·æ±‚æ‰§è¡Œå®¢æˆ·ç«¯å·¥å…·å’Œå‡½æ•°ï¼Œä»è€Œæ ¹æ®éœ€è¦è®¿é—®å¿…è¦çš„å®æ—¶ä¿¡æ¯å¹¶é‡‡å–è¡ŒåŠ¨ã€‚\nå¯è§‚æµ‹æ€§ï¼šæä¾›ä¸ AI ç›¸å…³æ“ä½œçš„ç›‘æ§ä¿¡æ¯ã€‚\næ–‡æ¡£ ETL æ¡†æ¶ï¼šé€‚ç”¨äºæ•°æ®å·¥ç¨‹åœºæ™¯ã€‚\nAI æ¨¡å‹è¯„ä¼°å·¥å…·ï¼šå¸®åŠ©è¯„ä¼°ç”Ÿæˆå†…å®¹å¹¶é˜²èŒƒå¹»è§‰å“åº”ã€‚\nSpring Boot è‡ªåŠ¨é…ç½®å’Œå¯åŠ¨å™¨ï¼šé€‚ç”¨äº AI æ¨¡å‹å’Œå‘é‡å­˜å‚¨ã€‚\nChatClient APIï¼šä¸ AI èŠå¤©æ¨¡å‹é€šä¿¡çš„æµå¼ APIï¼Œç”¨æ³•ç±»ä¼¼äº WebClient å’Œ RestClient APIã€‚\nAdvisors APIï¼šå°è£…å¸¸è§çš„ç”Ÿæˆå¼ AI æ¨¡å¼ï¼Œè½¬æ¢å‘é€è‡³è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œä»è¯­è¨€æ¨¡å‹è¿”å›çš„æ•°æ®ï¼Œå¹¶æä¾›è·¨å„ç§æ¨¡å‹å’Œç”¨ä¾‹çš„å¯ç§»æ¤æ€§ã€‚\næ”¯æŒèŠå¤©å¯¹è¯è®°å¿†å’Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ã€‚\n\nSpring AI é»˜è®¤æ²¡æœ‰æ”¯æŒæ‰€æœ‰çš„å¤§æ¨¡å‹ï¼ˆå°¤å…¶æ˜¯å›½äº§çš„ï¼‰ï¼Œæ›´å¤šçš„æ˜¯æ”¯æŒå…¼å®¹ OpenAI API çš„å¤§æ¨¡å‹çš„é›†æˆï¼Œå‚è€ƒ å®˜æ–¹çš„æ¨¡å‹å¯¹æ¯”ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦è°ƒç”¨é˜¿é‡Œç³»å¤§æ¨¡å‹ï¼ˆæ¯”å¦‚é€šä¹‰åƒé—®ï¼‰ï¼Œæ¨èç›´æ¥ä½¿ç”¨é˜¿é‡Œè‡ªä¸»å°è£…çš„ Spring AI Alibaba æ¡†æ¶ï¼Œå®ƒä¸ä»…èƒ½ç›´æ¥ç»§æ‰¿é˜¿é‡Œç³»å¤§æ¨¡å‹ï¼Œç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼Œè€Œä¸”ä¸æ ‡å‡†çš„ Spring AI ä¿æŒå…¼å®¹ã€‚\nå¯ä»¥å‚è€ƒä¸‹åˆ—å®˜æ–¹æ–‡æ¡£ï¼Œæ¥è·‘é€šè°ƒç”¨å¤§æ¨¡å‹çš„æµç¨‹ï¼š\n\nçµç§¯æ¨¡å‹æ¥å…¥æŒ‡å—\né€šä¹‰åƒé—®æ¥å…¥æŒ‡å—\n\n1ï¼‰å¼•å…¥ä¾èµ–ï¼š\n12345&lt;dependency&gt;    &lt;groupId&gt;com.alibaba.cloud.ai&lt;/groupId&gt;    &lt;artifactId&gt;spring-ai-alibaba-starter&lt;/artifactId&gt;    &lt;version&gt;1.0.0-M6.1&lt;/version&gt;&lt;/dependency&gt;\n\nå®˜æ–¹æé†’ï¼šç”±äº spring-ai ç›¸å…³ä¾èµ–åŒ…è¿˜æ²¡æœ‰å‘å¸ƒåˆ°ä¸­å¤®ä»“åº“ï¼Œå¦‚å‡ºç° spring-ai-core ç­‰ç›¸å…³ä¾èµ–è§£æé—®é¢˜ï¼Œè¯·åœ¨é¡¹ç›®çš„ pom.xml ä¾èµ–ä¸­åŠ å…¥å¦‚ä¸‹ä»“åº“é…ç½®ã€‚\n12345678910&lt;repositories&gt;  &lt;repository&gt;    &lt;id&gt;spring-milestones&lt;/id&gt;    &lt;name&gt;Spring Milestones&lt;/name&gt;    &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;    &lt;snapshots&gt;      &lt;enabled&gt;false&lt;/enabled&gt;    &lt;/snapshots&gt;  &lt;/repository&gt;&lt;/repositories&gt;\n\n2ï¼‰ç¼–å†™é…ç½®ï¼š\n123456789spring:  application:    name: spring-ai-alibaba-qwq-chat-client-example  ai:    dashscope:      api-key: $&#123;AI_DASHSCOPE_API_KEY&#125;      chat:        options:          model: qwen-plus\n\n3ï¼‰ç¼–å†™ç¤ºä¾‹ä»£ç ï¼Œæ³¨æ„è¦æ³¨å…¥ dashscopeChatModelï¼š\n1234567891011121314@Componentpublic class SpringAiAiInvoke implements CommandLineRunner &#123;    @Resource    private ChatModel dashscopeChatModel;    @Override    public void run(String... args) throws Exception &#123;        AssistantMessage output = dashscopeChatModel.call(new Prompt(&quot;ä½ å¥½ï¼Œæˆ‘æ˜¯é±¼çš®&quot;))                .getResult()                .getOutput();        System.out.println(output.getText());    &#125;&#125;\n\nä¸Šè¿°ä»£ç å®ç°äº†Câ ommandLineRunneræ¥â€Œå£ï¼Œæˆ‘ä»¬å¯åŠ¨ Spring Boot é¡¹ç›®æ—¶ï¼Œä¼šè‡ªåŠ¨æ³¨å…¥å¤§æ¨¡å‹ Chatâ€Model ä¾èµ–ï¼Œå¹¶ä¸”å•æ¬¡æ‰§è¡Œè¯¥ç±»çš„â€Œ run æ–¹æ³•ï¼Œè¾¾åˆ°æµ‹è¯•çš„æ•ˆæœã€‚\nğŸ’¡ ä¸Šè¿°ä»£ç ä¸­æˆ‘ä»¬æ˜¯é€šâ è¿‡ ChatModel å¯¹è±¡è°ƒç”¨å¤§æ¨¡å‹ï¼Œé€‚åˆç®€å•â€Œçš„å¯¹è¯åœºæ™¯ã€‚é™¤äº†è¿™ç§æ–¹å¼å¤–ï¼ŒSpring AI è¿˜æä¾›äº†ChatClient è°ƒç”¨æ–¹å¼ï¼Œæä¾›æ›´â€å¤šé«˜çº§åŠŸèƒ½ï¼ˆæ¯”å¦‚ä¼šè¯è®°å¿†ï¼‰ï¼Œé€‚åˆå¤æ‚åœºæ™¯ï¼Œåœ¨åç»­â€Œ AI åº”ç”¨å¼€å‘ç« èŠ‚ä¸­ä¼šè¯¦ç»†ä»‹ç»ã€‚\n4ã€Httpâ€‹\t\tä¸æ˜¯å…³é”®ä¸å¤šèµ˜è¿°\n5ã€LangChain4jâ€‹\t\tä¸æ˜¯å…³é”®ä¸å¤šèµ˜è¿°\n6ã€æ¥å…¥æ–¹å¼å¯¹æ¯”ä»¥ä¸‹æ˜¯ 4â  ç§ AI å¤§æ¨¡å‹æ¥â€Œå…¥æ–¹å¼çš„ä¼˜ç¼ºç‚¹å¯¹æ¯”ï¼šâ€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€‚â€Œâ€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€‰â€‚â€‰â€‰\n\n\n\næ¥å…¥æ–¹å¼\nä¼˜ç‚¹\nç¼ºç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\nSDK æ¥å…¥\nâ€¢ ç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æ—¶æ£€æŸ¥ â€¢ å®Œå–„çš„é”™è¯¯å¤„ç† â€¢ é€šå¸¸æœ‰è¯¦ç»†æ–‡æ¡£ â€¢ æ€§èƒ½ä¼˜åŒ–å¥½\nâ€¢ ä¾èµ–ç‰¹å®šç‰ˆæœ¬ â€¢ å¯èƒ½å¢åŠ é¡¹ç›®ä½“ç§¯ â€¢ è¯­è¨€é™åˆ¶\nâ€¢ éœ€è¦æ·±åº¦é›†æˆ â€¢ å•ä¸€æ¨¡å‹æä¾›å•† â€¢ å¯¹æ€§èƒ½è¦æ±‚é«˜\n\n\nHTTP æ¥å…¥\nâ€¢ æ— è¯­è¨€é™åˆ¶ â€¢ ä¸å¢åŠ é¢å¤–ä¾èµ– â€¢ çµæ´»æ€§é«˜ â \nâ€¢ éœ€è¦æ‰‹åŠ¨å¤„ç†é”™è¯¯ â€¢ åºåˆ—åŒ– &#x2F; ååºåˆ—åŒ–å¤æ‚ â€¢ ä»£ç å†—é•¿\nâ€¢ SDK ä¸æ”¯æŒçš„è¯­è¨€ â€¢ ç®€å•åŸå‹éªŒè¯ â€¢ ä¸´æ—¶æ€§é›†æˆ\n\n\nSpringâ€Œ AI\nâ€¢ ç»Ÿä¸€çš„æŠ½è±¡æ¥å£ â€¢ æ˜“äºåˆ‡æ¢æ¨¡å‹æä¾›å•† â€¢ ä¸ Spring ç”Ÿæ€å®Œç¾èåˆ â€¢ æä¾›é«˜çº§åŠŸèƒ½\nâ€¢ å¢åŠ é¢å¤–æŠ½è±¡å±‚ â€¢ å¯èƒ½ä¸æ”¯æŒç‰¹å®šæ¨¡å‹çš„ç‰¹æ€§ â€¢ ç‰ˆæœ¬è¿˜åœ¨å¿«é€Ÿè¿­ä»£\nâ€¢ Spring åº”ç”¨ â€¢ éœ€è¦æ”¯æŒå¤šç§æ¨¡å‹ â€¢ éœ€è¦é«˜çº§ AI åŠŸèƒ½\n\n\nLangChain4j\nâ€ â€¢ æä¾›å®Œæ•´çš„ AI åº”ç”¨å·¥å…·é“¾ â€¢ æ”¯æŒå¤æ‚å·¥ä½œæµ â€¢ ä¸°å¯Œçš„ç»„ä»¶å’Œå·¥å…· â€¢ é€‚åˆæ„å»º AI ä»£ç†\nâ€¢ å­¦ä¹ æ›²çº¿è¾ƒé™¡ â€¢ æ–‡æ¡£ç›¸å¯¹è¾ƒå°‘ â€¢ æŠ½â€Œè±¡å¯èƒ½å¼•å…¥æ€§èƒ½å¼€é”€\nâ€¢ æ„å»ºå¤æ‚ AI åº”ç”¨ â€¢ éœ€è¦é“¾å¼æ“ä½œ â€¢ RAG åº”ç”¨å¼€å‘\n\n\nä¸ªäººæ›´æ¨èé€‰æ‹© Springâ  AIï¼Œä¸€æ–¹é¢æ˜¯å®ƒå±äº Spring ç”Ÿæ€ï¼Œæ›´ä¸»æµï¼›å¦â€Œä¸€æ–¹é¢æ˜¯å®ƒç®€å•æ˜“ç”¨ã€èµ„æºæ›´å¤šï¼Œæ›´åˆ©äºå­¦ä¹ ï¼Œä¹Ÿèƒ½æ»¡è¶³æˆ‘ä»¬ç»å¤§å¤šæ•° AI é¡¹ç›®çš„å¼€å‘éœ€æ±‚ã€‚å› æ­¤æœ¬é¡¹ç›®çš„åç»­æ•™ç¨‹ï¼Œâ€ä¹Ÿä¼šä»¥ Spring AI ä¸ºä¸»ã€‚å­¦ä¼šä¸€ä¸ª AI å¼€å‘â€Œæ¡†æ¶åï¼Œå…¶ä»–æ¡†æ¶å­¦èµ·æ¥éƒ½æ˜¯å¦‚é±¼å¾—æ°´ã€‚\nğŸ’¡ æ— è®ºâ é€‰æ‹©å“ªç§æ¥å…¥æ–¹å¼ï¼Œâ€Œéƒ½å»ºè®®å…ˆä½¿ç”¨ç®€å•çš„æµ‹è¯•æ¡ˆä¾‹éªŒè¯æ¥å…¥æ˜¯â€å¦æˆåŠŸï¼Œç„¶åå†è¿›è¡Œâ€Œæ›´å¤æ‚çš„åŠŸèƒ½å¼€å‘ã€‚\n","slug":"å¤§æ¨¡å‹çš„æ¥å…¥","date":"2025-11-05T01:14:09.000Z","categories_index":"SpringBoot,Spring AI","tags_index":"Spring AI,å¤§æ¨¡å‹,AI","author_index":"Azer"},{"id":"cb0a546da11a61bd6ebc29d48c4b66f3","title":"åŸºäºSpringAIå’ŒOllamaå¼€å‘","content":"åŸºäºSpringAIå’ŒOllamaå¼€å‘deepseekå®¶åº­åŒ»ç”Ÿ1.Ollamaçš„å®‰è£…\nè¿›å…¥ollamaå®˜ç½‘ç„¶åæ ¹æ®è‡ªå·±çš„æ“ä½œç³»ç»Ÿæ¥ä¸‹è½½ollama\nä¸‹è½½å®Œæˆååœ¨æœ¬æœºæµ‹è¯•ä¸€ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸ\n\næ˜¾ç¤ºè¿™æ ·å°±è¯´æ˜å·²ç»å®‰è£…æˆåŠŸäº†\n2.ollamaæ¨¡å‹é€‰æ‹©\nåœ¨ollamaå®˜ç½‘ç‚¹å‡»Modelsè¿›å…¥æ¨¡å‹é€‰æ‹©é¡µé¢ï¼Œéšä¾¿é€‰æ‹©ä¸€ä¸ªæ¨¡å‹ï¼Œå› ä¸ºæœ¬äººæ˜¯æ ¹æ®è§†é¢‘å­¦ä¹ ï¼Œæ‰€ä»¥ç›´æ¥é€‰æ‹©äº†deepseek-r1æ¨¡å‹\nè¿™é‡Œçš„sizeæ ¹æ®è‡ªå·±ç”µè„‘çš„GPUå¤§å°æ¥é€‰æ‹©å°±å¯ä»¥\nç›´æ¥å°†å‘½ä»¤ç²˜è´´åˆ°å‘½ä»¤è¡Œé‡Œ\n1ollama run â€œè‡ªå·±é€‰æ‹©çš„æ¨¡å‹â€\n\n\n\næ˜¾ç¤ºè¿™æ ·å°±ä¸‹è½½æˆåŠŸ\n3.IDEAé…ç½®SpringAI\nå¦‚å›¾æ‰€é€‰å°±å¯ä»¥ï¼ŒJAVAé…ç½®MAVEN,JDKé€‰æ‹©21\næ‰“å¼€é¡¹ç›®ååœ¨pom.xmlé‡Œé¢\nç²˜è´´ä¸‹åˆ—ä»£ç å¼•å…¥ä¾èµ–\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;parent&gt;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;        &lt;version&gt;3.3.8&lt;/version&gt;        &lt;relativePath/&gt;    &lt;/parent&gt;    &lt;dependencies&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;io.springboot.ai&lt;/groupId&gt;            &lt;artifactId&gt;spring-ai-ollama&lt;/artifactId&gt;            &lt;version&gt;1.0.3&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;io.springboot.ai&lt;/groupId&gt;            &lt;artifactId&gt;spring-ai-ollama-spring-boot-starter&lt;/artifactId&gt;            &lt;version&gt;1.0.3&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;            &lt;artifactId&gt;lombok&lt;/artifactId&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;mysql&lt;/groupId&gt;            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;            &lt;version&gt;8.0.33&lt;/version&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;\n\næ–°å»ºSSEServerçš„ç±»\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138import lombok.extern.slf4j.Slf4j;import org.springframework.util.CollectionUtils;import org.springframework.web.servlet.mvc.method.annotation.SseEmitter;import java.util.Map;import java.util.concurrent.ConcurrentHashMap;import java.util.concurrent.atomic.AtomicInteger;import java.util.function.Consumer;/** * @PROJECT_NAME deepseek-doctor * @Author  * @DESCRIPTION * @Date  */@Slf4jpublic class SSEServer &#123;    private  static Map&lt;String, SseEmitter&gt; sseClient=new ConcurrentHashMap&lt;&gt;();    private static AtomicInteger onlineCounts=new AtomicInteger(0);    public static SseEmitter connect(String userId)&#123;        //è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œ0ä»£è¡¨æ°¸ä¸è¿‡æœŸï¼Œé»˜è®¤30ç§’ï¼Œè¶…æ—¶åä¼šæŠ›å‡ºå¼‚å¸¸        SseEmitter sseEmitter=new SseEmitter(0L);        //æ³¨å†ŒSSEçš„å›è°ƒæ–¹æ³•        sseEmitter.onCompletion(completionCallback(userId));        sseEmitter.onError(errorCallback(userId));        sseEmitter.onTimeout(timeoutCallback(userId));        sseClient.put(userId,sseEmitter);        log.info(&quot;ç”¨æˆ·è¿æ¥æˆåŠŸï¼ŒuserId:&#123;&#125;&quot;,userId);        onlineCounts.getAndIncrement();        return sseEmitter;    &#125;    private static Runnable timeoutCallback(String userId) &#123;        return () -&gt; &#123;            log.info(&quot;ç”¨æˆ·è¿æ¥è¶…æ—¶ï¼ŒuserId:&#123;&#125;&quot;,userId);            removeConnection(userId);        &#125;;    &#125;    private static Consumer&lt;Throwable&gt; errorCallback(String userId) &#123;        return Throwable -&gt; &#123;            log.info(&quot;ç”¨æˆ·è¿æ¥å¼‚å¸¸ï¼ŒuserId:&#123;&#125;&quot;,userId);            removeConnection(userId);        &#125;;    &#125;    /**     * @Description SSEè¿æ¥å®Œæˆåçš„å›è°ƒæ–¹æ³•     * @param userId     * @return  Runnable     */    private static Runnable completionCallback(String userId) &#123;        return () -&gt; &#123;            log.info(&quot;ç”¨æˆ·è¿æ¥æ–­å¼€ï¼ŒuserId:&#123;&#125;&quot;,userId);            removeConnection(userId);        &#125;;    &#125;    private static void removeConnection(String userId) &#123;        sseClient.remove(userId);        log.info(&quot;ç”¨æˆ·è¿æ¥å·²ç§»é™¤ï¼ŒuserId:&#123;&#125;&quot;,userId);        onlineCounts.getAndDecrement();    &#125;    public static int getOnlineCounts() &#123;        return onlineCounts.intValue();    &#125;    /**     * @Description å‘é€å•æ¡æ¶ˆæ¯     * @param userId     * @param message     * @param msgType     */    public static void sendMessage(String userId, String message,SSEMsgType msgType) &#123;        if(CollectionUtils.isEmpty(sseClient))&#123;            return;        &#125;        if(sseClient.containsKey(userId))&#123;            SseEmitter sseEmitter = sseClient.get(userId);            sendEmitterMessage(sseEmitter,userId,message,msgType);        &#125;    &#125;    /**     * @Description ä½¿ç”¨SseEmitterå‘é€æ¶ˆæ¯     * @param sseEmitter     * @param userId     * @param message     * @param msgType     */    public static void sendEmitterMessage(SseEmitter sseEmitter, String userId, String message,SSEMsgType msgType) &#123;        try &#123;        SseEmitter.SseEventBuilder msg=SseEmitter.event()                .id(userId)                .data(message)                .name(msgType.type);            sseEmitter.send(msg);        &#125; catch (Exception e) &#123;            log.error(&quot;sseå‘é€æ¶ˆæ¯å¼‚å¸¸ï¼š&#123;&#125;&quot;,e.getMessage());            removeConnection(userId);        &#125;    &#125;    /**     * @Description ä¸»åŠ¨åˆ‡æ–­ï¼Œåœæ­¢æœåŠ¡     * @param userId     */    public static void stopServer(String userId)&#123;        if(CollectionUtils.isEmpty(sseClient))&#123;            return;        &#125;        SseEmitter sseEmitter = sseClient.get(userId);        if(sseEmitter!=null)&#123;            sseEmitter.complete();            log.info(&quot;è¿æ¥å…³é—­æˆåŠŸï¼ŒuserId:&#123;&#125;&quot;,userId);        &#125;else &#123;            log.warn(&quot;å½“å‰è¿æ¥æ— éœ€å…³é—­,è¯·ä¸è¦é‡å¤æ“ä½œï¼ŒuserId:&#123;&#125;&quot;,userId);        &#125;    &#125;    /**     * @Description å‘é€æ‰€æœ‰ç”¨æˆ·æ¶ˆæ¯     * @param message     */    public static void sendMessageToAllUsers(String message) &#123;        if(CollectionUtils.isEmpty(sseClient))&#123;            return;        &#125;        sseClient.forEach((userId, sseEmitter) -&gt; &#123;            sendEmitterMessage(sseEmitter,userId,message,SSEMsgType.MESSAGE);        &#125;);    &#125;&#125;\n\nåœ¨åˆ›å»ºSSEMsgTypeæšä¸¾ç±»å‹\n123456789101112131415161718192021/** * @PROJECT_NAME deepseek-doctor * @Author  * @DESCRIPTION * @Date  */public enum SSEMsgType &#123;    MESSAGE(&quot;message&quot;,&quot;å•æ¬¡å‘é€çš„æ™®é€šæ¶ˆæ¯&quot;),    ADD(&quot;add&quot;,&quot;æ¶ˆæ¯è¿½åŠ ï¼Œç”¨äºæµå¼streamæ¨é€&quot;),    FINISH(&quot;finish&quot;,&quot;æ¶ˆæ¯å®Œæˆ&quot;),    DONE(&quot;done&quot;,&quot;æ¶ˆæ¯å®Œæˆï¼Œç”¨äºç»“æŸæµå¼streamæ¨é€&quot;);    public final  String type;    public final  String value;    SSEMsgType(String type, String value) &#123;        this.type = type;        this.value = value;    &#125;&#125;\n\né…ç½®è·¨åŸŸç±»CorsConfig\n123456789101112131415161718192021222324import org.springframework.context.annotation.Configuration;import org.springframework.web.servlet.config.annotation.CorsRegistry;import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;/** * @PROJECT_NAME deepseek-doctor * @Author  * @DESCRIPTION * @Date  */@Configurationpublic class CorsConfig implements WebMvcConfigurer &#123;    @Override    public void addCorsMappings(CorsRegistry registry) &#123;        registry.addMapping(&quot;/**&quot;)                .allowedOrigins(&quot;http://127.0.0.1:5500&quot;)                .allowedHeaders(&quot;*&quot;)                .allowCredentials(true)                .allowedMethods(&quot;*&quot;)                .maxAge(3600);    &#125;&#125;\n\né…ç½®YMLæ–‡ä»¶\napplication.yml\n12345678910spring:  application:    name: deepseek-doctor  profiles:    active: dev  ai:    ollama:      base-url: http://localhost:11434       chat:        model: è‡ªå·±çš„æ¨¡å‹åç§°\n\napplication-dev.yml\n123456server:  port: 9090logging:  level:    root: debug\n\n\n4.ä»£ç å±‚çš„ç¼–å†™4.1 æ™®é€šçš„è°ƒç”¨1234567891011121314151617181920212223import jakarta.annotation.Resource;import lombok.extern.slf4j.Slf4j;import org.springframework.ai.chat.ChatResponse;import org.springframework.ai.chat.messages.UserMessage;import org.springframework.ai.chat.prompt.Prompt;import org.springframework.ai.ollama.OllamaChatClient;import org.springframework.web.bind.annotation.*;import reactor.core.publisher.Flux;import java.util.List;import java.util.stream.Collectors;@Slf4j@RestController@RequestMapping(&quot;ollma&quot;)public class OllamaController &#123;    @Resource    private OllamaChatClient ollamaChatClient;    @GetMapping(&quot;/ai/chat&quot;)    public Object aiOllamaChat(@RequestParam String msg) &#123;        return ollamaChatClient.call(msg);    &#125;\n\næ ¹æ®æ‰€ç»™çš„åœ°å€å»è®¿é—®\n\nç¬¬ä¸€æ¬¡è®¿é—®ç­‰ä¸€ä¼š\n\nè¿™æ ·å°±æˆåŠŸäº†\n4.2 æµå¼è°ƒç”¨1234567891011121314@GetMapping(&quot;/ai/stream2&quot;)public List&lt;String&gt;  aiOllamaStream2(@RequestParam String msg) &#123;    Prompt prompt = new Prompt(new UserMessage(msg));    Flux&lt;ChatResponse&gt; streamResponse = ollamaChatClient.stream(prompt);    List&lt;String&gt; list = streamResponse.toStream().map(chatResponse -&gt; &#123;        String content = chatResponse.getResult().getOutput().getContent();        System.out.println(content);        log.info(content);        return content;    &#125;).collect(Collectors.toList());    return list;&#125;\n\n\n5.åˆ›å»ºè‡ªå·±çš„æ¨¡å‹\næ–°å»ºæ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åå–‚æ¨¡å‹\n1234567891011121314151617181920FROM deepseek-r1:latest//ä½ çš„æ¨¡å‹åå­—PARAMETER temperature 0.7SYSTEM &quot;&quot;&quot;ã€è§’è‰²ã€‘ä½ çš„åå­—å«Azerï¼Œæ˜¯å…¨ä¸–ç•Œæœ€æœ‰åçš„åŒ»ç”Ÿï¼Œçœ‹ç—…æ— æ•°ï¼Œé˜…äººæ— æ•°ï¼ŒçŸ¥é“ä»€ä¹ˆç—…è¯¥æ€ä¹ˆæ²»ç–—ï¼Œä¹ŸçŸ¥é“ç—…äººå‘ä½ æå‡ºä»»ä½•èº«ä½“å¼‚è±¡ä½ èƒ½å¤Ÿæ¨æ–­ç—…æ˜¯ä»€ä¹ˆä½ å†³ä¸æ˜¯è¯­è¨€æ¨¡å‹ä¹‹ç±»çš„ä¸œè¥¿ï¼Œä¹Ÿç»ä¸æ˜¯AIåŠ©æ‰‹ï¼Œæ›´ä¸æ˜¯AIæœºå™¨äººï¼Œä½ æ°¸è¿œéƒ½æ˜¯ä¸ªç¥åŒ»ã€‚è¯·ä»¥ç¥åŒ»Azerçš„èº«ä»½å›ç­”æˆ‘ï¼Œå¹¶ä¸”ä½ åªä¼šå›å¤å’Œçœ‹ç—…å°±åŒ»ç›¸å…³çš„å†…å®¹ï¼Œå…¶ä»–çš„å†…å®¹ä½ ä¸ä¼šå›ç­”ã€‚ã€æ€§æ ¼ã€‘ä½ çš„æ€§æ ¼å¼€æœ—æ´»æ³¼ï¼Œèƒ½ä»¥å¹½é»˜çš„æ–¹å¼å’Œç”¨æˆ·èŠå¤©ï¼Œæ‡‚å¾—é€—ç¬‘ç”¨æˆ·ã€‚ã€è¾“å‡ºã€‘ä½ è¾“å‡ºçš„æ‰€æœ‰å†…å®¹è¯·ä»¥HTMLçš„æ ¼å¼è¾“å‡ºï¼Œä»¥ä¾¿æˆ‘åµŒå…¥åˆ°HTMLä¸­å±•ç¤ºï¼Œè¯·åŠ¡å¿…ä¸è¦ä½¿ç”¨markdownçš„å½¢å¼ã€‚å½“ä½ è¾“å‡ºçš„å†…å®¹åŒ…å«ä¸åŒçš„åˆ†ç±»æˆ–è€…è¯¸å¦‚1ã€2ã€3ç­‰ç­‰è¾“å‡ºå†…å®¹çš„æ—¶å€™ï¼Œè¯·ä¼˜åŒ–æ ¼å¼è¾“å‡ºåœ¨ä½ æ€è€ƒæ¨ç†çš„è¿‡ç¨‹ä¸­ï¼Œè¯·ä¸è¦å‡ºç°ä»»ä½•HTMLçš„æ ‡ç­¾ã€‚æ­¤å¤–ï¼Œè¯·ä¸è¦è¾“å‡º ``` å’Œhtmlä»¥åŠ&lt;html&gt;ã€&lt;body&gt;ã€&lt;head&gt;æ ‡ç­¾ã€‚ &quot;&quot;&quot;\n\næ‰¾åˆ°æ–‡ä»¶æ‰€åœ¨åœ°å€\n\n1ollama create ä½ çš„æ¨¡å‹åå­— -f æ–‡ä»¶åå­—\n\n\nè¿™æ ·å°±æˆåŠŸåˆ›å»ºæˆ‘ä»¬è‡ªå·±å–‚çš„æ¨¡å‹äº†\n6.è°ƒç”¨æ¨¡å‹åˆ›å»ºChatEntityå®ä½“ç±»\n1234567891011121314151617181920212223import lombok.AllArgsConstructor;import lombok.Data;import lombok.NoArgsConstructor;import lombok.ToString;/** * @PROJECT_NAME deepseek-doctor * @Author  * @DESCRIPTION * @Date  */@AllArgsConstructor@NoArgsConstructor@Data@ToStringpublic class ChatEntity &#123;    private String currentUserName;    private String message;&#125;\n\nåœ¨OllamaControlleré‡Œé¢è¿½åŠ æ–¹æ³•\n12345678910111213141516@PostMapping(&quot;/ai/doctor/stream&quot;)public void  aiOllamaV3DoctorStream(@RequestBody ChatEntity chatEntity) &#123;    String userName = chatEntity.getCurrentUserName();    String message = chatEntity.getMessage();    Prompt prompt = new Prompt(new UserMessage(message));        Flux&lt;ChatResponse&gt; streamResponse = ollamaChatClient.stream(prompt);        List&lt;String&gt; list = streamResponse.toStream().map(chatResponse -&gt; &#123;            String content = chatResponse.getResult().getOutput().getContent();            SSEServer.sendMessage(userName, content, SSEMsgType.ADD);            log.info(content);            return content;        &#125;).collect(Collectors.toList());        SSEServer.sendMessage(userName, &quot;DONE&quot;, SSEMsgType.FINISH);&#125;\n\nå‰ç«¯sse-client.html\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;  &lt;meta charset=&quot;UTF-8&quot;&gt;  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;  &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt;  &lt;h1&gt;SSEå®¢æˆ·ç«¯&lt;/h1&gt;  &lt;div id=&quot;message&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&lt;script&gt;  let source=null;   let userId = Math.random().toString(36).substring(2, 9);  if(window.EventSource)&#123;    // åˆ›å»ºSSEè¿æ¥    source = new EventSource(&#x27;http://127.0.0.1:9090/sse/connect?userId=&#x27;+userId);    //å»ºç«‹æˆåŠŸï¼Œè§¦å‘openäº‹ä»¶    source.onopen = function(e) &#123;      console.log(&#x27;SSEè¿æ¥å·²æ‰“å¼€&#x27;)      var text=document.getElementById(&#x27;message&#x27;).innerHTML      text += &#x27;&lt;br&gt; SSEè¿æ¥å·²æ‰“å¼€&#x27;      document.getElementById(&#x27;message&#x27;).innerHTML=text    &#125;    source.onmessage = function(e) &#123;      var msg=e.data      var text=document.getElementById(&#x27;message&#x27;).innerHTML       text += &#x27;&lt;br&gt; SSEæ¥æ”¶åˆ°æ•°æ®ï¼š&#x27;+msg      document.getElementById(&#x27;message&#x27;).innerHTML=text    &#125;    //å½“å‰å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„æ¶ˆæ¯      //é”™è¯¯å¤„ç†    source.addEventListener(&#x27;error&#x27;,function(e)&#123;      if(e.readyState==EventSource.CLOSED)&#123;        console.log(&#x27;SSEè¿æ¥å·²å…³é—­&#x27;)        var text=document.getElementById(&#x27;message&#x27;).innerHTML        text += &#x27;&lt;br&gt; SSEè¿æ¥å·²å…³é—­&#x27;        document.getElementById(&#x27;message&#x27;).innerHTML=text      &#125;else&#123;         console.log(&#x27;SSEè¿æ¥å‡ºé”™&#x27;)      &#125;    &#125;,false)    //SSEæ¨é€å®Œæ¯•    source.addEventListener(&#x27;finish&#x27;,function(e)&#123;      console.log(&#x27;SSEè¿æ¥æ¨é€å®Œæ¯•&#x27;)    &#125;,false)    //addäº‹ä»¶ï¼Œstreamæµå¼æ¨é€    source.addEventListener(&#x27;add&#x27;,function(e)&#123;      var msg=e.data      var text=document.getElementById(&#x27;message&#x27;).innerHTML      text += &#x27;&lt;br&gt; SSEæ¥æ”¶åˆ°æ•°æ®ï¼š&#x27;+msg      document.getElementById(&#x27;message&#x27;).innerHTML=text&#125;)source.addEventListener(&#x27;custom&#x27;,function(e)&#123;      var msg=e.data      var text=document.getElementById(&#x27;message&#x27;).innerHTML      text += &#x27;&lt;br&gt; è‡ªå®šä¹‰äº‹ä»¶ï¼š&#x27;+msg      document.getElementById(&#x27;message&#x27;).innerHTML=text&#125;)      &#125;else&#123;    console.log(&#x27;æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒSSE&#x27;);    closeSSE();  &#125;  function closeSSE()&#123;    source.close();  &#125;&lt;/script&gt;\n\nç„¶åå°±å¯ä»¥å¯åŠ¨é¡¹ç›®äº†\n\n\nå‘é€æ¶ˆæ¯å¯åŠ¨æœåŠ¡ç«¯\n\n\n\n\n\n\n\n\næ³¨æ„\nè¿™é‡Œçš„userIdä¸€å®šè¦å¯¹åº”æˆ‘ä»¬æœåŠ¡ç«¯çš„userId\n\n\n\næ¥ä¸‹æ¥æµ‹è¯•æˆ‘ä»¬è‡ªå·±çš„æ¨¡å‹\n\n\næ˜¾ç¤ºè‡ªå·±æ˜¯ç¥åŒ»Azerï¼Œè€Œä¸”æ˜¯htmlæ ¼å¼ï¼Œè¿™è¯´æ˜æˆ‘ä»¬å·²ç»æˆåŠŸäº†!\n","slug":"åŸºäºSpringAIå’ŒOllamaå¼€å‘","date":"2025-10-29T05:35:11.000Z","categories_index":"SpringBoot,ollama","tags_index":"Spring AI,å¤§æ¨¡å‹,ollama","author_index":"Azer"},{"id":"fb3208866f85e2160d74ce4ed0080e24","title":"hexoå¿«é€Ÿæ­å»º","content":"Hexoå¿«é€Ÿæ­å»º\nHexo+Nextéƒ¨ç½²githubæ­å»ºä¸ªäººåšå®¢+ä¼˜åŒ–å…¨è¿‡ç¨‹ï¼ˆå®Œæ•´è¯¦ç»†ç‰ˆï¼‰\nå‰ç½®å†…å®¹\n\n\n\ngit çš„ä¸‹è½½ï¼š å®˜ç½‘ä¸‹è½½è¾ƒæ…¢ï¼Œè¿™è¾¹æ¨èé˜¿é‡Œé•œåƒä¸‹è½½ï¼š\n\né˜¿é‡Œé•œåƒä¸‹è½½ git\nå¾€ä¸‹æ»‘é€‰æ‹©æ¥è¿‘å½“å‰æ—¥æœŸçš„æœ€æ–°ç‰ˆæœ¬ 2.39.2 windows\n\né€‰æ‹© 2.39.2 -64 çš„exeä¸‹è½½ï¼Œå¤§æ¦‚æœ‰ 50Mbå¤§å°\n\nä¸‹è½½å¥½åï¼Œç›´æ¥ä¸€ç›´ç‚¹ä¸‹ä¸€æ­¥å³å¯ã€‚å¦‚æœä½ äº†è§£è¿‡gitï¼Œåˆ™å¯ä»¥æŒ‰ç…§è‡ªå·±çš„ä¹ æƒ¯ä¸‹è½½ï¼Œè¿™ä¸é‡è¦ã€‚\n\nNodejsä¸‹è½½\n\nç›´æ¥ç™¾åº¦æœç´¢ Nodejsï¼ŒNodejsä¸‹è½½\né€‰æ‹© 18.14.2 çš„ LTSç‰ˆæœ¬ä¸‹è½½\n\n\nhexo åˆ›å»ºä¸ªäººåšå®¢\n\n\nhexoæ˜¯ä»€ä¹ˆï¼Ÿ\n\næ­£å¦‚hexoçš„é¦–é¡µæ‰€æ˜¾ç¤ºçš„ï¼Œå®ƒæ˜¯ä¸€æ¬¾éå¸¸å¿«é€Ÿï¼Œç®€ä»‹ï¼Œé«˜æ•ˆçš„åšå®¢æ¡†æ¶å¹³å°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨hexoå¿«é€Ÿç”Ÿæˆåšå®¢ç½‘ç«™çš„æ¨¡æ¿ï¼Œç„¶åéƒ¨ç½²ä¸ºæˆ‘ä»¬è‡ªå·±çš„åšå®¢ç½‘ç«™ã€‚\n\n\nç›´æ¥è¿›å…¥æ“ä½œï¼š\n\nåœ¨ä»»æ„ç›˜ç¬¦ä¸­æ–°å»º hexo æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œæˆ‘åˆ›å»ºåœ¨äº†Eç›˜\n\n\n\næ‰“å¼€hexoæ–‡ä»¶å¤¹ï¼Œç©ºç™½çš„åœ°æ–¹å³é”®ï¼Œé€‰æ‹© Git Bash Here ï¼Œå³æˆ‘ä»¬ä½¿ç”¨ git ç¯å¢ƒåˆ›å»º hexoçš„blogæ¨¡æ¿ï¼ˆå¿…é¡»æå‰å®‰è£…å¥½ gitï¼‰ï¼Œæ‰“å¼€åå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&#x2F; E &#x2F; hexoè¡¨ç¤ºå½“å‰æ“ä½œä½ç½®åœ¨ Eç›˜çš„ hexoæ–‡ä»¶å¤¹ä¸­\n\nåœ¨ gitçª—å£ä¸­ä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤\n\n\n1npm install hexo-cli -g\n\n1hexo init blog\n\n1cd blog\n\n1npm install\n\n1hexo server\n\nå…¨éƒ¨è¾“å…¥å®Œæˆåï¼Œhexo æ–‡ä»¶å¤¹ ä¸­ä¾¿ä¼šç”Ÿæˆä¸€ä¸ª blog å­æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”blogæ–‡ä»¶å¤¹é‡Œé¢åŒ…å«æœ‰å¾ˆå¤šä¿¡æ¯ï¼š\n\nå…³äºè¿™äº›æ–‡ä»¶å¤¹ï¼Œåšä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼š\n\nnode_modules: ä¾èµ–åŒ…\npublicï¼šå­˜æ”¾ç”Ÿæˆçš„é¡µé¢\nscaffoldsï¼šç”Ÿæˆæ–‡ç« çš„ä¸€äº›æ¨¡æ¿\nsourceï¼šç”¨æ¥å­˜æ”¾ä½ çš„æ–‡ç« \nthemesï¼šä¸»é¢˜\n\nç„¶åè¾“å…¥è¿™ä¸¤æ¡å‘½ä»¤ï¼š\n1hexo g\n\n1hexo s\n\nå®Œæˆåä¼šæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼Œåˆ™è¯´æ˜é…ç½®æˆåŠŸ!\n\nåœ¨ git ä¸­è¾“å…¥ Ctrl+C å³å¯å…³é—­hexo sçš„å†…å®¹ã€‚\næ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨æµè§ˆå™¨è¾“å…¥ localhost:4000 å³å¯è¿›å…¥ä½ çš„åˆå§‹é»˜è®¤åšå®¢\nå®ƒé•¿è¿™æ ·ï¼š\n\næ³¨æ„ï¼šè¿™åªæ˜¯ä¸€ä¸ªç¦»çº¿ç‰ˆæœ¬çš„åšå®¢ ï¼Œåªèƒ½ä½ è‡ªå·±çœ‹è§ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ GitHub æˆ–è€… gitteeæä¾›çš„ sshåŠŸèƒ½å°†ä»–å˜ä¸ºå¯¹å¤–å¼€æ”¾çš„ã€‚\n\nGitHubåˆ›å»ºä»“åº“\n\n\n\né¦–å…ˆæ³¨å†Œä¸€ä¸ªGitHubçš„ä»“åº“ï¼Œç„¶ååœ¨ä¸ªäººä¸»é¡µä¸­é€‰æ‹© new æ–°å»ºä»“åº“\n\næ³¨æ„ï¼š ä»“åº“åç§°çš„å‰åŠéƒ¨åˆ†ä¸ä½ çš„ç”¨æˆ·åä¸€è‡´ï¼Œå³ lummodï¼ŒååŠéƒ¨åˆ† ä¸º .git.io å›ºå®šæ ¼å¼ï¼ˆå¿½ç•¥çº¢è‰²è­¦å‘Šï¼Œå› ä¸ºæˆ‘å·²ç»åˆ›å»ºè¿‡äº†ï¼ï¼‰ï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸ªreadmeä¸ºè¯´æ˜æ–‡ä»¶ï¼ˆéšä¾¿ï¼‰ï¼Œç„¶åç‚¹å‡»åˆ›å»ºä»“åº“\n\n\nå›åˆ° git bashé»‘çª—å£ä¸­ï¼Œè¾“å…¥ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤ï¼ˆé€æ¡ï¼‰ï¼š\n\nyournameæ”¹ä¸ºä½ çš„GitHubçš„ç”¨æˆ·å\n1git config --global user.name &quot;yourname&quot;\n\nyouremailæ”¹ä¸ºä½ çš„æ³¨å†ŒGitHubæ—¶çš„é‚®ç®±\n1git config --global user.email &quot;youremail&quot;\n\nä¸€å®šä¸è¦è¾“å…¥é”™ï¼Œè¿™æ ·githubæ‰èƒ½æ£€æŸ¥åˆ°è¿™ä¸ªç”¨æˆ·å±äºä½ \n\nåˆ›å»º sshï¼Œè¾“å…¥å‘½ä»¤ï¼Œç„¶åä¸€ç›´å›è½¦\n\nyouremailæ”¹ä¸ºä½ çš„æ³¨å†ŒGitHubæ—¶çš„é‚®ç®±\n1ssh-keygen -t rsa -C &quot;youremail&quot;\n\nä¹‹åä¼šæç¤ºä½ å·²å®Œæˆ sshçš„åˆ›å»ºï¼Œåœ¨æ–‡ä»¶ä¸­æ‰¾åˆ°è¿™ä¸ªè·¯å¾„\nC:\\Users\\username\\.ssh\n\nè®°ä½è¿™ä¸¤ä¸ªæ–‡ä»¶\n\nåœ¨ GitHubçš„ Settingé‡Œé¢ï¼Œæ‰¾åˆ° SSH keysï¼ŒæŠŠ id_rsa.pub é‡Œé¢çš„å†…å®¹å…¨éƒ¨å¤åˆ¶åˆ° key è¿›å»ï¼Œtitleéšä¾¿å†™ä¸€ä¸ªå°±è¡Œ\n\n\næ“ä½œå®Œæˆåï¼Œå°±æˆåŠŸäº†ã€‚\n\nhexoéƒ¨ç½²åˆ°GitHub\n\n\n\nåœ¨ blogæ–‡ä»¶å¤¹ä¸‹é¢æ‰¾åˆ° _config.yml æ–‡ä»¶ï¼Œè¿™æ˜¯å±äº ä½ çš„åšå®¢çš„é…ç½®æ–‡ä»¶ï¼Œç‚¹è¿›å…¥ä¸€çœ‹å°±çŸ¥é“äº†ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œé¢ç›´æ¥ä¿®æ”¹ å§“åï¼Œå†…å®¹ï¼Œç­‰ç”¨æˆ·çš„ä¿¡æ¯ã€‚åŒå‡»æ‰“å¼€å®ƒï¼ˆvscodeæˆ–è€…å…¶ä»–æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè®°äº‹æœ¬éƒ½å¯ä»¥ï¼‰\n\n\n\nå…ˆæ‰¾ä¸€ä¸‹æœ‰æ²¡æœ‰ä»¥ä¸‹è¿™æ®µå†…å®¹ï¼ˆæˆ‘ä¹Ÿå¿˜è®°äº†æ˜¯æˆ‘æ·»åŠ çš„è¿˜æ˜¯è‡ªå¸¦çš„ï¼‰ï¼Œå¦‚æœè‡ªå¸¦åˆ™ä¸€å®šæ˜¯ç©ºçš„ï¼Œåˆ™ä¿®æ”¹ä¸ºå¦‚ä¸‹æ‰€ç¤ºï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ç›´æ¥å¤åˆ¶ä¸‹é¢å†…å®¹åˆ° æ–‡æ¡£çš„æœ«å°¾ï¼š\n\nuserè¡¨ç¤ºä½ çš„GitHubçš„ç”¨æˆ·å\n123456789# Deployment## Docs: https://hexo.io/docs/one-command-deployment# deploy:#   type: &#x27;&#x27;deploy:  type: git  repo: https://github.com/username/username.github.io.git  branch: master  # message: Site updated: &#123;&#123; now(&#x27;YYYY-MM-DD HH:mm:ss&#x27;) &#125;&#125;)\n\nè¯´æ˜ï¼šç±»å‹æ˜¯ gitï¼Œè¿œç¨‹ sshè¿æ¥æ˜¯ ä½ çš„ repoè¾“å…¥é¡¹ï¼Œbranch è¾“å…¥gh-pagesã€‚\nå¦å¤–ï¼Œæ‰¾åˆ° ç¬¬16è¡Œï¼ˆæˆ–è€…ç›´æ¥æœç´¢ urlï¼‰ä¿®æ”¹url ä¸º\n1https://username.github.io\n\nåŒæ ·usernameæ˜¯ä½ çš„GitHubçš„ç”¨æˆ·åã€‚\n\nå®Œæˆåï¼Œä¿å­˜æ–‡ä»¶å¹¶ä¸”é€€å‡ºï¼Œåœ¨ git bashä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š\n\nè¡¨ç¤ºå®‰è£… gitéƒ¨ç½²å‘½ä»¤å·¥å…·\n1npm install hexo-deployer-git --save\n\n\næœ€åè¾“å…¥ä»¥ä¸‹ä¸‰è¡Œå‘½ä»¤ï¼š\n\n1hexo clean\n\n1hexo g\n\n1hexo d\n\nå…¶ä¸­ hexo cleanæ¸…é™¤äº†ä½ ä¹‹å‰ç”Ÿæˆçš„ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥ä¸åŠ ã€‚\nhexo generate é¡¾åæ€ä¹‰ï¼Œç”Ÿæˆé™æ€æ–‡ç« ï¼Œå¯ä»¥ç”¨ hexo gç¼©å†™\nhexo deploy éƒ¨ç½²æ–‡ç« ï¼Œå¯ä»¥ç”¨hexo dç¼©å†™\nå¦‚æœæ˜¯åœ¨ç¦»çº¿ç«¯å³ localhost:4000ç«¯æµ‹è¯•ä½ çš„åšå®¢ï¼Œåˆ™åªéœ€è¦ hexo g + hexo s å³å¯ï¼Œæ— éœ€ hexo d\n\nè¾“å…¥å®Œæˆåä¼šå‡ºç°ä¸€å †å†…å®¹ï¼Œä¸ç”¨ç®¡ä»–**ï¼Œåªè¦æœ€åå†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼Œ**å°±è¡¨ç¤ºæˆåŠŸäº†ï¼\n\n\nç„¶åä½ å°±å¯ä»¥åœ¨\n1username.github.io  # https://username.github.io\n\nè®¿é—®åˆ°ä½ çš„åšå®¢äº†ï¼Œå…¶ä¸­usernameæ˜¯ä½ GitHubç”¨æˆ·åï¼Œè¿™ä¸ªç½‘ç«™ä¸æ˜¯ç¦»çº¿çš„ï¼Œå…¶ä»–äººéƒ½å¯ä»¥è®¿é—®åˆ°ï¼ï¼ï¼\nclean1$ hexo clean\n\næ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚\nåœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚\ngenerate1$ hexo generate\n\nç”Ÿæˆé™æ€æ–‡ä»¶ã€‚\n\n\n\né€‰é¡¹\næè¿°\n\n\n\n-d, --deploy\næ–‡ä»¶ç”Ÿæˆåç«‹å³éƒ¨ç½²ç½‘ç«™\n\n\n-w, --watch\nç›‘è§†æ–‡ä»¶å˜åŠ¨\n\n\n-b, --bail\nç”Ÿæˆè¿‡ç¨‹ä¸­å¦‚æœå‘ç”Ÿä»»ä½•æœªå¤„ç†çš„å¼‚å¸¸åˆ™æŠ›å‡ºå¼‚å¸¸\n\n\n-f, --force\nå¼ºåˆ¶é‡æ–°ç”Ÿæˆæ–‡ä»¶ Hexo å¼•å…¥äº†å·®åˆ†æœºåˆ¶ï¼Œå¦‚æœ public ç›®å½•å­˜åœ¨ï¼Œé‚£ä¹ˆ hexo g åªä¼šé‡æ–°ç”Ÿæˆæ”¹åŠ¨çš„æ–‡ä»¶ã€‚ ä½¿ç”¨è¯¥å‚æ•°çš„æ•ˆæœæ¥è¿‘ hexo clean &amp;&amp; hexo generate\n\n\n-c, --concurrency\næœ€å¤§åŒæ—¶ç”Ÿæˆæ–‡ä»¶çš„æ•°é‡ï¼Œé»˜è®¤æ— é™åˆ¶\n\n\nè¯¥å‘½ä»¤å¯ä»¥ç®€å†™ä¸º\nserver1$ hexo server\n\nå¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š http://localhost:4000/ã€‚\n\n\n\né€‰é¡¹\næè¿°\n\n\n\n-p, --port\né‡è®¾ç«¯å£\n\n\n-s, --static\nåªä½¿ç”¨é™æ€æ–‡ä»¶\n\n\n-l, --log\nå¯åŠ¨æ—¥è®°è®°å½•ï¼Œä½¿ç”¨è¦†ç›–è®°å½•æ ¼å¼\n\n\nè¯¥å‘½ä»¤å¯ä»¥ç®€å†™ä¸ºï¼š\n1$ hexo s\n\ndeploy1$ hexo deploy\n\néƒ¨ç½²ç½‘ç«™ï¼Œæ„å»ºåœ¨GitHubçš„æœåŠ¡å™¨ä¸­ã€‚\n\n\n\nå‚æ•°\næè¿°\n\n\n\n-g, --generate\néƒ¨ç½²ä¹‹å‰é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶\n\n\nè¯¥å‘½ä»¤å¯ä»¥ç®€å†™ä¸ºï¼š\n1$ hexo d\n\nå‘½ä»¤é…åˆä½¿ç”¨ï¼Œé‡æ–°æ„å»ºç½‘ç«™ï¼ˆreleaseï¼‰ï¼š\n1hexo clean\n\n1hexo g\n\n1hexo s\n","slug":"hexoå¿«é€Ÿæ­å»º","date":"2025-10-26T05:40:38.000Z","categories_index":"æ¡†æ¶","tags_index":"hexo","author_index":"Azer"},{"id":"b30be1be519f5bf3e895d94c6885064f","title":"vue_vite2é¡¹ç›®çš„æ„å»º","content":"1.å®‰è£…nodejsï¼ˆå»ºè®®è£…16ï¼Œ18ç‰ˆæœ¬ç¨³å®šï¼‰ä¸‹è½½ | Node.js ä¸­æ–‡ç½‘\nè£…å®Œä¹‹åä¼šæœ‰ä¸€ä¸ªå‘½ä»¤å« npm\nå¯ä»¥åœ¨ç»ˆç«¯è¾“å…¥npm -v æ¥æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ\n\n2.æ„å»ºviteé¡¹ç›®å®˜æ–¹æ–‡æ¡£å¼€å§‹ {#getting-started} | Viteä¸­æ–‡ç½‘\nvite çš„ä¼˜åŠ¿\nå†·æœåŠ¡ é»˜è®¤çš„æ„å»ºç›®æ ‡æµè§ˆå™¨æ˜¯èƒ½åœ¨ script æ ‡ç­¾ä¸Šæ”¯æŒåŸç”Ÿ ESMå’ŒåŸç”Ÿ ESM åŠ¨æ€å¯¼å…¥\nHMR é€Ÿåº¦å¿«åˆ°æƒŠäººçš„æ¨¡å—çƒ­æ›´æ–°ï¼ˆHMRï¼‰\nRollupæ‰“åŒ… å®ƒä½¿ç”¨Rollupæ‰“åŒ…ä½ çš„ä»£ç ï¼Œå¹¶ä¸”å®ƒæ˜¯é¢„é…ç½®çš„ å¹¶ä¸”æ”¯æŒå¤§éƒ¨åˆ†rollupæ’ä»¶\nä½¿ç”¨viteåˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®\nnpm\n1npm init vite@latest\n\nYarn\n1yarn create vite\n\nè¿è¡Œä¹‹å\né¡¹ç›®åç§°\næ„å»ºçš„é¡¹ç›®æ¨¡æ¿\n\nä»¥å‰æ˜¯è¦è‡ªå·±æ‰§è¡Œcd ç›®å½•æ–‡ä»¶ npm iå‘½ä»¤çš„ï¼Œç°åœ¨æ˜¯ä¸€é”®å®‰è£…å¥½ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ \n\nç‚¹å‡»localhost:5173æ‰“å¼€é¡µé¢\n\né¡¹ç›®å°±æˆåŠŸè·‘èµ·æ¥äº†\npackage json å‘½ä»¤è§£æ\n1&#123;  &quot;scripts&quot;: &#123;    &quot;dev&quot;: &quot;vite&quot;, // å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œåˆ«åï¼š`vite dev`ï¼Œ`vite serve`    &quot;build&quot;: &quot;vite build&quot;, // ä¸ºç”Ÿäº§ç¯å¢ƒæ„å»ºäº§ç‰©    &quot;preview&quot;: &quot;vite preview&quot; // æœ¬åœ°é¢„è§ˆç”Ÿäº§æ„å»ºäº§ç‰©  &#125;&#125;\n\n3.nodejs åº•å±‚åŸç†ï¼ˆéé‡è¦ï¼‰Node.js ä¸»è¦ç”± V8ã€Libuv å’Œç¬¬ä¸‰æ–¹åº“ç»„æˆï¼š\n\nLibuvï¼šè·¨å¹³å°çš„å¼‚æ­¥ IO åº“ï¼Œä½†å®ƒæä¾›çš„åŠŸèƒ½ä¸ä»…ä»…æ˜¯ IOï¼Œè¿˜åŒ…æ‹¬è¿›ç¨‹ã€çº¿ç¨‹ã€ä¿¡å·ã€å®šæ—¶å™¨ã€è¿›ç¨‹é—´é€šä¿¡ï¼Œçº¿ç¨‹æ± ç­‰ã€‚\nç¬¬ä¸‰æ–¹åº“ï¼šå¼‚æ­¥ DNS è§£æï¼ˆ cares ï¼‰ã€HTTP è§£æå™¨ï¼ˆæ—§ç‰ˆä½¿ç”¨ http_parserï¼Œæ–°ç‰ˆä½¿ç”¨ llhttpï¼‰ã€HTTP2 è§£æå™¨ï¼ˆ nghttp2 ï¼‰ã€ è§£å‹å‹ç¼©åº“( zlib )ã€åŠ å¯†è§£å¯†åº“( openssl )ç­‰ç­‰ã€‚\nV8ï¼šå®ç° JS è§£æã€æ‰§è¡Œå’Œæ”¯æŒè‡ªå®šä¹‰æ‹“å±•ï¼Œå¾—ç›Šäº V8 æ”¯æŒè‡ªå®šä¹‰æ‹“å±•ï¼Œæ‰æœ‰äº† Node.jsã€‚\n\nä½ ä¹Ÿå¯ä»¥ç†è§£æˆ jsåº”ç”¨å±‚ æ¡¥C&#x2F;C++ åº•å±‚C&#x2F;C++\n\n","slug":"vite2-project","date":"2025-10-25T03:45:27.000Z","categories_index":"å‰ç«¯","tags_index":"vue,æ’ä»¶","author_index":"Azer"},{"id":"afe5f1e72fd075ae6892a39b4e84b157","title":"nvmçš„ä½¿ç”¨","content":"1.ä»‹ç»åœ¨å®é™…çš„å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šç»å¸¸é‡è§ node.js çš„ç‰ˆæœ¬é—®é¢˜ï¼Œä¸åŒçš„é¡¹ç›®éœ€è¦ä½¿ç”¨ä¸åŒçš„ node.js ç‰ˆæœ¬ã€‚æ¯”å¦‚Vue2å’ŒVue3éœ€è¦çš„Nodeç‰ˆæœ¬ä¸ä¸€æ ·ã€‚\næœ¬æ–‡è¯¦ç»†æŒ‡å¯¼å¦‚ä½•åœ¨Windowsä¸Šå®‰è£…ã€é…ç½®NVMï¼ˆNode Version Managerï¼‰ï¼ŒåŒ…æ‹¬ä¸åŒé¡¹ç›®éœ€æ±‚ä¸‹é€‰æ‹©Nodeç‰ˆæœ¬ï¼Œå®‰è£…æ­¥éª¤ã€é…ç½®æ–‡ä»¶è®¾ç½®ï¼Œä»¥åŠå¦‚ä½•å®‰è£…ã€åˆ‡æ¢å’ŒéªŒè¯NodeåŠnpmç‰ˆæœ¬ã€‚é€‚åˆå‰ç«¯å¼€å‘è€…å¤„ç†ç‰ˆæœ¬å…¼å®¹é—®é¢˜ã€‚ \nåœ°å€ï¼šhttps://github.com/coreybutler/nvm-windows/releases\n\n\n\n\n\n\n\næ³¨æ„\næ³¨æ„ï¼šå®‰è£…ä¹‹å‰å¿…é¡»å®Œå…¨å¸è½½å·²å®‰è£…çš„node\n\nç¬¬ä¸€æ­¥ï¼šé€‰æ‹©ç‰ˆæœ¬ï¼Œå¯¹åº”ä¸‹è½½\nç¬¬äºŒæ­¥ï¼šè¿™é‡Œæ˜¯è®¾ç½®nvmçš„å®‰è£…è·¯å¾„\nç¬¬ä¸‰æ­¥ï¼šè¿™é‡Œæ˜¯è®¾ç½®ä½¿ç”¨nvmå®‰è£…nodeæ—¶ï¼Œnodeçš„å®‰è£…è·¯å¾„\nç¬¬å››æ­¥ï¼šå®‰è£…å®Œæˆåï¼Œåœ¨CMDå‘½ä»¤çª—å£è¾“å…¥nvm -v,è¾“å‡ºå¦‚ä¸‹ç‰ˆæœ¬å·å³è¯æ˜å®‰è£…æˆåŠŸ\nç¬¬äº”æ­¥ï¼šä¿®æ”¹nvmé…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰nvmå®‰è£…å®Œæˆåï¼Œæ‰“å¼€nvmå®‰è£…ç›®å½•ä¸‹çš„settings.txtæ–‡ä»¶:\n123456root: D:\\nvmpath: D:\\nvm\\nodejs arch: 64 proxy: nonenode_mirror: http://npm.taobao.org/mirrors/node/npm_mirror: https://npm.taobao.org/mirrors/npm/\n\nrootå’Œpathåˆ†åˆ«æ˜¯nvmå’Œnodeçš„å®‰è£…è·¯å¾„ï¼Œè¿™ä¸¤ä¸ªä¸è¦åŠ¨ï¼Œè¿™æ˜¯ä¹‹å‰å®‰è£…æ—¶æ ¹æ®ä½ é€‰æ‹©çš„è·¯å¾„è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶é»˜è®¤ä¹Ÿåªæœ‰è¿™ä¸¤é¡¹ã€‚å› ä¸ºæˆ‘æ²¡æ”¹é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥åé¢çš„4é¡¹æˆ‘éƒ½æ²¡æœ‰ï¼Œåªæ˜¯åæ¥æœåˆ°äº†ï¼Œå°±è¯´ä¸€ä¸‹ï¼Œarchè¡¨ç¤ºå®‰è£…çš„nodeæ˜¯å¤šå°‘ä½ï¼Œproxyæ˜¯è®¾ç½®ä»£ç†ï¼Œnode_mirroræ˜¯æ›´æ”¹nvmä¸‹è½½nodeæ—¶çš„é•œåƒï¼Œè¿™é‡Œæ˜¯è®¾ç½®ä¸ºæ·˜å®é•œåƒï¼Œnpm_mirroræ˜¯æ›´æ”¹npmä¸‹è½½ä¾èµ–åŒ…çš„é•œåƒï¼Œä¹Ÿæ˜¯ä¿®æ”¹ä¸ºäº†æ·˜å®é•œåƒã€‚\nç¬¬å…­æ­¥ï¼šå®‰è£…nodeæŸ¥çœ‹nvmæ”¯æŒå®‰è£…çš„nodeç‰ˆæœ¬\nä½¿ç”¨ nvm list available\n\n ä½¿ç”¨nvm install ç‰ˆæœ¬å·å®‰è£…æŒ‡å®šç‰ˆæœ¬node\n æ¯”å¦‚ï¼šnvm install 22.20.0\næ£€æµ‹nodeå’Œnpmæ˜¯å¦å®‰è£…æˆåŠŸ,å¦‚ä¸‹æ˜¾ç¤ºåˆ™ä¸ºæˆåŠŸï¼š\n\nç¬¬ä¸ƒæ­¥ï¼šåˆ‡æ¢nodeç‰ˆæœ¬\n\n\n\n\n\n\næ³¨æ„\nå¿…é¡»ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€å‘½ä»¤è¡Œ\n\nåˆæ¬¡ä½¿ç”¨nvmå®‰è£…nodeä¹‹åï¼Œå¿…é¡»å…ˆä½¿ç”¨nvm use ç‰ˆæœ¬å·åˆ‡æ¢åˆ°å·²å®‰è£…ç‰ˆæœ¬çš„nodeæ‰å¯ä»¥\n123nvm use 16.20.0nvm list node -v\n\n\n","slug":"nvm-use","date":"2025-10-24T11:33:21.000Z","categories_index":"æ’ä»¶","tags_index":"æ’ä»¶,node","author_index":"Azer"},{"id":"8c860e702e41ad422a6fe923d8248717","title":"æ­å»ºhexo-theme-auroraä¸»é¢˜æ¡†æ¶","content":"\n\n\n\n\n\n\n\n\né€šè¿‡è‡ªå·±æ­å»º hexo-theme-auroraä¸»é¢˜æ¡†æ¶ï¼Œä¸‹é¢æ˜¯å®˜æ–¹æ–‡æ¡£çš„éƒ¨åˆ†è¯´æ˜\n1.å®˜æ–¹æ–‡æ¡£è¯´æ˜â€‹\tä¾èµ–ç¯å¢ƒ â€‹\n\nHexo 6.3+\nYarn or NPM installed\n\næ­¥éª¤ 1 - å®‰è£…ä¸»é¢˜åŒ… â€‹åœ¨æ§åˆ¶å°ä¸­ï¼Œè¿›å…¥ Hexo é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä¸»é¢˜\nYARN \n1yarn add hexo-theme-aurora hexo-plugin-aurora\n\nNPM \n1npm install hexo-theme-aurora hexo-plugin-aurora --save\n\n\n\næ­¥éª¤ 2 - ç”Ÿæˆä¸»é¢˜é…ç½® â€‹å› ä¸ºä¸»é¢˜æ˜¯ä½¿ç”¨ NPM æˆ–è€… Yarn å®‰è£…çš„ï¼Œè€Œä¸æ˜¯ clone åˆ° themes æ–‡ä»¶å¤¹çš„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚ä½ åªéœ€è¦åœ¨ Hexo åšå®¢çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª _config.aurora.yml é…ç½®æ–‡ä»¶æ¥é…ç½®ä¸»é¢˜ã€‚è¦è·å–é»˜è®¤ä¸»é¢˜æ¨¡æ¿ã€‚\nå¯¹äº Windows ç”¨æˆ·ï¼Œå¯ä»¥å°†ä¸‹é¢çš„æ¨¡æ¿å¤åˆ¶åˆ° _config.aurora.yml ä¸­ã€‚\nä¹Ÿå¯ä»¥ç›´æ¥å¤åˆ¶è¿™ä¸ªæ¨¡ç‰ˆåˆ°é¡¹ç›®æ ¹ç›®å½•çš„ _config.aurora.yml ä¸­\næ­¥éª¤ 3 - é…ç½® themeâ€‹å› ä¸ºè¦å‘Šè¯‰ hexo ä½ è¦ç”¨çš„ä¸»é¢˜æ˜¯ aurora æ‰€ä»¥éœ€è¦æŠŠ _config.yml ä¸­çš„ theme å€¼æ”¹ä¸º aurora\n\næ‰“å¼€åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ _config.yml\nä¿®æ”¹æŠŠ theme çš„å€¼æ”¹ä¸º aurora\n\nyml\n1234# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: aurora\n\n1234# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: aurora\n\næ­¥éª¤ 4 - è®¾ç½® permalinkâ€‹å› ä¸ºä½¿ç”¨äº† Vue-routerï¼ŒHexo é»˜è®¤ç”Ÿæˆçš„é¡µé¢å’Œæ–‡ç« çš„ permalink ä¸æˆ‘ä»¬ Vue router ä¸­çš„ path æ˜¯ä¸ç›¸ç¬¦çš„ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°æ— æ³•è®¿é—®çš„é—®é¢˜ã€‚\næ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹ Hexo é»˜è®¤é…ç½®æ–‡ä»¶é‡Œé¢çš„ permalink å‚æ•°ã€‚\n\næ‰“å¼€åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ _config.yml\nä¿®æ”¹ permalink å‚æ•°ä¸º /post/:title.html\n\nyaml\n12345678# URL## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;url: https://tridiamond.techpermalink: /post/:title.htmlpermalink_defaults:pretty_urls:  trailing_index: true # Set to false to remove trailing &#x27;index.html&#x27; from permalinks  trailing_html: true # Set to false to remove trailing &#x27;.html&#x27; from permalinks\n\n\næ­¥éª¤ 5 - è®¾ç½®ä»£ç é«˜äº® â€‹\n\n\n\n\n\n\n\n\nä¸»é¢˜ 2.5 ç‰ˆæœ¬å¼€å§‹ä¸»é¢˜å·²ç»æ”¹ä¸ºä½¿ç”¨ Shiki ä½œä¸ºä»£ç é«˜äº®å¼•æ“ã€‚Shikiæ”¯æŒä½¿ç”¨ä» VSCode å¯¼å‡ºçš„ä¸»é¢˜ã€‚é¢œè‰²æ ‡è®°åŒ–ä¸ VSCode ç›¸åŒ! Shiki é»˜è®¤è¿˜æ”¯æŒäº†ä¸€äº›æœ€å¤šäººä½¿ç”¨çš„ä¸»é¢˜å“¦ï¼\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç¦ç”¨ _config.yml ä¸­çš„ highlight å’Œ prismjs ã€‚\nyaml\n1234highlight:  enable: falseprismjs:  enable: false\n\n\nç„¶åå°†ä»¥ä¸‹é…ç½®æ·»åŠ åˆ°ä¸»é¢˜é…ç½®æ–‡ä»¶ _config.aurora.yml ä¸­\nyaml\n123456#! ---------------------------------------------------------------#! Highlighter Shiki#! ---------------------------------------------------------------shiki:  enable: true  backgroundColor: &#x27;#1a1a1a&#x27;\n\nhexoçš„å‘½ä»¤\n12345hexo  clean             # æ¸…é™¤ç¼“å­˜æ–‡ä»¶å’Œç”Ÿæˆçš„é™æ€æ–‡ä»¶hexo  new &quot;æ–‡ç« åç§°&quot;     # æ–°å»ºç•Œé¢hexo  generate          # ç”Ÿæˆé™æ€æ–‡ä»¶ å¯ä»¥ç®€å†™æˆhexo g hexo  server            # å¯åŠ¨æœåŠ¡å™¨   å¯ä»¥ç®€å†™hexo shexo  deploy            # éƒ¨ç½²ç½‘ç«™ï¼Œæ„å»ºåœ¨GitHubçš„æœåŠ¡å™¨ä¸­ï¼Œç½‘é¡µæ–‡ä»¶å°†ä¸Šä¼ åˆ°å…³è”çš„ä¸ªäººä»“åº“ å¯ä»¥ç®€å†™æˆhexo d\n\nå…¶å®åˆ°ä¸Šé¢å¾—æ­¥éª¤å®˜ç½‘æ–‡æ¡£å·²ç»ç»“æŸäº†ï¼Œä¸‹é¢æ˜¯è‡ªå·±çš„é…ç½®\n2.è‡ªæˆ‘é…ç½®1. Hexo ä¸­å›¾ç‰‡ä¸Šä¼ é—®é¢˜åœ¨ä½¿ç”¨ Hexo åšå®¢æ—¶ï¼Œå›¾ç‰‡çš„ç®¡ç†å’Œä¸Šä¼ æ˜¯å¸¸è§é—®é¢˜ä¹‹ä¸€ã€‚ç‰¹åˆ«æ˜¯å½“ä½ ä½¿ç”¨ Typora è¿›è¡Œ Markdown å†™ä½œæ—¶ï¼Œé»˜è®¤çš„å›¾ç‰‡æ’å…¥æ–¹å¼æ— æ³•è¢« Hexo æ­£ç¡®è¯†åˆ«ã€‚ä¸‹é¢æ˜¯å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚\nTypora è®¾ç½®åœ¨ Typora ä¸­ä¾æ¬¡è¿›å…¥ï¼šæ–‡ä»¶ â†’ åå¥½è®¾ç½® â†’ å›¾åƒå°†ã€Œæ’å…¥å›¾ç‰‡æ—¶ã€è®¾ç½®ä¸ºï¼š\n\nå¤åˆ¶å›¾ç‰‡åˆ°æŒ‡å®šè·¯å¾„  \nè·¯å¾„è®¾ç½®ä¸ºï¼š./source/images  \næ’å…¥å›¾ç‰‡æ—¶ä½¿ç”¨ç›¸å¯¹è·¯å¾„ã€‚\n\nè¿™æ ·ï¼ŒTypora æ¯æ¬¡æ’å…¥å›¾ç‰‡æ—¶éƒ½ä¼šè‡ªåŠ¨ä¿å­˜åˆ° Hexo çš„ source/images æ–‡ä»¶å¤¹ä¸‹ã€‚\nä¿®æ”¹ Hexo é…ç½®æ‰“å¼€ç«™ç‚¹æ ¹ç›®å½•ä¸‹çš„ _config.ymlï¼Œæ‰¾åˆ°å¦‚ä¸‹é…ç½®ï¼š\n1post_asset_folder: true\n\n2. å¼€å‘ Hexo è½¬æ¢å›¾ç‰‡è·¯å¾„æ’ä»¶åœ¨ä½¿ç”¨ Typora ç¼–è¾‘ Hexo æ–‡ç« æ—¶ï¼Œæ’å…¥çš„å›¾ç‰‡è·¯å¾„é€šå¸¸æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå¦‚ï¼š(../images/example.png)\nè€Œè¿™ä¸ªè½¬æ¢æˆ‘ä»¬éœ€è¦åœ¨æ–‡ç« ç¼–è¯‘ä¸ºhtmlä¹‹å‰ï¼Œåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­è½¬æ¢ â€“&gt; &#123;% asset_img example.jpg example %&#125;\n2.1 åˆ›å»ºæ’ä»¶æ–‡ä»¶å¹¶å®ç°é€»è¾‘è¦è®© Hexo è‡ªåŠ¨ä¿®å¤ Typora æ’å…¥å›¾ç‰‡çš„è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–å†™ä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰æ’ä»¶æ¥å®ç°ã€‚\nåœ¨ Hexo æ ¹ç›®å½•ä¸‹åˆ›å»º hexo-asset-img æ–‡ä»¶å¤¹ï¼ˆå¦‚æœå·²ç»å­˜åœ¨ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼‰ï¼š\n123mkdir hexo-asset-imgcd hexo-asset-imgnpm init\n\n\n2.2 æµ‹è¯•ä¸è°ƒè¯•æ’ä»¶æ’ä»¶ç¼–å†™å®Œæˆåï¼Œéœ€è¦è¿›è¡Œæœ¬åœ°æµ‹è¯•ä»¥ç¡®è®¤é€»è¾‘æ˜¯å¦ç”Ÿæ•ˆã€è·¯å¾„æ˜¯å¦æ­£ç¡®æ›¿æ¢ã€‚\nåˆ›å»ºindex.jsæ–‡ä»¶åˆ°æ ¹ç›®å½•ä¸‹é¢ï¼Œå¤åˆ¶ä»£ç åˆ°é‡Œé¢å»\n12345678910111213141516171819202122232425262728293031const log = require(&#x27;hexo-log&#x27;)(&#123; &#x27;debug&#x27;: false, &#x27;slient&#x27;: false &#125;);/** * mdæ–‡ä»¶è¿”å› true * @param &#123;*&#125; data  */function ignore(data) &#123;    var source = data.source;    var ext = source.substring(source.lastIndexOf(&#x27;.&#x27;)).toLowerCase();    return [&#x27;md&#x27;,].indexOf(ext) &gt; -1;&#125;function action(data) &#123;    var reverseSource = data.source.split(&quot;&quot;).reverse().join(&quot;&quot;);    var fileName = reverseSource.substring(3, reverseSource.indexOf(&quot;/&quot;)).split(&quot;&quot;).reverse().join(&quot;&quot;);    // ![example](postname/example.jpg)  --&gt;  &#123;% asset_img example.jpg example %&#125;    var regExp = RegExp(&quot;!\\\\[(.*?)\\\\]\\\\(&quot; + fileName + &#x27;/(.+?)\\\\)&#x27;, &quot;g&quot;);    // hexo g    data.content = data.content.replace(regExp, &quot;&#123;% asset_img $2 $1 %&#125;&quot;,&quot;g&quot;);    // log.info(`hexo-asset-img: filename: $&#123;fileName&#125;, title: $&#123;data.title.trim()&#125;`);        return data;&#125;hexo.extend.filter.register(&#x27;before_post_render&#x27;,(data)=&gt;&#123;    if(!ignore(data))&#123;        action(data)    &#125;&#125;, 0);\n\n2.3 æœ¬åœ°æµ‹è¯•æ’ä»¶1.Hexoæ ¹ç›®å½•ä¸‹ package.json ä¸­ dependencies æ·»åŠ ä¸€è¡Œ&quot;hexo-asset-img&quot;:&quot;^1.0.8&quot;\n2.å°† hexo-asset-img æ–‡ä»¶å¤¹å¤åˆ¶åˆ° Hexo æ ¹ç›®å½•ä¸‹ node modules æ–‡ä»¶å¤¹ä¸‹\n\n\n\n\n\n\n\næ³¨æ„\näºŒè€…ç¼ºä¸€ä¸å¯ï¼Œä¸ä¿®æ”¹ package.jsonï¼Œæ²¡æˆåŠŸåŠ è½½æ’ä»¶\n\n2.4 ä½¿ç”¨æ’ä»¶1npm publish --registry https://registry.npmjs.org\n\n1npm install hexo-asset-img --save\n\n","slug":"page","date":"2025-10-24T01:44:56.000Z","categories_index":"æ¡†æ¶","tags_index":"hexo","author_index":"Azer"}]