{"title":"COSå¯¹è±¡å­˜å‚¨(1)","uid":"8f722d5b594dd13d1364a74f4c91a90a","slug":"COSå¯¹è±¡å­˜å‚¨-1","date":"2025-11-30T13:55:28.000Z","updated":"2025-11-30T13:59:50.522Z","comments":true,"path":"api/articles/COSå¯¹è±¡å­˜å‚¨-1.json","keywords":"VUEã€Pythonã€JAVA","cover":"/medias/cos1.png","content":"<p>ğŸ’¡ å¯¹è±¡å­˜å‚¨ç­‰ç¬¬ä¸‰æ–¹äº‘æœåŠ¡é€šå¸¸æ˜¯ä»˜è´¹åŠŸèƒ½ï¼ŒæŒ‰ç…§å­˜å‚¨é‡ã€æµé‡ç­‰æ–¹å¼è®¡è´¹ã€‚ä¸è¿‡å¯¹äºå¤§å®¶å­¦ä¹ æ¥è¯´ï¼Œç”±äºå›¾ç‰‡å­˜å‚¨é‡å’Œè®¿é—®é‡ä¸å¤§ï¼Œä»·æ ¼éå¸¸ä¾¿å®œï¼ˆå‡ å…ƒ ~ å‡ åå…ƒï¼‰ï¼Œè€Œä¸”è¿˜æœ‰ä¸€å®šå…è´¹é¢åº¦ã€‚å¯ä»¥ç‚¹å‡» <a href=\"https://curl.qcloud.com/ke6zvAHm\">é“¾æ¥</a> ä¼˜æƒ è´­ä¹°ã€‚ä¸‹æ‹‰æ‰¾åˆ° <strong>å…¨çº¿äº§å“</strong>ï¼Œç‚¹å‡»å­˜å‚¨é¡µç­¾ï¼Œå°±èƒ½çœ‹åˆ°äº†ï¼š</p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128140057025.png\" alt=\"image-20251128140057025\"></p>\n<h3 id=\"åˆ›å»ºå›¾ç‰‡çš„ä¸šåŠ¡æµç¨‹\"><a href=\"#åˆ›å»ºå›¾ç‰‡çš„ä¸šåŠ¡æµç¨‹\" class=\"headerlink\" title=\"åˆ›å»ºå›¾ç‰‡çš„ä¸šåŠ¡æµç¨‹\"></a>åˆ›å»ºå›¾ç‰‡çš„ä¸šåŠ¡æµç¨‹</h3><p>åˆ›å»ºå›¾ç‰‡å…¶å®åŒ…æ‹¬äº† 2 ä¸ªè¿‡ç¨‹ï¼šä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ + è¡¥å……å›¾ç‰‡ä¿¡æ¯å¹¶ä¿å­˜åˆ°æ•°æ®åº“ä¸­</p>\n<p>æœ‰ 2 ç§å¸¸è§çš„å¤„ç†æ–¹å¼ï¼š</p>\n<p>1ï¼‰å…ˆä¸Šä¼ å†æäº¤æ•°æ®ï¼šç”¨æˆ·ç›´æ¥ä¸Šä¼ å›¾ç‰‡ï¼Œç³»ç»Ÿç”Ÿæˆå›¾ç‰‡çš„å­˜å‚¨ URLï¼›ç„¶ååœ¨ç”¨æˆ·å¡«å†™å…¶ä»–ç›¸å…³ä¿¡æ¯å¹¶æäº¤åï¼Œæ‰ä¿å­˜å›¾ç‰‡è®°å½•åˆ°æ•°æ®åº“ä¸­ã€‚</p>\n<p>2ï¼‰ä¸Šä¼ å›¾ç‰‡æ—¶ç›´æ¥ä¿å­˜è®°å½•ï¼šåœ¨ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡åï¼Œç³»ç»Ÿç«‹å³ç”Ÿæˆå›¾ç‰‡çš„å®Œæ•´æ•°æ®è®°å½•ï¼ˆåŒ…æ‹¬å›¾ç‰‡ URL å’Œå…¶ä»–å…ƒä¿¡æ¯ï¼‰ï¼Œæ— éœ€ç­‰å¾…ç”¨æˆ·ç‚¹å‡»æäº¤ï¼Œå›¾ç‰‡ä¿¡æ¯å°±ç«‹åˆ»å­˜å…¥äº†æ•°æ®åº“ä¸­ã€‚ä¹‹åç”¨æˆ·å†å¡«å†™å…¶ä»–å›¾ç‰‡ä¿¡æ¯ï¼Œç›¸å½“äºç¼–è¾‘äº†å·²æœ‰å›¾ç‰‡è®°å½•çš„ä¿¡æ¯ã€‚</p>\n<p>æ–¹æ¡ˆ 1 çš„ä¼˜ç‚¹æ˜¯æµç¨‹ç®€å•ï¼Œä½†ç¼ºç‚¹æ˜¯å¦‚æœç”¨æˆ·ä¸æäº¤ï¼Œå›¾ç‰‡ä¼šæ®‹ç•™åœ¨å­˜å‚¨ä¸­ï¼Œå¯¼è‡´ç©ºé—´æµªè´¹ï¼›æ–¹æ¡ˆ 2 åˆ™å¯ä»¥ç†è§£ä¸ºä¿å­˜äº† â€œå›¾ç‰‡è‰ç¨¿â€ï¼Œå³ä½¿ç”¨æˆ·ä¸å¡«å†™ä»»ä½•é¢å¤–ä¿¡æ¯ï¼Œä¹Ÿèƒ½æ‰¾åˆ°ä¹‹å‰çš„åˆ›å»ºè®°å½•ã€‚</p>\n<p><strong>åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œç”±äºå›¾ç‰‡æ˜¯æ ¸å¿ƒèµ„æºï¼Œæ‰€ä»¥æ­¤å¤„é€‰æ‹©æ–¹æ¡ˆ 2ã€‚</strong> ä¾¿äºå¯¹å›¾ç‰‡è¿›è¡Œæº¯æºï¼Œè¿˜å¯ä»¥å¯¹å›¾ç‰‡ä¸Šä¼ åšä¸€äº›é™åˆ¶ â€”â€” æ¯”å¦‚å‘ç°ç”¨æˆ·ä¸Šä¼ èµ„æºè¿‡å¤šï¼Œå°±ç¦æ­¢ä¸Šä¼ ã€‚</p>\n<h3 id=\"å¦‚ä½•è§£æå›¾ç‰‡çš„ä¿¡æ¯ï¼Ÿ\"><a href=\"#å¦‚ä½•è§£æå›¾ç‰‡çš„ä¿¡æ¯ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•è§£æå›¾ç‰‡çš„ä¿¡æ¯ï¼Ÿ\"></a>å¦‚ä½•è§£æå›¾ç‰‡çš„ä¿¡æ¯ï¼Ÿ</h3><p>æ ¹æ®éœ€æ±‚ï¼Œæˆ‘ä»¬è¦è·å–çš„å›¾ç‰‡ä¿¡æ¯åŒ…æ‹¬ï¼šå®½åº¦ã€é«˜åº¦ã€å®½é«˜æ¯”ã€å¤§å°ã€æ ¼å¼ã€åç§°ã€‚</p>\n<p>ä¸»æµçš„è·å–å›¾ç‰‡ä¿¡æ¯çš„æ–¹æ³•ä¸»è¦æœ‰ 2 ç§ï¼š</p>\n<ol>\n<li>åœ¨åç«¯æœåŠ¡å™¨ç›´æ¥å¤„ç†å›¾ç‰‡ï¼Œæ¯”å¦‚ Java åº“ ImageIOã€Python åº“ Pillowï¼Œè¿˜æœ‰æ›´æˆç†Ÿçš„ä¸“ä¸šå›¾åƒå¤„ç†åº“ OpenCV ç­‰ã€‚</li>\n<li>é€šè¿‡ç¬¬ä¸‰æ–¹äº‘å­˜å‚¨æœåŠ¡ï¼ˆå¦‚è…¾è®¯äº‘ COSã€AWS S3ï¼‰æˆ–å›¾åƒå¤„ç† APIï¼ˆå¦‚ ImageMagickã€ExifToolï¼‰ç›´æ¥æå–å›¾ç‰‡çš„å…ƒæ•°æ®ã€‚</li>\n</ol>\n<p>ç”±äºæœ¬æ•™ç¨‹ä¸­ä½¿ç”¨è…¾è®¯äº‘ COS å¯¹è±¡å­˜å‚¨æ¥å®ç°æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ï¼Œè…¾è®¯äº‘ COS å¯¹è±¡å­˜å‚¨æ”¯æŒåœ¨å›¾ç‰‡ä¸Šä¼ æ—¶é€šè¿‡ <a href=\"https://cloud.tencent.com/product/ci\">æ•°æ®ä¸‡è±¡</a> ** ** æœåŠ¡ç›´æ¥è·å–åˆ°å›¾ç‰‡çš„å„ç§åŸºç¡€ä¿¡æ¯ï¼š</p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128140145965.png\" alt=\"image-20251128140145965\"></p>\n<p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ä¸ç”¨å†å•ç‹¬å¼•å…¥ä¸€ä¸ªåº“æˆ–è€…è‡ªå·±ç¼–å†™è§£æä»£ç äº†ï¼Œæ›´æ–¹ä¾¿ï¼›è€Œä¸”æä¾›çš„å…è´¹é¢åº¦è¶³å¤Ÿç”¨äº†ï¼Œæ‰€ä»¥é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚</p>\n<p>OKï¼Œæœ‰äº†å®ç°æ–¹æ¡ˆåï¼Œæˆ‘ä»¬å…ˆæ¥å¼€å‘åç«¯æ¥å£ã€‚</p>\n<p>å…ˆå‡†å¤‡å¥½é¡¹ç›®æ‰€éœ€çš„ä¾èµ– â€”â€” å¯¹è±¡å­˜å‚¨ï¼Œç„¶åå†å¼€å‘æœåŠ¡å’Œæ¥å£ã€‚</p>\n<h3 id=\"åˆ›å»ºå¹¶ä½¿ç”¨å¯¹è±¡å­˜å‚¨\"><a href=\"#åˆ›å»ºå¹¶ä½¿ç”¨å¯¹è±¡å­˜å‚¨\" class=\"headerlink\" title=\"åˆ›å»ºå¹¶ä½¿ç”¨å¯¹è±¡å­˜å‚¨\"></a>åˆ›å»ºå¹¶ä½¿ç”¨å¯¹è±¡å­˜å‚¨</h3><p>é¦–å…ˆè¿›å…¥<a href=\"https://console.cloud.tencent.com/cos/bucket\">å¯¹è±¡å­˜å‚¨çš„æ§åˆ¶å°</a>ï¼Œåˆ›å»ºå­˜å‚¨æ¡¶ã€‚</p>\n<p>å¯ä»¥æŠŠå­˜å‚¨æ¡¶ç†è§£ä¸ºä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œå’Œæ–‡ä»¶ç³»ç»Ÿç±»ä¼¼ï¼Œéƒ½æ˜¯æ ¹æ®è·¯å¾„æ‰¾åˆ°æ–‡ä»¶æˆ–ç›®å½•ï¼ˆæ¯”å¦‚ <code>/test/aaa.jpg</code>ï¼‰ã€‚å¯ä»¥å¤šä¸ªé¡¹ç›®å…±ç”¨ä¸€ä¸ªå­˜å‚¨æ¡¶ï¼Œä¹Ÿå¯ä»¥æ¯ä¸ªé¡¹ç›®ä¸€ä¸ªã€‚</p>\n<p>ç‚¹å‡»åˆ›å»ºå­˜å‚¨æ¡¶ï¼Œæ³¨æ„åœ°åŸŸé€‰æ‹©å›½å†…ï¼ˆç¦»ç”¨æˆ·è¾ƒè¿‘çš„ä½ç½®ï¼‰ã€‚æ­¤å¤„è®¿é—®æƒé™å…ˆé€‰æ‹© â€œå…¬æœ‰è¯»ç§æœ‰å†™â€ï¼Œå› ä¸ºæˆ‘ä»¬çš„å­˜å‚¨æ¡¶è¦å­˜å‚¨å…è®¸ç”¨æˆ·å…¬å¼€è®¿é—®å›¾ç‰‡ã€‚è€Œå¦‚æœæ•´ä¸ªå­˜å‚¨æ¡¶è¦å­˜å‚¨çš„æ–‡ä»¶éƒ½ä¸å…è®¸ç”¨æˆ·è®¿é—®ï¼Œå»ºè®®é€‰æ‹©ç§æœ‰è¯»å†™ï¼Œæ›´å®‰å…¨ã€‚</p>\n<p>é»˜è®¤å‘Šè­¦ä¸€å®šè¦å‹¾é€‰ï¼å› ä¸ºå¯¹è±¡å­˜å‚¨æœåŠ¡çš„å­˜å‚¨å’Œè®¿é—®æµé‡éƒ½æ˜¯è®¡è´¹çš„ï¼Œè¶…é™åæˆ‘ä»¬è¦ç¬¬ä¸€æ—¶é—´å¾—åˆ°é€šçŸ¥å¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ä¸è¿‡ä¹Ÿä¸ç”¨å¤ªæ‹…å¿ƒï¼Œè‡ªå·±åšé¡¹ç›®çš„è¯ä¸€èˆ¬æ˜¯æ²¡äººæ”»å‡»ä½ çš„ï¼Œè€Œä¸”å¯¹è±¡å­˜å‚¨å¾ˆä¾¿å®œï¼Œæ­£å¸¸æƒ…å†µä¸‹æ¶ˆè€—çš„è´¹ç”¨å¯¥å¯¥æ— å‡ ã€‚</p></blockquote>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128144306980.png\" alt=\"image-20251128144306980\"></p>\n<p>ç„¶åä¸€ç›´ç‚¹å‡» â€œä¸‹ä¸€æ­¥â€ å³å¯ï¼š</p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128141652221.png\" alt=\"image-20251128141652221\"></p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128144337041.png\" alt=\"image-20251128144337041\"></p>\n<p>å¼€é€šæˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥è¯•ç€ä½¿ç”¨ web æ§åˆ¶å°ä¸Šä¼ å’Œæµè§ˆæ–‡ä»¶ï¼š</p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128141736178.png\" alt=\"image-20251128141736178\"></p>\n<p>ä¸Šä¼ æ–‡ä»¶åï¼Œå¯ä»¥ä½¿ç”¨å¯¹è±¡å­˜å‚¨æœåŠ¡ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„é»˜è®¤åŸŸåï¼Œåœ¨çº¿è®¿é—®å›¾ç‰‡ï¼š</p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128141820743.png\" alt=\"image-20251128141820743\"></p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128144400115.png\" alt=\"image-20251128144400115\"></p>\n<p>å½“ç„¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¼šä½¿ç”¨ç¨‹åºæ¥æ“ä½œå­˜å‚¨æ¡¶ï¼Œä¸‹é¢å°±æ¥å®ç°ã€‚</p>\n<p>ğŸ’¡ ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œç³»ç»Ÿæç¤ºæˆ‘ä»¬ â€œä½¿ç”¨é»˜è®¤åŸŸåâ€ æ˜¯é«˜é£é™©çš„ï¼Œå› ä¸ºå¯¹è±¡å­˜å‚¨çš„æºç«™åŸŸåé»˜è®¤æ˜¯ä¸æ”¯æŒæ›´æ¢çš„ï¼Œå¦‚æœæš´éœ²å‡ºå»è¢«æ”»å‡»è€…ç›¯ä¸Šäº†ï¼Œå¯èƒ½ä½ å°±åªèƒ½è¿ç§»åˆ°ä¸€ä¸ªæ–°çš„å­˜å‚¨æ¡¶äº†ã€‚æœ¬é¡¹ç›®æ•™ç¨‹åç»­ä¼šç»™å¤§å®¶åˆ†äº«æ›´å®‰å…¨çš„ä½¿ç”¨æ–¹å¼ã€‚</p>\n<h3 id=\"åç«¯æ“ä½œå¯¹è±¡å­˜å‚¨\"><a href=\"#åç«¯æ“ä½œå¯¹è±¡å­˜å‚¨\" class=\"headerlink\" title=\"åç«¯æ“ä½œå¯¹è±¡å­˜å‚¨\"></a>åç«¯æ“ä½œå¯¹è±¡å­˜å‚¨</h3><p>å¦‚ä½•åœ¨ Java ç¨‹åºä¸­ä½¿ç”¨å¯¹è±¡å­˜å‚¨å‘¢ï¼Ÿ</p>\n<p>å…¶å®éå¸¸ç®€å•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¬¬ä¸‰æ–¹æœåŠ¡éƒ½ä¼šæä¾›æ¯”è¾ƒè´´å¿ƒçš„æ–‡æ¡£æ•™ç¨‹ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬å‚è€ƒ<a href=\"https://cloud.tencent.com/document/product/436/10199\">å®˜æ–¹çš„å¿«é€Ÿå…¥é—¨æˆ– Java SDK æ–‡æ¡£</a>ï¼Œå°±èƒ½å¿«é€Ÿå…¥é—¨åŸºæœ¬æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥éƒ½æœ‰ï¼‰ã€‚</p>\n<p>è¿˜æœ‰æ›´é«˜çº§çš„å­¦ä¹ æ“ä½œæ–¹æ³•ï¼Œå¦‚æœä½ æ˜¯è…¾è®¯äº‘ç†Ÿç»ƒç”¨æˆ·ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <a href=\"https://console.cloud.tencent.com/api/explorer?Product=cos&Version=2018-11-26&Action=PutBucket\">API Explorer</a>ï¼Œåœ¨çº¿å¯»æ‰¾æ“ä½œå’Œç¤ºä¾‹ä»£ç ã€‚</p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128142644840.png\" alt=\"image-20251128142644840\"></p>\n<h4 id=\"1ã€åˆå§‹åŒ–å®¢æˆ·ç«¯\"><a href=\"#1ã€åˆå§‹åŒ–å®¢æˆ·ç«¯\" class=\"headerlink\" title=\"1ã€åˆå§‹åŒ–å®¢æˆ·ç«¯\"></a>1ã€åˆå§‹åŒ–å®¢æˆ·ç«¯</h4><p>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä»¬è¦å…ˆåˆå§‹åŒ–ä¸€ä¸ª COS å®¢æˆ·ç«¯å¯¹è±¡ï¼Œå’Œå¯¹è±¡å­˜å‚¨æœåŠ¡è¿›è¡Œäº¤äº’ã€‚</p>\n<p>1ï¼‰å¼•å…¥ COS ä¾èµ–ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;  </span><br><span class=\"line\">    &lt;groupId&gt;com.qcloud&lt;/groupId&gt;  </span><br><span class=\"line\">    &lt;artifactId&gt;cos_api&lt;/artifactId&gt;  </span><br><span class=\"line\">    &lt;version&gt;<span class=\"number\">5.6</span><span class=\"number\">.227</span>&lt;/version&gt;  </span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p>2ï¼‰åœ¨é¡¹ç›®çš„ <code>config</code> åŒ…ä¸‹æ–°å»º <code>CosClientConfig</code> ç±»ã€‚è´Ÿè´£è¯»å–é…ç½®æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª COS å®¢æˆ·ç«¯çš„ Beanã€‚ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span>  </span><br><span class=\"line\"><span class=\"meta\">@ConfigurationProperties(prefix = &quot;cos.client&quot;)</span>  </span><br><span class=\"line\"><span class=\"meta\">@Data</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">CosClientConfig</span> &#123;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> String host;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> String secretId;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> String secretKey;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> String region;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> String bucket;  </span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"meta\">@Bean</span>  </span><br><span class=\"line\">    <span class=\"keyword\">public</span> COSClient <span class=\"title function_\">cosClient</span><span class=\"params\">()</span> &#123;  </span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"type\">COSCredentials</span> <span class=\"variable\">cred</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BasicCOSCredentials</span>(secretId, secretKey);  </span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"type\">ClientConfig</span> <span class=\"variable\">clientConfig</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ClientConfig</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Region</span>(region));  </span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">COSClient</span>(cred, clientConfig);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3ï¼‰å¡«å†™é…ç½®æ–‡ä»¶ã€‚</p>\n<p><strong>ä¸€å®šè¦æ³¨æ„é˜²æ­¢å¯†ç æ³„éœ²ï¼</strong></p>\n<p><code>application.yml</code> é…ç½®ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">cos:</span>  </span><br><span class=\"line\">  <span class=\"attr\">client:</span>  </span><br><span class=\"line\">    <span class=\"attr\">host:</span> <span class=\"string\">xxx</span>  </span><br><span class=\"line\">    <span class=\"attr\">secretId:</span> <span class=\"string\">xxx</span>  </span><br><span class=\"line\">    <span class=\"attr\">secretKey:</span> <span class=\"string\">xxx</span>  </span><br><span class=\"line\">    <span class=\"attr\">region:</span> <span class=\"string\">xxx</span>  </span><br><span class=\"line\">    <span class=\"attr\">bucket:</span> <span class=\"string\">xxx</span></span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼åˆ†åˆ«è·å–éœ€è¦çš„é…ç½®ã€‚</p>\n<p>host ä¸ºå­˜å‚¨æ¡¶åŸŸåï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å‰é¢è®¿é—®æµ‹è¯•ä¸Šä¼ çš„å›¾ç‰‡çš„åŸŸåï¼Œå¯ä»¥åœ¨ COS æ§åˆ¶å°çš„åŸŸåä¿¡æ¯éƒ¨åˆ†æ‰¾åˆ°ï¼š</p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128144225183.png\" alt=\"image-20251128144225183\"></p>\n<p>secretIdã€secretKey å¯†é’¥å¯¹ï¼šåœ¨<a href=\"https://console.cloud.tencent.com/cam/capi\">è…¾è®¯äº‘è®¿é—®ç®¡ç†</a> &#x3D;&gt; å¯†é’¥ç®¡ç†ä¸­è·å–ã€‚</p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128144438712.png\" alt=\"image-20251128144438712\"></p>\n<p>region è¡¨ç¤ºåœ°åŸŸåï¼Œå¯ä»¥ <a href=\"https://cloud.tencent.com/document/product/436/6224\">ç‚¹æ­¤è·å–</a>ã€‚</p>\n<p>bucket æ˜¯å­˜å‚¨æ¡¶åï¼Œå¯ä»¥ç‚¹è¿›å­˜å‚¨æ¡¶è¯¦æƒ…é¡µè·å–ï¼š</p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128144541404.png\" alt=\"image-20251128144541404\"></p>\n<h4 id=\"2ã€é€šç”¨èƒ½åŠ›ç±»\"><a href=\"#2ã€é€šç”¨èƒ½åŠ›ç±»\" class=\"headerlink\" title=\"2ã€é€šç”¨èƒ½åŠ›ç±»\"></a>2ã€é€šç”¨èƒ½åŠ›ç±»</h4><p>åœ¨ <code>manager</code> åŒ…ä¸‹æ–°å»º <code>CosManager</code> ç±»ï¼Œæä¾›é€šç”¨çš„å¯¹è±¡å­˜å‚¨æ“ä½œï¼Œæ¯”å¦‚æ–‡ä»¶ä¸Šä¼ ã€æ–‡ä»¶ä¸‹è½½ç­‰ã€‚</p>\n<p>ğŸ’¡ Manager ä¹Ÿæ˜¯äººä¸ºçº¦å®šçš„ä¸€ç§å†™æ³•ï¼Œè¡¨ç¤ºé€šç”¨çš„ã€å¯å¤ç”¨çš„èƒ½åŠ›ï¼Œå¯ä¾›å…¶ä»–ä»£ç ï¼ˆæ¯”å¦‚ Serviceï¼‰è°ƒç”¨ã€‚</p>\n<p>è¯¥ç±»éœ€è¦å¼•å…¥å¯¹è±¡å­˜å‚¨é…ç½®å’Œ COS å®¢æˆ·ç«¯ï¼Œç”¨äºå’Œ COS è¿›è¡Œäº¤äº’ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">CosManager</span> &#123;  </span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"meta\">@Resource</span>  </span><br><span class=\"line\">    <span class=\"keyword\">private</span> CosClientConfig cosClientConfig;  </span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"meta\">@Resource</span>  </span><br><span class=\"line\">    <span class=\"keyword\">private</span> COSClient cosClient;  </span><br><span class=\"line\">  </span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3ã€æ–‡ä»¶ä¸Šä¼ \"><a href=\"#3ã€æ–‡ä»¶ä¸Šä¼ \" class=\"headerlink\" title=\"3ã€æ–‡ä»¶ä¸Šä¼ \"></a>3ã€æ–‡ä»¶ä¸Šä¼ </h4><p>å‚è€ƒ <a href=\"https://cloud.tencent.com/document/product/436/65935\">å®˜æ–¹æ–‡æ¡£</a> çš„ â€œä¸Šä¼ å¯¹è±¡â€ éƒ¨åˆ†ï¼Œå¯ä»¥ç¼–å†™å‡ºæ–‡ä»¶ä¸Šä¼ çš„ä»£ç ã€‚</p>\n<p>1ï¼‰<code>CosManager</code> æ–°å¢ä¸Šä¼ å¯¹è±¡çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> PutObjectResult <span class=\"title function_\">putObject</span><span class=\"params\">(String key, File file)</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">PutObjectRequest</span> <span class=\"variable\">putObjectRequest</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">PutObjectRequest</span>(cosClientConfig.getBucket(), key,  </span><br><span class=\"line\">            file);  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> cosClient.putObject(putObjectRequest);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>2ï¼‰ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œåœ¨ <code>FileController</code> ä¸­ç¼–å†™æµ‹è¯•æ–‡ä»¶ä¸Šä¼ æ¥å£ã€‚</p>\n<p>æ ¸å¿ƒæµç¨‹æ˜¯å…ˆæ¥å—ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ï¼ŒæŒ‡å®šä¸Šä¼ çš„è·¯å¾„ï¼Œç„¶åè°ƒç”¨ <code>cosManager.putObject</code> æ–¹æ³•ä¸Šä¼ æ–‡ä»¶åˆ° COS å¯¹è±¡å­˜å‚¨ï¼›ä¸Šä¼ æˆåŠŸåï¼Œä¼šè¿”å›ä¸€ä¸ªæ–‡ä»¶çš„ keyï¼ˆå…¶å®å°±æ˜¯æ–‡ä»¶è·¯å¾„ï¼‰ï¼Œä¾¿äºæˆ‘ä»¬è®¿é—®å’Œä¸‹è½½æ–‡ä»¶ã€‚</p>\n<p><strong>éœ€è¦æ³¨æ„ï¼Œæµ‹è¯•æ¥å£ä¸€å®šè¦åŠ ä¸Šç®¡ç†å‘˜æƒé™ï¼é˜²æ­¢ä»»ä½•ç”¨æˆ·éšæ„ä¸Šä¼ æ–‡ä»¶ã€‚</strong></p>\n<p>æµ‹è¯•æ–‡ä»¶ä¸Šä¼ æ¥å£ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@AuthCheck(mustRole = UserConstant.ADMIN_ROLE)</span>  </span><br><span class=\"line\"><span class=\"meta\">@PostMapping(&quot;/test/upload&quot;)</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span> BaseResponse&lt;String&gt; <span class=\"title function_\">testUploadFile</span><span class=\"params\">(<span class=\"meta\">@RequestPart(&quot;file&quot;)</span> MultipartFile multipartFile)</span> &#123;  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">filename</span> <span class=\"operator\">=</span> multipartFile.getOriginalFilename();  </span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">filepath</span> <span class=\"operator\">=</span> String.format(<span class=\"string\">&quot;/test/%s&quot;</span>, filename);  </span><br><span class=\"line\">    <span class=\"type\">File</span> <span class=\"variable\">file</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;  </span><br><span class=\"line\">        </span><br><span class=\"line\">        file = File.createTempFile(filepath, <span class=\"literal\">null</span>);  </span><br><span class=\"line\">        multipartFile.transferTo(file);  </span><br><span class=\"line\">        cosManager.putObject(filepath, file);  </span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> ResultUtils.success(filepath);  </span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;  </span><br><span class=\"line\">        log.error(<span class=\"string\">&quot;file upload error, filepath = &quot;</span> + filepath, e);  </span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BusinessException</span>(ErrorCode.SYSTEM_ERROR, <span class=\"string\">&quot;ä¸Šä¼ å¤±è´¥&quot;</span>);  </span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (file != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"type\">boolean</span> <span class=\"variable\">delete</span> <span class=\"operator\">=</span> file.delete();  </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!delete) &#123;  </span><br><span class=\"line\">                log.error(<span class=\"string\">&quot;file delete error, filepath = &#123;&#125;&quot;</span>, filepath);  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4ã€æ–‡ä»¶ä¸‹è½½\"><a href=\"#4ã€æ–‡ä»¶ä¸‹è½½\" class=\"headerlink\" title=\"4ã€æ–‡ä»¶ä¸‹è½½\"></a>4ã€æ–‡ä»¶ä¸‹è½½</h4><p>å®˜æ–¹æ–‡æ¡£ä»‹ç»äº† 2 ç§æ–‡ä»¶ä¸‹è½½æ–¹å¼ã€‚ä¸€ç§æ˜¯ç›´æ¥ä¸‹è½½ COS çš„æ–‡ä»¶åˆ°åç«¯æœåŠ¡å™¨ï¼ˆé€‚åˆæœåŠ¡å™¨ç«¯å¤„ç†æ–‡ä»¶ï¼‰ï¼Œå¦ä¸€ç§æ˜¯è·å–åˆ°æ–‡ä»¶ä¸‹è½½è¾“å…¥æµï¼ˆé€‚åˆè¿”å›ç»™å‰ç«¯ç”¨æˆ·ï¼‰ã€‚</p>\n<p>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p>\n<ul>\n<li><a href=\"https://cloud.tencent.com/document/product/436/65937\">https://cloud.tencent.com/document/product/436/65937</a></li>\n<li><a href=\"https://cloud.tencent.com/document/product/436/10199#.E4.B8.8B.E8.BD.BD.E5.AF.B9.E8.B1.A1\">https://cloud.tencent.com/document/product/436/10199#.E4.B8.8B.E8.BD.BD.E5.AF.B9.E8.B1.A1</a></li>\n</ul>\n<p>å…¶å®è¿˜æœ‰ç¬¬ä¸‰ç§ â€œä¸‹è½½æ–¹å¼â€ï¼Œç›´æ¥é€šè¿‡ URL è·¯å¾„é“¾æ¥è®¿é—®ï¼Œé€‚ç”¨äºå•ä¸€çš„ã€å¯ä»¥è¢«ç”¨æˆ·å…¬å¼€è®¿é—®çš„èµ„æºï¼Œæ¯”å¦‚ç”¨æˆ·å¤´åƒã€æœ¬é¡¹ç›®ä¸­çš„å…¬å¼€å›¾ç‰‡ã€‚</p>\n<p>ğŸ’¡ å¯¹äºå®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ï¼Œå»ºè®®å…ˆé€šè¿‡åç«¯æœåŠ¡å™¨è¿›è¡Œæƒé™æ ¡éªŒï¼Œç„¶åä» COS ä¸‹è½½æ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼Œå†è¿”å›ç»™å‰ç«¯ï¼Œè¿™æ ·å¯ä»¥åœ¨åç«¯é™åˆ¶åªæœ‰ç™»å½•ç”¨æˆ·æ‰èƒ½ä¸‹è½½ã€‚</p>\n<p>ä¸è¿‡è¿˜æœ‰æ›´å·§å¦™çš„æ–¹å¼ï¼Œå…ˆé€šè¿‡åç«¯æœåŠ¡å™¨è¿›è¡Œæƒé™æ ¡éªŒï¼Œç„¶åè¿”å›ç»™å‰ç«¯ä¸€ä¸ªä¸´æ—¶ç§˜é’¥ï¼Œä¹‹åå‰ç«¯å¯ä»¥å‡­å€Ÿè¯¥ç§˜é’¥ç›´æ¥ä»å¯¹è±¡å­˜å‚¨ä¸‹è½½ï¼Œä¸ç”¨ç»è¿‡æœåŠ¡ç«¯ä¸­è½¬ï¼Œæ€§èƒ½æ›´é«˜ã€‚</p>\n<p><strong>å¯¹äºæˆ‘ä»¬ç›®å‰çš„é¡¹ç›®ï¼Œå›¾ç‰‡æœ¬èº«å°±æ˜¯å…¬å¼€çš„ï¼Œç›´æ¥ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼ï¼Œå‡­å€Ÿ URL è¿æ¥è®¿é—®å³å¯ã€‚</strong></p>\n<p>ä½†æ˜¯ä½œä¸ºä¸€ä¸ªå°çŸ¥è¯†ï¼Œè¿˜æ˜¯ç»™å¤§å®¶æ¼”ç¤ºå¦‚ä½•å°†å¯¹è±¡å­˜å‚¨çš„æ–‡ä»¶ä¸‹è½½åˆ°æœåŠ¡å™¨ä¸­ã€‚</p>\n<p>1ï¼‰é¦–å…ˆåœ¨ <code>CosManager</code> ä¸­æ–°å¢å¯¹è±¡ä¸‹è½½æ–¹æ³•ï¼Œæ ¹æ®å¯¹è±¡çš„ key è·å–å­˜å‚¨ä¿¡æ¯ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> COSObject <span class=\"title function_\">getObject</span><span class=\"params\">(String key)</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">GetObjectRequest</span> <span class=\"variable\">getObjectRequest</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">GetObjectRequest</span>(cosClientConfig.getBucket(), key);  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> cosClient.getObject(getObjectRequest);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>2ï¼‰ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œåœ¨ <code>FileController</code> ä¸­ç¼–å†™æµ‹è¯•æ–‡ä»¶ä¸‹è½½æ¥å£ã€‚</p>\n<p>æ ¸å¿ƒæµç¨‹æ˜¯æ ¹æ®è·¯å¾„è·å–åˆ° COS æ–‡ä»¶å¯¹è±¡ï¼Œç„¶åå°†æ–‡ä»¶å¯¹è±¡è½¬æ¢ä¸ºæ–‡ä»¶æµï¼Œå¹¶å†™å…¥åˆ° Servlet çš„ Response å¯¹è±¡ä¸­ã€‚æ³¨æ„è¦è®¾ç½®æ–‡ä»¶ä¸‹è½½ä¸“å±çš„å“åº”å¤´ã€‚</p>\n<p>åŒä¸Šï¼Œæµ‹è¯•æ¥å£ä¸€å®šè¦åŠ ä¸Šç®¡ç†å‘˜æƒé™ï¼é˜²æ­¢ä»»ä½•ç”¨æˆ·éšæ„ä¸Šä¼ æ–‡ä»¶ã€‚</p>\n<p>æµ‹è¯•æ–‡ä»¶ä¸‹è½½æ¥å£ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@AuthCheck(mustRole = UserConstant.ADMIN_ROLE)</span>  </span><br><span class=\"line\"><span class=\"meta\">@GetMapping(&quot;/test/download/&quot;)</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDownloadFile</span><span class=\"params\">(String filepath, HttpServletResponse response)</span> <span class=\"keyword\">throws</span> IOException &#123;  </span><br><span class=\"line\">    <span class=\"type\">COSObjectInputStream</span> <span class=\"variable\">cosObjectInput</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;  </span><br><span class=\"line\">        <span class=\"type\">COSObject</span> <span class=\"variable\">cosObject</span> <span class=\"operator\">=</span> cosManager.getObject(filepath);  </span><br><span class=\"line\">        cosObjectInput = cosObject.getObjectContent();  </span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"type\">byte</span>[] bytes = IOUtils.toByteArray(cosObjectInput);  </span><br><span class=\"line\">        </span><br><span class=\"line\">        response.setContentType(<span class=\"string\">&quot;application/octet-stream;charset=UTF-8&quot;</span>);  </span><br><span class=\"line\">        response.setHeader(<span class=\"string\">&quot;Content-Disposition&quot;</span>, <span class=\"string\">&quot;attachment; filename=&quot;</span> + filepath);  </span><br><span class=\"line\">        </span><br><span class=\"line\">        response.getOutputStream().write(bytes);  </span><br><span class=\"line\">        response.getOutputStream().flush();  </span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;  </span><br><span class=\"line\">        log.error(<span class=\"string\">&quot;file download error, filepath = &quot;</span> + filepath, e);  </span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BusinessException</span>(ErrorCode.SYSTEM_ERROR, <span class=\"string\">&quot;ä¸‹è½½å¤±è´¥&quot;</span>);  </span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cosObjectInput != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">            cosObjectInput.close();  </span><br><span class=\"line\">        &#125;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"5ã€é€šç”¨æ–‡ä»¶ä¸Šä¼ æœåŠ¡\"><a href=\"#5ã€é€šç”¨æ–‡ä»¶ä¸Šä¼ æœåŠ¡\" class=\"headerlink\" title=\"5ã€é€šç”¨æ–‡ä»¶ä¸Šä¼ æœåŠ¡\"></a>5ã€é€šç”¨æ–‡ä»¶ä¸Šä¼ æœåŠ¡</h4><p>ä¹‹å‰è™½ç„¶æˆ‘ä»¬å·²ç»ç¼–å†™äº†é€šç”¨çš„å¯¹è±¡å­˜å‚¨æ“ä½œç±» CosManagerï¼Œä½†è¿™ä¸ªç±»å¹¶ä¸èƒ½ç›´æ¥æ»¡è¶³æˆ‘ä»¬çš„å›¾ç‰‡ä¸Šä¼ éœ€æ±‚ã€‚</p>\n<p>æ¯”å¦‚ï¼š</p>\n<ul>\n<li>å›¾ç‰‡æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Ÿéœ€è¦æ ¡éªŒ</li>\n<li>å°†å›¾ç‰‡ä¸Šä¼ åˆ°å“ªé‡Œï¼Ÿéœ€è¦æŒ‡å®šè·¯å¾„</li>\n<li>å¦‚ä½•è§£æå›¾ç‰‡ï¼Ÿéœ€è¦ä½¿ç”¨æ•°æ®ä¸‡è±¡æœåŠ¡</li>\n</ul>\n<p>æ‰€ä»¥ï¼Œå¯ä»¥é’ˆå¯¹æˆ‘ä»¬çš„é¡¹ç›®ï¼Œç¼–å†™ä¸€ä¸ªæ›´è´´åˆä¸šåŠ¡çš„æ–‡ä»¶ä¸Šä¼ æœåŠ¡ FileManagerï¼ˆè¿™é‡Œç”¨ Service ä¹Ÿå¯ä»¥ï¼‰ï¼Œè¯¥æœåŠ¡æä¾›ä¸€ä¸ªä¸Šä¼ å›¾ç‰‡å¹¶è¿”å›å›¾ç‰‡è§£æä¿¡æ¯çš„æ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span>  </span><br><span class=\"line\"><span class=\"meta\">@Slf4j</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FileManager</span> &#123;  </span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"meta\">@Resource</span>  </span><br><span class=\"line\">    <span class=\"keyword\">private</span> CosClientConfig cosClientConfig;  </span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"meta\">@Resource</span>  </span><br><span class=\"line\">    <span class=\"keyword\">private</span> CosManager cosManager;  </span><br><span class=\"line\">  </span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>1ï¼‰åœ¨ <code>model.dto.file</code> ä¸­æ–°å¢ç”¨äºæ¥å—å›¾ç‰‡è§£æä¿¡æ¯çš„åŒ…è£…ç±»ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">UploadPictureResult</span> &#123;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> String url;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> String picName;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> Long picSize;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> picWidth;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"type\">int</span> picHeight;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> Double picScale;  </span><br><span class=\"line\">  </span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">private</span> String picFormat;  </span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>2ï¼‰å‚è€ƒ <a href=\"https://cloud.tencent.com/document/product/436/55377\">æ•°æ®ä¸‡è±¡</a> çš„æ–‡æ¡£ï¼Œåœ¨ CosManager ä¸­æ·»åŠ ä¸Šä¼ å›¾ç‰‡å¹¶è§£æå›¾ç‰‡çš„æ–¹æ³•ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> PutObjectResult <span class=\"title function_\">putPictureObject</span><span class=\"params\">(String key, File file)</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">PutObjectRequest</span> <span class=\"variable\">putObjectRequest</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">PutObjectRequest</span>(cosClientConfig.getBucket(), key,  </span><br><span class=\"line\">            file);  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">PicOperations</span> <span class=\"variable\">picOperations</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">PicOperations</span>();  </span><br><span class=\"line\">    </span><br><span class=\"line\">    picOperations.setIsPicInfo(<span class=\"number\">1</span>);  </span><br><span class=\"line\">    </span><br><span class=\"line\">    putObjectRequest.setPicOperations(picOperations);  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> cosClient.putObject(putObjectRequest);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœä½ ä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡æ•°æ®ä¸‡è±¡ï¼Œéœ€è¦å…ˆ <a href=\"https://console.cloud.tencent.com/ci\">å¼€é€šæ•°æ®ä¸‡è±¡å¹¶æˆæƒ</a>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š</p>\n<p><img src=\"/post/COS%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-1/image-20251128220655628.png\" alt=\"image-20251128220655628\"></p>\n<p>3ï¼‰åœ¨ FileManager ä¸­ç¼–å†™ä¸Šä¼ å›¾ç‰‡çš„æ–¹æ³•ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> UploadPictureResult <span class=\"title function_\">uploadPicture</span><span class=\"params\">(MultipartFile multipartFile, String uploadPathPrefix)</span> &#123;  </span><br><span class=\"line\">    </span><br><span class=\"line\">    validPicture(multipartFile);  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">uuid</span> <span class=\"operator\">=</span> RandomUtil.randomString(<span class=\"number\">16</span>);  </span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">originFilename</span> <span class=\"operator\">=</span> multipartFile.getOriginalFilename();  </span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">uploadFilename</span> <span class=\"operator\">=</span> String.format(<span class=\"string\">&quot;%s_%s.%s&quot;</span>, DateUtil.formatDate(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>()), uuid,  </span><br><span class=\"line\">            FileUtil.getSuffix(originFilename));  </span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">uploadPath</span> <span class=\"operator\">=</span> String.format(<span class=\"string\">&quot;/%s/%s&quot;</span>, uploadPathPrefix, uploadFilename);  </span><br><span class=\"line\">    <span class=\"type\">File</span> <span class=\"variable\">file</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;  </span><br><span class=\"line\">        </span><br><span class=\"line\">        file = File.createTempFile(uploadPath, <span class=\"literal\">null</span>);  </span><br><span class=\"line\">        multipartFile.transferTo(file);  </span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"type\">PutObjectResult</span> <span class=\"variable\">putObjectResult</span> <span class=\"operator\">=</span> cosManager.putPictureObject(uploadPath, file);  </span><br><span class=\"line\">        <span class=\"type\">ImageInfo</span> <span class=\"variable\">imageInfo</span> <span class=\"operator\">=</span> putObjectResult.getCiUploadResult().getOriginalInfo().getImageInfo();  </span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"type\">UploadPictureResult</span> <span class=\"variable\">uploadPictureResult</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">UploadPictureResult</span>();  </span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">picWidth</span> <span class=\"operator\">=</span> imageInfo.getWidth();  </span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">picHeight</span> <span class=\"operator\">=</span> imageInfo.getHeight();  </span><br><span class=\"line\">        <span class=\"type\">double</span> <span class=\"variable\">picScale</span> <span class=\"operator\">=</span> NumberUtil.round(picWidth * <span class=\"number\">1.0</span> / picHeight, <span class=\"number\">2</span>).doubleValue();  </span><br><span class=\"line\">        uploadPictureResult.setPicName(FileUtil.mainName(originFilename));  </span><br><span class=\"line\">        uploadPictureResult.setPicWidth(picWidth);  </span><br><span class=\"line\">        uploadPictureResult.setPicHeight(picHeight);  </span><br><span class=\"line\">        uploadPictureResult.setPicScale(picScale);  </span><br><span class=\"line\">        uploadPictureResult.setPicFormat(imageInfo.getFormat());  </span><br><span class=\"line\">        uploadPictureResult.setPicSize(FileUtil.size(file));  </span><br><span class=\"line\">        uploadPictureResult.setUrl(cosClientConfig.getHost() + <span class=\"string\">&quot;/&quot;</span> + uploadPath);  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> uploadPictureResult;  </span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;  </span><br><span class=\"line\">        log.error(<span class=\"string\">&quot;å›¾ç‰‡ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨å¤±è´¥&quot;</span>, e);  </span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BusinessException</span>(ErrorCode.SYSTEM_ERROR, <span class=\"string\">&quot;ä¸Šä¼ å¤±è´¥&quot;</span>);  </span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;  </span><br><span class=\"line\">        <span class=\"built_in\">this</span>.deleteTempFile(file);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">validPicture</span><span class=\"params\">(MultipartFile multipartFile)</span> &#123;  </span><br><span class=\"line\">    ThrowUtils.throwIf(multipartFile == <span class=\"literal\">null</span>, ErrorCode.PARAMS_ERROR, <span class=\"string\">&quot;æ–‡ä»¶ä¸èƒ½ä¸ºç©º&quot;</span>);  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"variable\">fileSize</span> <span class=\"operator\">=</span> multipartFile.getSize();  </span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"type\">long</span> <span class=\"variable\">ONE_M</span> <span class=\"operator\">=</span> <span class=\"number\">1024</span> * <span class=\"number\">1024L</span>;  </span><br><span class=\"line\">    ThrowUtils.throwIf(fileSize &gt; <span class=\"number\">2</span> * ONE_M, ErrorCode.PARAMS_ERROR, <span class=\"string\">&quot;æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 2M&quot;</span>);  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">fileSuffix</span> <span class=\"operator\">=</span> FileUtil.getSuffix(multipartFile.getOriginalFilename());  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">final</span> List&lt;String&gt; ALLOW_FORMAT_LIST = Arrays.asList(<span class=\"string\">&quot;jpeg&quot;</span>, <span class=\"string\">&quot;jpg&quot;</span>, <span class=\"string\">&quot;png&quot;</span>, <span class=\"string\">&quot;webp&quot;</span>);  </span><br><span class=\"line\">    ThrowUtils.throwIf(!ALLOW_FORMAT_LIST.contains(fileSuffix), ErrorCode.PARAMS_ERROR, <span class=\"string\">&quot;æ–‡ä»¶ç±»å‹é”™è¯¯&quot;</span>);  </span><br><span class=\"line\">&#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deleteTempFile</span><span class=\"params\">(File file)</span> &#123;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (file == <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"variable\">deleteResult</span> <span class=\"operator\">=</span> file.delete();  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!deleteResult) &#123;  </span><br><span class=\"line\">        log.error(<span class=\"string\">&quot;file delete error, filepath = &#123;&#125;&quot;</span>, file.getAbsolutePath());  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šè¿°ä»£ç ä¸­æœ‰å‡ ä¸ªå®ç°å…³é”®ï¼š</p>\n<ol>\n<li>ç”±äºæ–‡ä»¶æ ¡éªŒè§„åˆ™è¾ƒå¤æ‚ï¼Œå•ç‹¬æŠ½è±¡ä¸º validPicture æ–¹æ³•ï¼Œå¯¹æ–‡ä»¶å¤§å°ã€ç±»å‹è¿›è¡Œæ ¡éªŒã€‚</li>\n<li>æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œä¼šå…ˆåœ¨æœ¬åœ°åˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼Œæ— è®ºä¸Šä¼ æ˜¯å¦æˆåŠŸï¼Œéƒ½è¦è®°å¾—åˆ é™¤ä¸´æ—¶æ–‡ä»¶ï¼Œå¦åˆ™ä¼šå¯¼è‡´èµ„æºæ³„éœ²ã€‚</li>\n<li>å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šä¹‰æ–‡ä»¶ä¸Šä¼ åœ°å€ï¼Œæ¯”å¦‚æ­¤å¤„é±¼çš®ç»™æ–‡ä»¶åå‰å¢åŠ äº†ä¸Šä¼ æ—¥æœŸå’Œ 16 ä½ uuid éšæœºæ•°ï¼Œä¾¿äºäº†è§£æ–‡ä»¶ä¸Šä¼ æ—¶é—´å¹¶é˜²æ­¢æ–‡ä»¶é‡å¤ã€‚è¿˜é¢„ç•™äº†ä¸€ä¸ª uploadPathPrefix å‚æ•°ï¼Œç”±è°ƒç”¨æ–¹æŒ‡å®šä¸Šä¼ æ–‡ä»¶åˆ°å“ªä¸ªç›®å½•ã€‚</li>\n</ol>\n<p>ğŸ’¡ å¦‚æœå¤šä¸ªé¡¹ç›®å…±äº«å­˜å‚¨æ¡¶ï¼Œå¯ä»¥ç»™ä¸Šä¼ æ–‡ä»¶è·¯å¾„å†åŠ ä¸€ä¸ª ProjectName å‰ç¼€ã€‚ä¸è¿‡å»ºè®®è¿˜æ˜¯æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹åˆ†é…èµ„æºã€‚</p>\n<h4 id=\"6ã€æœåŠ¡å¼€å‘\"><a href=\"#6ã€æœåŠ¡å¼€å‘\" class=\"headerlink\" title=\"6ã€æœåŠ¡å¼€å‘\"></a>6ã€æœåŠ¡å¼€å‘</h4><p>åœ¨ PictureService ä¸­ç¼–å†™ä¸Šä¼ å›¾ç‰‡çš„æ–¹æ³•ï¼š</p>\n<p>æ¥å£ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PictureVO <span class=\"title function_\">uploadPicture</span><span class=\"params\">(MultipartFile multipartFile,  </span></span><br><span class=\"line\"><span class=\"params\">                        PictureUploadRequest pictureUploadRequest,  </span></span><br><span class=\"line\"><span class=\"params\">                        User loginUser)</span>;</span><br></pre></td></tr></table></figure>\n\n<p>å®ç°ç±»ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span> PictureVO <span class=\"title function_\">uploadPicture</span><span class=\"params\">(MultipartFile multipartFile, PictureUploadRequest pictureUploadRequest, User loginUser)</span> &#123;  </span><br><span class=\"line\">    ThrowUtils.throwIf(loginUser == <span class=\"literal\">null</span>, ErrorCode.NO_AUTH_ERROR);  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">Long</span> <span class=\"variable\">pictureId</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;  </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pictureUploadRequest != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">        pictureId = pictureUploadRequest.getId();  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pictureId != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">        <span class=\"type\">boolean</span> <span class=\"variable\">exists</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.lambdaQuery()  </span><br><span class=\"line\">                .eq(Picture::getId, pictureId)  </span><br><span class=\"line\">                .exists();  </span><br><span class=\"line\">        ThrowUtils.throwIf(!exists, ErrorCode.NOT_FOUND_ERROR, <span class=\"string\">&quot;å›¾ç‰‡ä¸å­˜åœ¨&quot;</span>);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">uploadPathPrefix</span> <span class=\"operator\">=</span> String.format(<span class=\"string\">&quot;public/%s&quot;</span>, loginUser.getId());  </span><br><span class=\"line\">    <span class=\"type\">UploadPictureResult</span> <span class=\"variable\">uploadPictureResult</span> <span class=\"operator\">=</span> fileManager.uploadPicture(multipartFile, uploadPathPrefix);  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">Picture</span> <span class=\"variable\">picture</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Picture</span>();  </span><br><span class=\"line\">    picture.setUrl(uploadPictureResult.getUrl());  </span><br><span class=\"line\">    picture.setName(uploadPictureResult.getPicName());  </span><br><span class=\"line\">    picture.setPicSize(uploadPictureResult.getPicSize());  </span><br><span class=\"line\">    picture.setPicWidth(uploadPictureResult.getPicWidth());  </span><br><span class=\"line\">    picture.setPicHeight(uploadPictureResult.getPicHeight());  </span><br><span class=\"line\">    picture.setPicScale(uploadPictureResult.getPicScale());  </span><br><span class=\"line\">    picture.setPicFormat(uploadPictureResult.getPicFormat());  </span><br><span class=\"line\">    picture.setUserId(loginUser.getId());  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pictureId != <span class=\"literal\">null</span>) &#123;  </span><br><span class=\"line\">        </span><br><span class=\"line\">        picture.setId(pictureId);  </span><br><span class=\"line\">        picture.setEditTime(<span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">    <span class=\"type\">boolean</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.saveOrUpdate(picture);  </span><br><span class=\"line\">    ThrowUtils.throwIf(!result, ErrorCode.OPERATION_ERROR, <span class=\"string\">&quot;å›¾ç‰‡ä¸Šä¼ å¤±è´¥&quot;</span>);  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> PictureVO.objToVo(picture);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæ³¨æ„ï¼š</p>\n<ol>\n<li>æˆ‘ä»¬å°†æ‰€æœ‰å›¾ç‰‡éƒ½æ”¾åˆ°äº† public ç›®å½•ä¸‹ï¼Œå¹¶ä¸”æ¯ä¸ªç”¨æˆ·çš„å›¾ç‰‡å­˜å‚¨åˆ°å¯¹åº”ç”¨æˆ· id çš„ç›®å½•ä¸‹ï¼Œä¾¿äºç®¡ç†ã€‚</li>\n<li>å¦‚æœ pictureId ä¸ä¸ºç©ºï¼Œè¡¨ç¤ºæ›´æ–°å·²æœ‰å›¾ç‰‡çš„ä¿¡æ¯ï¼Œéœ€è¦åˆ¤æ–­å¯¹åº” id çš„å›¾ç‰‡æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ›´æ–°æ—¶è¦æŒ‡å®š editTime ç¼–è¾‘æ—¶é—´ã€‚å¯ä»¥è°ƒç”¨ MyBatis Plus æä¾›çš„ saveOrUpdate æ–¹æ³•å…¼å®¹åˆ›å»ºå’Œæ›´æ–°æ“ä½œã€‚</li>\n</ol>\n<h4 id=\"7ã€æ¥å£å¼€å‘\"><a href=\"#7ã€æ¥å£å¼€å‘\" class=\"headerlink\" title=\"7ã€æ¥å£å¼€å‘\"></a>7ã€æ¥å£å¼€å‘</h4><p>åœ¨ PictureController ä¸­ç¼–å†™ä¸Šä¼ å›¾ç‰‡æ¥å£ï¼Œæ³¨æ„ä»…ç®¡ç†å‘˜å¯ç”¨ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@PostMapping(&quot;/upload&quot;)</span>  </span><br><span class=\"line\"><span class=\"meta\">@AuthCheck(mustRole = UserConstant.ADMIN_ROLE)</span>  </span><br><span class=\"line\"><span class=\"keyword\">public</span> BaseResponse&lt;PictureVO&gt; <span class=\"title function_\">uploadPicture</span><span class=\"params\">(  </span></span><br><span class=\"line\"><span class=\"params\">        <span class=\"meta\">@RequestPart(&quot;file&quot;)</span> MultipartFile multipartFile,  </span></span><br><span class=\"line\"><span class=\"params\">        PictureUploadRequest pictureUploadRequest,  </span></span><br><span class=\"line\"><span class=\"params\">        HttpServletRequest request)</span> &#123;  </span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">loginUser</span> <span class=\"operator\">=</span> userService.getLoginUser(request);  </span><br><span class=\"line\">    <span class=\"type\">PictureVO</span> <span class=\"variable\">pictureVO</span> <span class=\"operator\">=</span> pictureService.uploadPicture(multipartFile, pictureUploadRequest, loginUser);  </span><br><span class=\"line\">    <span class=\"keyword\">return</span> ResultUtils.success(pictureVO);  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"8ã€æµ‹è¯•\"><a href=\"#8ã€æµ‹è¯•\" class=\"headerlink\" title=\"8ã€æµ‹è¯•\"></a>8ã€æµ‹è¯•</h4><p>ä½¿ç”¨ Swagger è¿›è¡Œæµ‹è¯•ï¼Œå‘ç°å½“ä¸Šä¼ å›¾ç‰‡è¿‡å¤§æ—¶ï¼Œä¼šè§¦å‘ä¸€æ®µæŠ¥é”™ã€‚ä½†è¿™ä¸ªæŠ¥é”™ä¸æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„å¼‚å¸¸å¯¼è‡´çš„ï¼Œè€Œæ˜¯ç”±äº Tomcat æœåŠ¡å™¨é»˜è®¤é™åˆ¶äº†è¯·æ±‚ä¸­æ–‡ä»¶ä¸Šä¼ çš„å¤§å°ã€‚</p>\n<p>éœ€è¦åœ¨ <code>application.yml</code> ä¸­æ›´æ”¹é…ç½®ï¼Œè°ƒå¤§å…è®¸ä¸Šä¼ çš„æ–‡ä»¶å¤§å°ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">spring:  </span><br><span class=\"line\">  </span><br><span class=\"line\">  servlet:  </span><br><span class=\"line\">    multipart:  </span><br><span class=\"line\">      max-file-size: 10MB</span><br></pre></td></tr></table></figure>\n\n<p>ç›®å‰åœ¨æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œä¼šå…ˆåœ¨æœ¬åœ°åˆ›å»ºä¸´æ—¶æ–‡ä»¶ã€‚å¦‚æœä½ ä¸éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œé¢å¤–çš„å¤„ç†ã€æƒ³è¿›ä¸€æ­¥æé«˜æ€§èƒ½ï¼Œå¯ä»¥ç›´æ¥ç”¨æµçš„æ–¹å¼å°†è¯·æ±‚ä¸­çš„æ–‡ä»¶ä¸Šä¼ åˆ° COSã€‚ä»¥ä¸‹ä»£ç ä»…ä¾›å‚è€ƒï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title function_\">uploadToCOS</span><span class=\"params\">(MultipartFile multipartFile, String bucketName, String key)</span> <span class=\"keyword\">throws</span> Exception &#123;  </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">COSClient</span> <span class=\"variable\">cosClient</span> <span class=\"operator\">=</span> createCOSClient();  </span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"keyword\">try</span> (<span class=\"type\">InputStream</span> <span class=\"variable\">inputStream</span> <span class=\"operator\">=</span> multipartFile.getInputStream()) &#123;  </span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"type\">ObjectMetadata</span> <span class=\"variable\">metadata</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ObjectMetadata</span>();  </span><br><span class=\"line\">        metadata.setContentLength(multipartFile.getSize());  </span><br><span class=\"line\">        metadata.setContentType(multipartFile.getContentType());  </span><br><span class=\"line\">  </span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"type\">PutObjectRequest</span> <span class=\"variable\">putObjectRequest</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">PutObjectRequest</span>(bucketName, key, inputStream, metadata);  </span><br><span class=\"line\">  </span><br><span class=\"line\">        </span><br><span class=\"line\">        cosClient.putObject(putObjectRequest);  </span><br><span class=\"line\">  </span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;https://&quot;</span> + bucketName + <span class=\"string\">&quot;.cos.&quot;</span> + cosClient.getClientConfig().getRegion().getRegionName()  </span><br><span class=\"line\">               + <span class=\"string\">&quot;.myqcloud.com/&quot;</span> + key;  </span><br><span class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;  </span><br><span class=\"line\">        cosClient.shutdown();  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","feature":true,"text":"ğŸ’¡ å¯¹è±¡å­˜å‚¨ç­‰ç¬¬ä¸‰æ–¹äº‘æœåŠ¡é€šå¸¸æ˜¯ä»˜è´¹åŠŸèƒ½ï¼ŒæŒ‰ç…§å­˜å‚¨é‡ã€æµé‡ç­‰æ–¹å¼è®¡è´¹ã€‚ä¸è¿‡å¯¹äºå¤§å®¶å­¦ä¹ æ¥è¯´ï¼Œç”±äºå›¾ç‰‡å­˜å‚¨é‡å’Œè®¿é—®é‡ä¸å¤§ï¼Œä»·æ ¼éå¸¸ä¾¿å®œï¼ˆå‡ å…ƒ ~ å‡ åå…ƒï¼‰ï¼Œè€Œä¸”è¿˜...","permalink":"/post/COSå¯¹è±¡å­˜å‚¨-1","photos":[],"count_time":{"symbolsCount":"15k","symbolsTime":"14 mins."},"categories":[{"name":"å¯¹è±¡å­˜å‚¨","slug":"å¯¹è±¡å­˜å‚¨","count":1,"path":"api/categories/å¯¹è±¡å­˜å‚¨.json"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","count":3,"path":"api/tags/SpringBoot.json"},{"name":"Java","slug":"Java","count":3,"path":"api/tags/Java.json"},{"name":"å¯¹è±¡å­˜å‚¨","slug":"å¯¹è±¡å­˜å‚¨","count":1,"path":"api/tags/å¯¹è±¡å­˜å‚¨.json"},{"name":"æ’ä»¶","slug":"æ’ä»¶","count":4,"path":"api/tags/æ’ä»¶.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E5%9B%BE%E7%89%87%E7%9A%84%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">åˆ›å»ºå›¾ç‰‡çš„ä¸šåŠ¡æµç¨‹</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E8%A7%A3%E6%9E%90%E5%9B%BE%E7%89%87%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%9F\"><span class=\"toc-text\">å¦‚ä½•è§£æå›¾ç‰‡çš„ä¿¡æ¯ï¼Ÿ</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E5%B9%B6%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8\"><span class=\"toc-text\">åˆ›å»ºå¹¶ä½¿ç”¨å¯¹è±¡å­˜å‚¨</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%8E%E7%AB%AF%E6%93%8D%E4%BD%9C%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8\"><span class=\"toc-text\">åç«¯æ“ä½œå¯¹è±¡å­˜å‚¨</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AE%A2%E6%88%B7%E7%AB%AF\"><span class=\"toc-text\">1ã€åˆå§‹åŒ–å®¢æˆ·ç«¯</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2%E3%80%81%E9%80%9A%E7%94%A8%E8%83%BD%E5%8A%9B%E7%B1%BB\"><span class=\"toc-text\">2ã€é€šç”¨èƒ½åŠ›ç±»</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0\"><span class=\"toc-text\">3ã€æ–‡ä»¶ä¸Šä¼ </span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD\"><span class=\"toc-text\">4ã€æ–‡ä»¶ä¸‹è½½</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5%E3%80%81%E9%80%9A%E7%94%A8%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">5ã€é€šç”¨æ–‡ä»¶ä¸Šä¼ æœåŠ¡</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6%E3%80%81%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91\"><span class=\"toc-text\">6ã€æœåŠ¡å¼€å‘</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7%E3%80%81%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91\"><span class=\"toc-text\">7ã€æ¥å£å¼€å‘</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8%E3%80%81%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">8ã€æµ‹è¯•</span></a></li></ol></li></ol>","author":{"name":"Azer","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"<span style='font-size:30px;background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;'>æ€€æ°‘äº¦æœªå¯</span><span style='font-size:30px;'>ğŸ’•</span>","socials":{"github":"https://github.com/azer-2025","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_52541129?type=blog","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/1764589563?spm_id_from=333.1007.0.0"},"gitee":{"icon":"/svg/gitee.svg","link":"https://gitee.com/azzzer"}}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"Javaè‡ªå®šä¹‰æƒé™","uid":"2ce8b034845753ca77c49afec1ffd79e","slug":"Javaè‡ªå®šä¹‰æƒé™","date":"2025-11-28T02:31:40.000Z","updated":"2025-11-28T14:32:10.408Z","comments":true,"path":"api/articles/Javaè‡ªå®šä¹‰æƒé™.json","keywords":"VUEã€Pythonã€JAVA","cover":"/medias/quanxian.png","text":"0.å¦‚ä½•å¯¹ç”¨æˆ·æƒé™è¿›è¡Œæ§åˆ¶ï¼Ÿå¯ä»¥å°†æ¥å£åˆ†ä¸º 4 ç§æƒé™ï¼š æœªç™»å½•ä¹Ÿå¯ä»¥ä½¿ç”¨ ç™»å½•ç”¨æˆ·æ‰èƒ½ä½¿ç”¨ æœªç™»å½•ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯ç™»å½•ç”¨æˆ·èƒ½è¿›è¡Œæ›´å¤šæ“ä½œï¼ˆæ¯”å¦‚ç™»å½•åæŸ¥çœ‹å…¨æ–‡ï¼‰...","permalink":"/post/Javaè‡ªå®šä¹‰æƒé™","photos":[],"count_time":{"symbolsCount":"5.4k","symbolsTime":"5 mins."},"categories":[{"name":"SpringBoot","slug":"SpringBoot","count":11,"path":"api/categories/SpringBoot.json"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","count":3,"path":"api/tags/SpringBoot.json"},{"name":"Java","slug":"Java","count":3,"path":"api/tags/Java.json"}],"author":{"name":"Azer","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"<span style='font-size:30px;background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;'>æ€€æ°‘äº¦æœªå¯</span><span style='font-size:30px;'>ğŸ’•</span>","socials":{"github":"https://github.com/azer-2025","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_52541129?type=blog","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/1764589563?spm_id_from=333.1007.0.0"},"gitee":{"icon":"/svg/gitee.svg","link":"https://gitee.com/azzzer"}}}},"feature":true}}