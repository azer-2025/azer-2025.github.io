{"title":"Advisor","uid":"0d1cff3c26f39f16f759d073f873bb99","slug":"Advisor","date":"2025-11-05T13:24:48.000Z","updated":"2025-11-05T13:32:27.676Z","comments":true,"path":"api/articles/Advisor.json","keywords":"VUEã€Pythonã€JAVA","cover":"/medias/advisor.png","content":"<h1 id=\"1ã€Advisor\"><a href=\"#1ã€Advisor\" class=\"headerlink\" title=\"1ã€Advisor\"></a>1ã€Advisor</h1><h2 id=\"è‡ªå®šä¹‰-Advisor\"><a href=\"#è‡ªå®šä¹‰-Advisor\" class=\"headerlink\" title=\"è‡ªå®šä¹‰ Advisor\"></a>è‡ªå®šä¹‰ Advisor</h2><p>å­¦è¿‡ Servâ let å’Œ Spring Aâ€ŒOP çš„åŒå­¦åº”è¯¥å¯¹è¿™ä¸ªåŠŸèƒ½å¹¶ä¸é™Œç”Ÿï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–å†™æ‹¦æˆªâ€å™¨æˆ–åˆ‡é¢å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œå¤„ç†â€Œï¼Œæ¯”å¦‚è®°å½•è¯·æ±‚å“åº”æ—¥å¿—ã€é‰´æƒç­‰ã€‚</p>\n<p>Spring â AI çš„ Advisor â€Œå°±å¯ä»¥ç†è§£ä¸ºæ‹¦æˆªå™¨ï¼Œå¯ä»¥å¯¹è°ƒç”¨ AI çš„è¯·æ±‚è¿›è¡Œå¢å¼ºâ€ï¼Œæ¯”å¦‚è°ƒç”¨ AI å‰é‰´æƒã€â€Œè°ƒç”¨ AI åè®°å½•æ—¥å¿—ã€‚</p>\n<p>å®˜æ–¹å·²ç»æä¾›äº†ä¸€äº› Advisorï¼Œä½†å¯èƒ½æ— æ³•æ»¡è¶³æˆ‘ä»¬å®é™…çš„ä¸šåŠ¡éœ€æ±‚ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®˜æ–¹æä¾›çš„ <a href=\"https://docs.spring.io/spring-ai/reference/api/advisors.html#_implementing_an_advisor\">è‡ªå®šä¹‰ Advisor</a> åŠŸèƒ½ã€‚æŒ‰ç…§ä¸‹åˆ—æ­¥éª¤æ“ä½œå³å¯ã€‚</p>\n<h3 id=\"è‡ªå®šä¹‰-Advisor-æ­¥éª¤\"><a href=\"#è‡ªå®šä¹‰-Advisor-æ­¥éª¤\" class=\"headerlink\" title=\"è‡ªå®šä¹‰ Advisor æ­¥éª¤\"></a>è‡ªå®šä¹‰ Advisor æ­¥éª¤</h3><p>1ï¼‰é€‰æ‹©åˆâ é€‚çš„æ¥å£å®ç°ï¼Œå®ç°â€Œä»¥ä¸‹æ¥å£ä¹‹ä¸€æˆ–åŒæ—¶å®ç°ä¸¤è€…ï¼ˆæ›´å»ºè®®åŒâ€æ—¶å®ç°ï¼‰ï¼š</p>\n<ul>\n<li>CallAroundAdvisorï¼šç”¨äºå¤„ç†åŒæ­¥è¯·æ±‚å’Œå“åº”ï¼ˆéæµå¼ï¼‰</li>\n<li>StreamAroundAdvisorï¼šç”¨äºå¤„ç†æµå¼è¯·æ±‚å’Œå“åº”</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyCustomAdvisor</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">CallAroundAdvisor</span>, StreamAroundAdvisor &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>2ï¼‰å®ç°æ ¸å¿ƒæ–¹æ³•</p>\n<p>å¯¹äºéæµå¼â å¤„ç† (CallAâ€ŒroundAdvisor)ï¼Œå®ç° aâ€roundCallâ€Œ æ–¹æ³•ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> AdvisedResponse <span class=\"title function_\">aroundCall</span><span class=\"params\">(AdvisedRequest advisedRequest, CallAroundAdvisorChain chain)</span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">AdvisedRequest</span> <span class=\"variable\">modifiedRequest</span> <span class=\"operator\">=</span> processRequest(advisedRequest);</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">AdvisedResponse</span> <span class=\"variable\">response</span> <span class=\"operator\">=</span> chain.nextAroundCall(modifiedRequest);</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> processResponse(response);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯¹äºæµå¼å¤„â ç† (Streamâ€ŒAroundAdvisor)ï¼Œå®ç° â€aroundStrâ€Œeam æ–¹æ³•ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Flux&lt;AdvisedResponse&gt; <span class=\"title function_\">aroundStream</span><span class=\"params\">(AdvisedRequest advisedRequest, StreamAroundAdvisorChain chain)</span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">AdvisedRequest</span> <span class=\"variable\">modifiedRequest</span> <span class=\"operator\">=</span> processRequest(advisedRequest);</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> chain.nextAroundStream(modifiedRequest)</span><br><span class=\"line\">               .map(response -&gt; processResponse(response));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3ï¼‰è®¾ç½®æ‰§è¡Œé¡ºåº</p>\n<p>é€šè¿‡å®ç°<code>getOrder()</code>æ–¹æ³•æŒ‡å®š Advisor åœ¨é“¾ä¸­çš„æ‰§è¡Œé¡ºåºã€‚å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆæ‰§è¡Œï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getOrder</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">100</span>; </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>4ï¼‰æä¾›å”¯ä¸€åç§°</p>\n<p>ä¸ºæ¯ä¸ª Advisor æä¾›ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> String <span class=\"title function_\">getName</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Azerè‡ªå®šä¹‰çš„ Advisor&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è‡ªå®šä¹‰æ—¥å¿—-Advisor\"><a href=\"#è‡ªå®šä¹‰æ—¥å¿—-Advisor\" class=\"headerlink\" title=\"è‡ªå®šä¹‰æ—¥å¿— Advisor\"></a>è‡ªå®šä¹‰æ—¥å¿— Advisor</h3><p>æˆ‘ä»¬å¯ä»¥åŒæ—¶å‚è€ƒ <a href=\"https://docs.spring.io/spring-ai/reference/api/advisors.html#_logging_advisor\">å®˜æ–¹æ–‡æ¡£</a> å’Œå†…ç½®çš„ SimpleLoggerAdvisor æºç ï¼Œç»“åˆ 2 è€…å¹¶ç•¥åšä¿®æ”¹ï¼Œå¼€å‘ä¸€ä¸ªæ›´ç²¾ç®€çš„ã€å¯è‡ªå®šä¹‰çº§åˆ«çš„æ—¥å¿—è®°å½•å™¨ã€‚é»˜è®¤æ‰“å° info çº§åˆ«æ—¥å¿—ã€å¹¶ä¸”åªè¾“å‡ºå•æ¬¡ç”¨æˆ·æç¤ºè¯å’Œ AI å›å¤çš„æ–‡æœ¬ã€‚</p>\n<p>åœ¨æ ¹åŒ…ä¸‹æ–°å»º <code>advisor</code> åŒ…ï¼Œç¼–å†™æ—¥å¿— Advisor çš„ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyLoggerAdvisor</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">CallAroundAdvisor</span>, StreamAroundAdvisor &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">getName</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.getClass().getSimpleName();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getOrder</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AdvisedRequest <span class=\"title function_\">before</span><span class=\"params\">(AdvisedRequest request)</span> &#123;</span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;AI Request: &#123;&#125;&quot;</span>, request.userText());</span><br><span class=\"line\">        <span class=\"keyword\">return</span> request;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">observeAfter</span><span class=\"params\">(AdvisedResponse advisedResponse)</span> &#123;</span><br><span class=\"line\">        log.info(<span class=\"string\">&quot;AI Response: &#123;&#125;&quot;</span>, advisedResponse.response().getResult().getOutput().getText());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> AdvisedResponse <span class=\"title function_\">aroundCall</span><span class=\"params\">(AdvisedRequest advisedRequest, CallAroundAdvisorChain chain)</span> &#123;</span><br><span class=\"line\">        advisedRequest = <span class=\"built_in\">this</span>.before(advisedRequest);</span><br><span class=\"line\">        <span class=\"type\">AdvisedResponse</span> <span class=\"variable\">advisedResponse</span> <span class=\"operator\">=</span> chain.nextAroundCall(advisedRequest);</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.observeAfter(advisedResponse);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> advisedResponse;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Flux&lt;AdvisedResponse&gt; <span class=\"title function_\">aroundStream</span><span class=\"params\">(AdvisedRequest advisedRequest, StreamAroundAdvisorChain chain)</span> &#123;</span><br><span class=\"line\">        advisedRequest = <span class=\"built_in\">this</span>.before(advisedRequest);</span><br><span class=\"line\">        Flux&lt;AdvisedResponse&gt; advisedResponses = chain.nextAroundStream(advisedRequest);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">new</span> <span class=\"title class_\">MessageAggregator</span>()).aggregateAdvisedResponse(advisedResponses, <span class=\"built_in\">this</span>::observeAfter);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šè¿°ä»£ç ä¸­å€¼å¾—å…³æ³¨çš„æ˜¯ arouâ ndStream æ–¹æ³•çš„è¿”å›ï¼Œé€šè¿‡ MessageAggregâ€Œator å·¥å…·ç±»å°† Flux å“åº”èšåˆæˆå•ä¸ª AdvisedResponseã€‚è¿™å¯¹äºæ—¥å¿—è®°å½•æˆ–å…¶ä»–éœ€è¦è§‚å¯Ÿæ•´ä¸ªå“åº”è€Œéæµä¸­å„â€ä¸ªç‹¬ç«‹é¡¹çš„å¤„ç†éå¸¸æœ‰ç”¨ã€‚æ³¨æ„ï¼Œä¸èƒ½åœ¨ MessageAggreâ€Œgator ä¸­ä¿®æ”¹å“åº”ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåªè¯»æ“ä½œã€‚</p>\n<p>åœ¨ LoveApp ä¸­åº”ç”¨è‡ªå®šä¹‰çš„æ—¥å¿— Advisorï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chatClient = ChatClient.builder(dashscopeChatModel)</span><br><span class=\"line\">        .defaultSystem(SYSTEM_PROMPT)</span><br><span class=\"line\">        .defaultAdvisors(</span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">MessageChatMemoryAdvisor</span>(chatMemory),</span><br><span class=\"line\">                </span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">MyLoggerAdvisor</span>(),</span><br><span class=\"line\">        )</span><br><span class=\"line\">        .build();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"è‡ªå®šä¹‰-Re-Reading-Advisor\"><a href=\"#è‡ªå®šä¹‰-Re-Reading-Advisor\" class=\"headerlink\" title=\"è‡ªå®šä¹‰ Re-Reading Advisor\"></a>è‡ªå®šä¹‰ Re-Reading Advisor</h3><p>è®©æˆ‘ä»¬å†å‚è€ƒ <a href=\"https://docs.spring.io/spring-ai/reference/api/advisors.html#_re_reading_re2_advisor\">å®˜æ–¹æ–‡æ¡£</a> æ¥å®ç°ä¸€ä¸ª Re-Readingï¼ˆé‡è¯»ï¼‰Advisorï¼Œåˆç§° Re2ã€‚è¯¥æŠ€æœ¯é€šè¿‡è®©æ¨¡å‹é‡æ–°é˜…è¯»é—®é¢˜æ¥æé«˜æ¨ç†èƒ½åŠ›ï¼Œæœ‰ <a href=\"https://arxiv.org/pdf/2309.06275\">æ–‡çŒ®</a> æ¥å°è¯å®ƒçš„æ•ˆæœã€‚</p>\n<p>ğŸ’¡ æ³¨æ„â ï¼Œè™½ç„¶è¯¥æŠ€æœ¯å¯æé«˜å¤§â€Œè¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ï¼Œä¸è¿‡æˆæœ¬ä¼šåŠ å€ï¼æ‰€ä»¥â€å¦‚æœ AI åº”ç”¨è¦é¢â€Œå‘ C ç«¯å¼€æ”¾ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚</p>\n<p>Re2 çš„å®ç°åŸâ ç†å¾ˆç®€å•ï¼Œæ”¹å†™ç”¨æˆ· Prompâ€Œt ä¸ºä¸‹åˆ—æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯è®© AI é‡å¤é˜…è¯»ç”¨æˆ·çš„è¾“å…¥ï¼šâ€‚â€‚â€‚â€‚â€â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€Œâ€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€‰â€‚â€‰â€‰</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;Input_Query&#125;</span><br><span class=\"line\">Read the question again: &#123;Input_Query&#125;</span><br></pre></td></tr></table></figure>\n\n<p>éœ€è¦å¯¹è¯·æ±‚â è¿›è¡Œæ‹¦æˆªå¹¶æ”¹å†™ uâ€ŒserTextï¼Œå¯¹åº”çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ReReadingAdvisor</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">CallAroundAdvisor</span>, StreamAroundAdvisor &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AdvisedRequest <span class=\"title function_\">before</span><span class=\"params\">(AdvisedRequest advisedRequest)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Map&lt;String, Object&gt; advisedUserParams = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;(advisedRequest.userParams());</span><br><span class=\"line\">        advisedUserParams.put(<span class=\"string\">&quot;re2_input_query&quot;</span>, advisedRequest.userText());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> AdvisedRequest.from(advisedRequest)</span><br><span class=\"line\">                .userText(<span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">                        &#123;re2_input_query&#125;</span></span><br><span class=\"line\"><span class=\"string\">                        Read the question again: &#123;re2_input_query&#125;</span></span><br><span class=\"line\"><span class=\"string\">                        &quot;&quot;&quot;</span>)</span><br><span class=\"line\">                .userParams(advisedUserParams)</span><br><span class=\"line\">                .build();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> AdvisedResponse <span class=\"title function_\">aroundCall</span><span class=\"params\">(AdvisedRequest advisedRequest, CallAroundAdvisorChain chain)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> chain.nextAroundCall(<span class=\"built_in\">this</span>.before(advisedRequest));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Flux&lt;AdvisedResponse&gt; <span class=\"title function_\">aroundStream</span><span class=\"params\">(AdvisedRequest advisedRequest, StreamAroundAdvisorChain chain)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> chain.nextAroundStream(<span class=\"built_in\">this</span>.before(advisedRequest));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">getOrder</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">getName</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.getClass().getSimpleName();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥åœ¨ Lâ oveApp ä¸­ä½¿â€Œç”¨ Advisorï¼Œå¹¶è¿›è¡Œæµ‹è¯•ï¼ŒæŸ¥çœ‹â€è¯·æ±‚æ˜¯å¦è¢«æ”¹å†™ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chatClient = ChatClient.builder(dashscopeChatModel)</span><br><span class=\"line\">        .defaultSystem(SYSTEM_PROMPT)</span><br><span class=\"line\">        .defaultAdvisors(</span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">MessageChatMemoryAdvisor</span>(chatMemory),</span><br><span class=\"line\">                </span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">ReReadingAdvisor</span>()</span><br><span class=\"line\">        )</span><br><span class=\"line\">        .build();</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æœ€ä½³å®è·µ\"><a href=\"#æœ€ä½³å®è·µ\" class=\"headerlink\" title=\"æœ€ä½³å®è·µ\"></a>æœ€ä½³å®è·µ</h2><p>1ï¼‰ä¿æŒå•â ä¸€èŒè´£ï¼šæ¯ä¸ª Adâ€Œvisor åº”ä¸“æ³¨äºä¸€é¡¹ç‰¹å®šä»»åŠ¡</p>\n<p>2ï¼‰æ³¨æ„æ‰§è¡Œé¡ºåºï¼šåˆç†è®¾ç½®<code>getOrder()</code>å€¼ç¡®ä¿ Advisor æŒ‰æ­£ç¡®é¡ºåºæ‰§è¡Œ</p>\n<p>3ï¼‰åŒæ—¶æ”¯â æŒæµå¼å’Œéæµå¼ï¼šå°½â€Œå¯èƒ½åŒæ—¶å®ç°ä¸¤ç§æ¥å£ä»¥æé«˜çµæ´»æ€§</p>\n<p>4ï¼‰é«˜æ•ˆå¤„ç†è¯·æ±‚ï¼šé¿å…åœ¨ Advisor ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ</p>\n<p>5ï¼‰æµ‹è¯•è¾¹â ç•Œæƒ…å†µï¼šç¡®ä¿ Adâ€Œvisor èƒ½å¤Ÿä¼˜é›…å¤„ç†å¼‚å¸¸å’Œè¾¹ç•Œæƒ…â€å†µ</p>\n<p>6ï¼‰å¯¹äºéœ€â è¦æ›´å¤æ‚å¤„ç†çš„æµå¼â€Œåœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨ Reactor çš„æ“â€ä½œç¬¦ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Flux&lt;AdvisedResponse&gt; <span class=\"title function_\">aroundStream</span><span class=\"params\">(AdvisedRequest advisedRequest, StreamAroundAdvisorChain chain)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Mono.just(advisedRequest)</span><br><span class=\"line\">           .publishOn(Schedulers.boundedElastic())</span><br><span class=\"line\">           .map(request -&gt; &#123;</span><br><span class=\"line\">               </span><br><span class=\"line\">               <span class=\"keyword\">return</span> modifyRequest(request);</span><br><span class=\"line\">           &#125;)</span><br><span class=\"line\">           .flatMapMany(request -&gt; chain.nextAroundStream(request))</span><br><span class=\"line\">           .map(response -&gt; &#123;</span><br><span class=\"line\">               </span><br><span class=\"line\">               <span class=\"keyword\">return</span> modifyResponse(response);</span><br><span class=\"line\">           &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>7ï¼‰å¯ä»¥ä½¿ç”¨ <code>adviseContext</code> åœ¨ Advisor é“¾ä¸­å…±äº«çŠ¶æ€ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">advisedRequest = advisedRequest.updateContext(context -&gt; &#123;</span><br><span class=\"line\">    context.put(<span class=\"string\">&quot;key&quot;</span>, <span class=\"string\">&quot;value&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> context;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">Object</span> <span class=\"variable\">value</span> <span class=\"operator\">=</span> advisedResponse.adviseContext().get(<span class=\"string\">&quot;key&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"2ã€ç»“æ„åŒ–è¾“å‡º\"><a href=\"#2ã€ç»“æ„åŒ–è¾“å‡º\" class=\"headerlink\" title=\"2ã€ç»“æ„åŒ–è¾“å‡º\"></a>2ã€ç»“æ„åŒ–è¾“å‡º</h1><p><a href=\"https://docs.spring.io/spring-ai/reference/api/structured-output-converter.html\">ç»“æ„åŒ–è¾“å‡ºè½¬æ¢å™¨</a>ï¼ˆStructured Output Converterï¼‰æ˜¯ Spring AI æä¾›çš„ä¸€ç§å®ç”¨æœºåˆ¶ï¼Œç”¨äºå°†å¤§è¯­è¨€æ¨¡å‹è¿”å›çš„æ–‡æœ¬è¾“å‡ºè½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®æ ¼å¼ï¼Œå¦‚ JSONã€XML æˆ– Java ç±»ï¼Œè¿™å¯¹äºéœ€è¦å¯é è§£æ AI è¾“å‡ºå€¼çš„ä¸‹æ¸¸åº”ç”¨ç¨‹åºéå¸¸é‡è¦ã€‚</p>\n<h2 id=\"åŸºæœ¬åŸç†-å·¥ä½œæµç¨‹\"><a href=\"#åŸºæœ¬åŸç†-å·¥ä½œæµç¨‹\" class=\"headerlink\" title=\"åŸºæœ¬åŸç† - å·¥ä½œæµç¨‹\"></a>åŸºæœ¬åŸç† - å·¥ä½œæµç¨‹</h2><p>ç»“æ„åŒ–è¾“å‡ºè½¬æ¢å™¨åœ¨å¤§æ¨¡å‹è°ƒç”¨å‰åéƒ½å‘æŒ¥ä½œç”¨ï¼š</p>\n<ul>\n<li>è°ƒç”¨å‰ï¼šè½¬æ¢å™¨ä¼šåœ¨æç¤ºè¯åé¢é™„åŠ æ ¼å¼æŒ‡ä»¤ï¼Œæ˜ç¡®å‘Šè¯‰æ¨¡å‹åº”è¯¥ç”Ÿæˆä½•ç§ç»“æ„çš„è¾“å‡ºï¼Œå¼•å¯¼æ¨¡å‹ç”Ÿæˆç¬¦åˆæŒ‡å®šæ ¼å¼çš„å“åº”ã€‚</li>\n<li>è°ƒç”¨åï¼šè½¬æ¢å™¨å°†æ¨¡å‹çš„æ–‡æœ¬è¾“å‡ºè½¬æ¢ä¸ºç»“æ„åŒ–ç±»å‹çš„å®ä¾‹ï¼Œæ¯”å¦‚å°†åŸå§‹æ–‡æœ¬æ˜ å°„ä¸º JSONã€XML æˆ–ç‰¹å®šçš„æ•°æ®ç»“æ„ã€‚</li>\n</ul>\n<p><img src=\"/post/Advisor/image-20251105192111043.png\" alt=\"image-20251105192111043\"></p>\n<p>æ³¨æ„ï¼Œç»“æ„åŒ–è¾“å‡ºè½¬æ¢å™¨åªæ˜¯ <strong>å°½æœ€å¤§åŠªåŠ›</strong> å°†æ¨¡å‹è¾“å‡ºè½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®ï¼ŒAI æ¨¡å‹ä¸ä¿è¯ä¸€å®šæŒ‰ç…§è¦æ±‚è¿”å›ç»“æ„åŒ–è¾“å‡ºã€‚æœ‰äº›æ¨¡å‹å¯èƒ½æ— æ³•ç†è§£æç¤ºè¯æˆ–æ— æ³•æŒ‰è¦æ±‚ç”Ÿæˆç»“æ„åŒ–è¾“å‡ºã€‚å»ºè®®åœ¨ç¨‹åºä¸­å®ç°éªŒè¯æœºåˆ¶æˆ–è€…å¼‚å¸¸å¤„ç†æœºåˆ¶æ¥ç¡®ä¿æ¨¡å‹è¾“å‡ºç¬¦åˆé¢„æœŸã€‚</p>\n<h2 id=\"è¿›é˜¶åŸç†-API-è®¾è®¡\"><a href=\"#è¿›é˜¶åŸç†-API-è®¾è®¡\" class=\"headerlink\" title=\"è¿›é˜¶åŸç† - API è®¾è®¡\"></a>è¿›é˜¶åŸç† - API è®¾è®¡</h2><p>è®©æˆ‘ä»¬è¿›ä¸€æ­¥ç†è§£ç»“æ„åŒ–è¾“å‡ºçš„åŸç†ï¼Œç»“æ„åŒ–è¾“å‡ºè½¬æ¢å™¨ <code>StructuredOutputConverter</code> æ¥å£å…è®¸å¼€å‘è€…è·å–ç»“æ„åŒ–è¾“å‡ºï¼Œä¾‹å¦‚å°†è¾“å‡ºæ˜ å°„åˆ° Java ç±»æˆ–å€¼æ•°ç»„ã€‚æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">StructuredOutputConverter</span>&lt;T&gt; <span class=\"keyword\">extends</span> <span class=\"title class_\">Converter</span>&lt;String, T&gt;, FormatProvider &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å®ƒé›†æˆäº† 2 ä¸ªå…³é”®æ¥å£ï¼š</p>\n<ul>\n<li><code>FormatProvider</code> æ¥å£ï¼šæä¾›ç‰¹å®šçš„æ ¼å¼æŒ‡ä»¤ç»™ AI æ¨¡å‹</li>\n<li>Spring çš„ <code>Converter&lt;String, T&gt;</code> æ¥å£ï¼šè´Ÿè´£å°†æ¨¡å‹çš„æ–‡æœ¬è¾“å‡ºè½¬æ¢ä¸ºæŒ‡å®šçš„ç›®æ ‡ç±»å‹ <code>T</code></li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public interface FormatProvider &#123;</span><br><span class=\"line\">    String getFormat();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Sprinâ g AI æä¾›äº†å¤šâ€Œç§è½¬æ¢å™¨å®ç°ï¼Œåˆ†åˆ«ç”¨äºå°†è¾“å‡ºè½¬æ¢ä¸ºä¸â€åŒçš„ç»“æ„ï¼š</p>\n<ul>\n<li>AbstractConversionServiceOutputConverterï¼šæä¾›é¢„é…ç½®çš„ GenericConversionServiceï¼Œç”¨äºå°† LLM è¾“å‡ºè½¬æ¢ä¸ºæ‰€éœ€æ ¼å¼</li>\n<li>AbstractMessageOutputConverterï¼šæ”¯æŒ Spring AI Message çš„è½¬æ¢</li>\n<li>BeanOutputConverterï¼šç”¨äºå°†è¾“å‡ºè½¬æ¢ä¸º Java Bean å¯¹è±¡ï¼ˆåŸºäº ObjectMapper å®ç°ï¼‰</li>\n<li>MapOutputConverterï¼šç”¨äºå°†è¾“å‡ºè½¬æ¢ä¸º Map ç»“æ„</li>\n<li>ListOutputConverterï¼šç”¨äºå°†è¾“å‡ºè½¬æ¢ä¸º List ç»“æ„</li>\n</ul>\n<p>ç±»å›¾å¦‚ä¸‹ï¼š</p>\n<p><img src=\"/post/Advisor/image-20251105194111278.png\" alt=\"image-20251105194111278\"></p>\n<p>äº†è§£äº† Aâ PI è®¾è®¡åï¼Œå†æ¥â€Œè¿›ä¸€æ­¥å‰–æä¸€éç»“æ„åŒ–è¾“å‡ºçš„å·¥ä½œæµç¨‹ã€‚</p>\n<p>1ï¼‰åœ¨è°ƒç”¨å¤§æ¨¡å‹ä¹‹å‰ï¼Œ<code>FormatProvider</code> ä¸º AI æ¨¡å‹æä¾›ç‰¹å®šçš„æ ¼å¼æŒ‡ä»¤ï¼Œä½¿å…¶èƒ½å¤Ÿç”Ÿæˆå¯ä»¥é€šè¿‡ <code>Converter</code> è½¬æ¢ä¸ºæŒ‡å®šç›®æ ‡ç±»å‹çš„æ–‡æœ¬è¾“å‡ºã€‚</p>\n<p>è½¬æ¢å™¨çš„æ ¼å¼æŒ‡ä»¤ç»„ä»¶ä¼šå°†ç±»ä¼¼ä¸‹é¢çš„æ ¼å¼æŒ‡ä»¤é™„åŠ åˆ°æç¤ºè¯ä¸­ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Your response should be in JSON format.</span><br><span class=\"line\">The data structure for the JSON should match this Java class: java.util.HashMap</span><br><span class=\"line\">Do not include any explanations, only provide a RFC8259 compliant JSON response following this format without deviation.</span><br></pre></td></tr></table></figure>\n\n<p>é€šå¸¸ï¼Œä½¿ç”¨ <code>PromptTemplate</code> å°†æ ¼å¼æŒ‡ä»¤é™„åŠ åˆ°ç”¨æˆ·è¾“å…¥çš„æœ«å°¾ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">StructuredOutputConverter outputConverter = ...</span><br><span class=\"line\">String userInputTemplate = &quot;&quot;&quot;</span><br><span class=\"line\">        ... ç”¨æˆ·æ–‡æœ¬è¾“å…¥ ....</span><br><span class=\"line\">        &#123;format&#125;</span><br><span class=\"line\">        &quot;&quot;&quot;; </span><br><span class=\"line\">Prompt prompt = new Prompt(</span><br><span class=\"line\">        new PromptTemplate(</span><br><span class=\"line\">                this.userInputTemplate,</span><br><span class=\"line\">                Map.of(..., &quot;format&quot;, outputConverter.getFormat()) </span><br><span class=\"line\">        ).createMessage());</span><br></pre></td></tr></table></figure>\n\n<p>ç¨åä¼šç»™å¤§å®¶è®²è§£ <code>PromptTemplate</code> ç‰¹æ€§ã€‚</p>\n<p>2ï¼‰<code>Converter</code> è´Ÿè´£å°†æ¨¡å‹çš„è¾“å‡ºæ–‡æœ¬è½¬æ¢ä¸ºæŒ‡å®šç±»å‹çš„å®ä¾‹ã€‚</p>\n<p>æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>\n<p><img src=\"/post/Advisor/image-20251105194133828.png\" alt=\"image-20251105194133828\"></p>\n<h4 id=\"ä½¿ç”¨ç¤ºä¾‹\"><a href=\"#ä½¿ç”¨ç¤ºä¾‹\" class=\"headerlink\" title=\"ä½¿ç”¨ç¤ºä¾‹\"></a>ä½¿ç”¨ç¤ºä¾‹</h4><p>å®˜æ–¹æ–‡æ¡£æä¾›äº†å¾ˆå¤šè½¬æ¢ç¤ºä¾‹ï¼Œ</p>\n<p>1ï¼‰Beaâ nOutputCoâ€Œnverter ç¤ºä¾‹ï¼Œå°† AI è¾“å‡ºâ€è½¬æ¢ä¸ºè‡ªå®šä¹‰ Jaâ€Œva ç±»ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">record ActorsFilms(String actor, List&lt;String&gt; movies) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ActorsFilms actorsFilms = ChatClient.create(chatModel).prompt()</span><br><span class=\"line\">        .user(&quot;Generate 5 movies for Tom Hanks.&quot;)</span><br><span class=\"line\">        .call()</span><br><span class=\"line\">        .entity(ActorsFilms.class);</span><br></pre></td></tr></table></figure>\n\n<p>è¿˜å¯ä»¥ç”¨ <code>ParameterizedTypeReference</code> æ„é€ å‡½æ•°æ¥æŒ‡å®šæ›´å¤æ‚çš„ç›®æ ‡ç±»ç»“æ„ï¼Œæ¯”å¦‚è‡ªå®šä¹‰å¯¹è±¡åˆ—è¡¨ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;ActorsFilms&gt; actorsFilms = ChatClient.create(chatModel).prompt()</span><br><span class=\"line\">        .user(&quot;Generate the filmography of 5 movies for Tom Hanks and Bill Murray.&quot;)</span><br><span class=\"line\">        .call()</span><br><span class=\"line\">        .entity(new ParameterizedTypeReference&lt;List&lt;ActorsFilms&gt;&gt;() &#123;&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>2ï¼‰Mapâ OutputConâ€Œverter ç¤ºä¾‹ï¼Œå°†æ¨¡å‹è¾“å‡ºè½¬æ¢ä¸ºâ€åŒ…å«æ•°å­—åˆ—è¡¨çš„ Mâ€Œapï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Map&lt;String, Object&gt; result = ChatClient.create(chatModel).prompt()</span><br><span class=\"line\">        .user(u -&gt; u.text(&quot;Provide me a List of &#123;subject&#125;&quot;)</span><br><span class=\"line\">                    .param(&quot;subject&quot;, &quot;an array of numbers from 1 to 9 under they key name &#x27;numbers&#x27;&quot;))</span><br><span class=\"line\">        .call()</span><br><span class=\"line\">        .entity(new ParameterizedTypeReference&lt;Map&lt;String, Object&gt;&gt;() &#123;&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>3ï¼‰Lisâ tOutputCoâ€Œnverter ç¤ºä¾‹ï¼Œå°†æ¨¡å‹è¾“å‡ºè½¬æ¢â€ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;String&gt; flavors = ChatClient.create(chatModel).prompt()</span><br><span class=\"line\">                .user(u -&gt; u.text(&quot;List five &#123;subject&#125;&quot;)</span><br><span class=\"line\">                            .param(&quot;subject&quot;, &quot;ice cream flavors&quot;))</span><br><span class=\"line\">                .call()</span><br><span class=\"line\">                .entity(new ListOutputConverter(new DefaultConversionService()));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ”¯æŒçš„-AI-æ¨¡å‹\"><a href=\"#æ”¯æŒçš„-AI-æ¨¡å‹\" class=\"headerlink\" title=\"æ”¯æŒçš„ AI æ¨¡å‹\"></a>æ”¯æŒçš„ AI æ¨¡å‹</h3><p>æ ¹æ® <a href=\"https://docs.spring.io/spring-ai/reference/api/structured-output-converter.html#_supported_ai_models\">å®˜æ–¹æ–‡æ¡£</a>ï¼Œä»¥ä¸‹ AI æ¨¡å‹å·²ç»è¿‡æµ‹è¯•ï¼Œæ”¯æŒ Listã€Map å’Œ Bean ç»“æ„åŒ–è¾“å‡ºï¼š</p>\n<table>\n<thead>\n<tr>\n<th>AI æ¨¡å‹</th>\n<th>ç¤ºä¾‹æµ‹è¯•ä»£ç </th>\n</tr>\n</thead>\n<tbody><tr>\n<td>OpenAI</td>\n<td>OpenAiChatModelIT</td>\n</tr>\n<tr>\n<td>Anthropic Claude 3</td>\n<td>AnthropicChatModelIT.java</td>\n</tr>\n<tr>\n<td>Azure OpenAI</td>\n<td>AzureOpenAiChatModelIT.java</td>\n</tr>\n<tr>\n<td>Mistral AI</td>\n<td>MistralAiChatModelIT.java</td>\n</tr>\n<tr>\n<td>Ollama</td>\n<td>OllamaChatModelIT.java</td>\n</tr>\n<tr>\n<td>Vertex AI Gemini</td>\n<td>VertexAiGeminiChatModelIT.java</td>\n</tr>\n</tbody></table>\n<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸€äº› AI æ¨¡å‹æä¾›äº†ä¸“é—¨çš„ <strong>å†…ç½® JSON æ¨¡å¼</strong>ï¼Œç”¨äºç”Ÿæˆç»“æ„åŒ–çš„ JSON è¾“å‡ºï¼Œå¤§å®¶æ— éœ€å…³æ³¨å®ç°ç»†èŠ‚ï¼Œåªéœ€è¦çŸ¥é“ï¼šå†…ç½® JSON æ¨¡å¼å¯ä»¥ç¡®ä¿æ¨¡å‹ç”Ÿæˆçš„å“åº”ä¸¥æ ¼ç¬¦åˆ JSON æ ¼å¼ï¼Œæé«˜ç»“æ„åŒ–è¾“å‡ºçš„å¯é æ€§ã€‚</p>\n<ul>\n<li>OpenAIï¼šæä¾›äº† <code>JSON_OBJECT</code> å’Œ <code>JSON_SCHEMA</code> å“åº”æ ¼å¼é€‰é¡¹</li>\n<li>Azure OpenAIï¼šé€šè¿‡è®¾ç½® <code>{ &quot;type&quot;: &quot;json_object&quot; }</code> å¯ç”¨ JSON æ¨¡å¼</li>\n<li>Ollamaï¼šæä¾› <code>format</code> é€‰é¡¹ï¼Œç›®å‰æ¥å—çš„å”¯ä¸€å€¼æ˜¯ <code>json</code></li>\n<li>Mistral AIï¼šæä¾› <code>responseFormat</code> é€‰é¡¹ï¼Œè®¾ç½®ä¸º <code>{ &quot;type&quot;: &quot;json_object&quot; }</code> å¯ç”¨ JSON æ¨¡å¼</li>\n</ul>\n<h3 id=\"æ‹çˆ±æŠ¥å‘ŠåŠŸèƒ½å¼€å‘\"><a href=\"#æ‹çˆ±æŠ¥å‘ŠåŠŸèƒ½å¼€å‘\" class=\"headerlink\" title=\"æ‹çˆ±æŠ¥å‘ŠåŠŸèƒ½å¼€å‘\"></a>æ‹çˆ±æŠ¥å‘ŠåŠŸèƒ½å¼€å‘</h3><p>ä¸‹é¢è®©æˆ‘ä»¬â ä½¿ç”¨ç»“æ„åŒ–è¾“å‡ºï¼Œæ¥â€Œä¸ºç”¨æˆ·ç”Ÿæˆæ‹çˆ±æŠ¥å‘Šï¼Œå¹¶è½¬æ¢ä¸ºæ‹çˆ±æŠ¥å‘Šâ€å¯¹è±¡ï¼ŒåŒ…å«æŠ¥å‘Šæ ‡é¢˜â€Œå’Œæ‹çˆ±å»ºè®®åˆ—è¡¨å­—æ®µã€‚</p>\n<p>1ï¼‰éœ€è¦å¼•å…¥ JSON Schema ç”Ÿæˆä¾èµ–ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.github.victools&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;jsonschema-generator&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;<span class=\"number\">4.38</span><span class=\"number\">.0</span>&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p>2ï¼‰åœ¨ Lâ oveApp ä¸­å®šâ€Œä¹‰æ‹çˆ±æŠ¥å‘Šç±»ï¼Œå¯ä»¥ä½¿ç”¨ Java 1â€4 å¼•å…¥çš„ recâ€Œord ç‰¹æ€§å¿«é€Ÿå®šä¹‰ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">record</span> <span class=\"title class_\">LoveReport</span><span class=\"params\">(String title, List&lt;String&gt; suggestions)</span> &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3ï¼‰åœ¨ Loveâ App ä¸­ç¼–å†™ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œå¤â€Œç”¨ä¹‹å‰æ„é€ å¥½çš„ ChatClient å¯¹è±¡ï¼Œåªéœ€é¢å¤–è¡¥å……åŸæœ‰â€çš„ç³»ç»Ÿæç¤ºè¯ã€å¹¶ä¸”æ·»åŠ ç»“æ„åŒ–è¾“å‡ºçš„â€Œä»£ç å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> LoveReport <span class=\"title function_\">doChatWithReport</span><span class=\"params\">(String message, String chatId)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">LoveReport</span> <span class=\"variable\">loveReport</span> <span class=\"operator\">=</span> chatClient</span><br><span class=\"line\">            .prompt()</span><br><span class=\"line\">            .system(SYSTEM_PROMPT + <span class=\"string\">&quot;æ¯æ¬¡å¯¹è¯åéƒ½è¦ç”Ÿæˆæ‹çˆ±ç»“æœï¼Œæ ‡é¢˜ä¸º&#123;ç”¨æˆ·å&#125;çš„æ‹çˆ±æŠ¥å‘Šï¼Œå†…å®¹ä¸ºå»ºè®®åˆ—è¡¨&quot;</span>)</span><br><span class=\"line\">            .user(message)</span><br><span class=\"line\">            .advisors(spec -&gt; spec.param(CHAT_MEMORY_CONVERSATION_ID_KEY, chatId)</span><br><span class=\"line\">                    .param(CHAT_MEMORY_RETRIEVE_SIZE_KEY, <span class=\"number\">10</span>))</span><br><span class=\"line\">            .call()</span><br><span class=\"line\">            .entity(LoveReport.class);</span><br><span class=\"line\">    log.info(<span class=\"string\">&quot;loveReport: &#123;&#125;&quot;</span>, loveReport);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> loveReport;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>4ï¼‰ç¼–å†™å•å…ƒæµ‹è¯•ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">doChatWithReport</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">chatId</span> <span class=\"operator\">=</span> UUID.randomUUID().toString();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">message</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;ä½ å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜é±¼çš®ï¼Œæˆ‘æƒ³è®©å¦ä¸€åŠï¼ˆç¼–ç¨‹å¯¼èˆªï¼‰æ›´çˆ±æˆ‘ï¼Œä½†æˆ‘ä¸çŸ¥é“è¯¥æ€ä¹ˆåš&quot;</span>;</span><br><span class=\"line\">    LoveApp.<span class=\"type\">LoveReport</span> <span class=\"variable\">loveReport</span> <span class=\"operator\">=</span> loveApp.doChatWithReport(message, chatId);</span><br><span class=\"line\">    Assertions.assertNotNull(loveReport);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œç¨‹åºï¼Œâ é€šè¿‡ Debug â€ŒæŸ¥çœ‹æ•ˆæœã€‚å‘ç° Advisor ä¸Šä¸‹â€æ–‡ä¸­åŒ…å«äº†æ ¼å¼æŒ‡ä»¤â€Œï¼š</p>\n<p><img src=\"/post/Advisor/image-20251105195713485.png\" alt=\"image-20251105195713485\"></p>\n<p><img src=\"/post/Advisor/image-20251105195734762.png\" alt=\"image-20251105195734762\"></p>\n<h2 id=\"3ã€å¯¹è¯è®°å¿†æŒä¹…åŒ–\"><a href=\"#3ã€å¯¹è¯è®°å¿†æŒä¹…åŒ–\" class=\"headerlink\" title=\"3ã€å¯¹è¯è®°å¿†æŒä¹…åŒ–\"></a>3ã€å¯¹è¯è®°å¿†æŒä¹…åŒ–</h2><h3 id=\"åŸºæœ¬æ¦‚å¿µ\"><a href=\"#åŸºæœ¬æ¦‚å¿µ\" class=\"headerlink\" title=\"åŸºæœ¬æ¦‚å¿µ\"></a>åŸºæœ¬æ¦‚å¿µ</h3><p>ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨äº†åŸºäºå†…å­˜çš„å¯¹è¯è®°å¿†æ¥ä¿å­˜å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸€æ—¦é‡å¯äº†ï¼Œå¯¹è¯è®°å¿†å°±ä¼šä¸¢å¤±ã€‚æœ‰æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›å°†å¯¹è¯è®°å¿†æŒä¹…åŒ–ï¼Œä¿å­˜åˆ°æ–‡ä»¶ã€æ•°æ®åº“ã€Redis æˆ–è€…å…¶ä»–å¯¹è±¡å­˜å‚¨ä¸­ï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p>\n<p>Spring AI æä¾›äº† 2 ç§æ–¹å¼ã€‚</p>\n<h3 id=\"åˆ©ç”¨ç°æœ‰ä¾èµ–å®ç°\"><a href=\"#åˆ©ç”¨ç°æœ‰ä¾èµ–å®ç°\" class=\"headerlink\" title=\"åˆ©ç”¨ç°æœ‰ä¾èµ–å®ç°\"></a>åˆ©ç”¨ç°æœ‰ä¾èµ–å®ç°</h3><p>å‰é¢æåˆ°ï¼Œ<a href=\"https://docs.spring.io/spring-ai/reference/api/chatclient.html#_chat_memory\">å®˜æ–¹æä¾›</a> äº†ä¸€äº›ç¬¬ä¸‰æ–¹æ•°æ®åº“çš„æ•´åˆæ”¯æŒï¼Œå¯ä»¥å°†å¯¹è¯ä¿å­˜åˆ°ä¸åŒçš„æ•°æ®æºä¸­ã€‚æ¯”å¦‚ï¼š</p>\n<ul>\n<li>InMemoryChatMemoryï¼šå†…å­˜å­˜å‚¨</li>\n<li>CassandraChatMemoryï¼šåœ¨ Cassandra ä¸­å¸¦æœ‰è¿‡æœŸæ—¶é—´çš„æŒä¹…åŒ–å­˜å‚¨</li>\n<li>Neo4jChatMemoryï¼šåœ¨ Neo4j ä¸­æ²¡æœ‰è¿‡æœŸæ—¶é—´é™åˆ¶çš„æŒä¹…åŒ–å­˜å‚¨</li>\n<li>JdbcChatMemoryï¼šåœ¨ JDBC ä¸­æ²¡æœ‰è¿‡æœŸæ—¶é—´é™åˆ¶çš„æŒä¹…åŒ–å­˜å‚¨</li>\n</ul>\n<p>å¦‚æœæˆ‘ä»¬è¦å°†å¯¹è¯æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ï¼Œå°±å¯ä»¥ä½¿ç”¨ JdbcChatMemoryã€‚ä½†æ˜¯ <code>spring-ai-starter-model-chat-memory-jdbc</code> ä¾èµ–ç›®å‰ç‰ˆæœ¬å¾ˆå°‘ï¼Œè€Œä¸”ç¼ºä¹ç›¸å…³ä»‹ç»ï¼ŒMaven å®˜æ–¹ä»“åº“ä¹Ÿæœä¸åˆ°ä¾èµ–ï¼Œæ‰€ä»¥ä¸æ¨èä½¿ç”¨ã€‚</p>\n<p><a href=\"https://repo.spring.io/ui/packages/gav:%2F%2Forg.springframework.ai:spring-ai-starter-model-chat-memory-jdbc?name=spring-ai-starter-model-chat-memory-jdbc&type=packages\">Spring ä»“åº“</a> å€’æ˜¯èƒ½æœåˆ°ï¼Œä½†ç”¨çš„äººå¤ªå°‘äº†</p>\n<p>å› æ­¤æˆ‘ä¼šæ›´å»ºè®®å¤§å®¶è‡ªå®šä¹‰å®ç° ChatMemoryã€‚</p>\n<h3 id=\"è‡ªå®šä¹‰å®ç°\"><a href=\"#è‡ªå®šä¹‰å®ç°\" class=\"headerlink\" title=\"è‡ªå®šä¹‰å®ç°\"></a>è‡ªå®šä¹‰å®ç°</h3><p>Spring AI çš„å¯¹è¯è®°å¿†å®ç°éå¸¸å·§å¦™ï¼Œè§£è€¦äº† â€œå­˜å‚¨â€ å’Œ â€œè®°å¿†ç®—æ³•â€ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å•ç‹¬ä¿®æ”¹ ChatMemory å­˜å‚¨æ¥æ”¹å˜å¯¹è¯è®°å¿†çš„ä¿å­˜ä½ç½®ï¼Œè€Œæ— éœ€ä¿®æ”¹ä¿å­˜å¯¹è¯è®°å¿†çš„æµç¨‹ã€‚</p>\n<p>è™½ç„¶å®˜æ–¹æ–‡æ¡£æ²¡æœ‰ç»™æˆ‘ä»¬æä¾›è‡ªå®šä¹‰ ChatMemory å®ç°çš„ç¤ºä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥å»é˜…è¯»é»˜è®¤å®ç°ç±» InMemoryChatMemory çš„æºç ï¼Œæœ‰æ ·å­¦æ ·å‘€ï¼</p>\n<p>ChatMemory æ¥å£çš„æ–¹æ³•å¹¶ä¸å¤šï¼Œéœ€è¦å®ç°å¯¹è¯æ¶ˆæ¯çš„å¢ã€æŸ¥ã€åˆ ï¼š</p>\n<p><img src=\"/post/Advisor/image-20251105195856878.png\" alt=\"image-20251105195856878\"></p>\n<h3 id=\"è‡ªå®šä¹‰æ–‡ä»¶æŒä¹…åŒ–-ChatMemory\"><a href=\"#è‡ªå®šä¹‰æ–‡ä»¶æŒä¹…åŒ–-ChatMemory\" class=\"headerlink\" title=\"è‡ªå®šä¹‰æ–‡ä»¶æŒä¹…åŒ– ChatMemory\"></a>è‡ªå®šä¹‰æ–‡ä»¶æŒä¹…åŒ– ChatMemory</h3><p>ç”±äºæ•°æ®åº“æŒä¹…åŒ–è¿˜éœ€è¦å¼•å…¥é¢å¤–çš„ä¾èµ–ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œè¿™ä¹Ÿä¸æ˜¯æœ¬é¡¹ç›®å­¦ä¹ çš„é‡ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬å°±å®ç°ä¸€ä¸ªåŸºäºæ–‡ä»¶è¯»å†™çš„ ChatMemoryã€‚</p>\n<p>è™½ç„¶éœ€è¦å®ç°çš„æ¥å£ä¸å¤šï¼Œä½†æ˜¯å®ç°èµ·æ¥è¿˜æ˜¯æœ‰ä¸€å®šå¤æ‚åº¦çš„ï¼Œä¸€ä¸ªæœ€ä¸»è¦çš„é—®é¢˜æ˜¯ <strong>æ¶ˆæ¯å’Œæ–‡æœ¬çš„è½¬æ¢</strong>ã€‚æˆ‘ä»¬åœ¨ä¿å­˜æ¶ˆæ¯æ—¶ï¼Œè¦å°†æ¶ˆæ¯ä» Message å¯¹è±¡è½¬ä¸ºæ–‡ä»¶å†…çš„æ–‡æœ¬ï¼›è¯»å–æ¶ˆæ¯æ—¶ï¼Œè¦å°†æ–‡ä»¶å†…çš„æ–‡æœ¬è½¬æ¢ä¸º Message å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p>\n<p>æˆ‘ä»¬æœ¬èƒ½åœ°ä¼šæƒ³åˆ°é€šè¿‡ JSON è¿›è¡Œåºåˆ—åŒ–ï¼Œä½†å®é™…æ“ä½œä¸­ï¼Œæˆ‘ä»¬å‘ç°è¿™å¹¶ä¸å®¹æ˜“ã€‚åŸå› æ˜¯ï¼š</p>\n<ol>\n<li>è¦æŒä¹…åŒ–çš„ Message æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæœ‰å¾ˆå¤šç§ä¸åŒçš„å­ç±»å®ç°ï¼ˆæ¯”å¦‚ UserMessageã€SystemMessage ç­‰ï¼‰</li>\n<li>æ¯ç§å­ç±»æ‰€æ‹¥æœ‰çš„å­—æ®µéƒ½ä¸ä¸€æ ·ï¼Œç»“æ„ä¸ç»Ÿä¸€</li>\n<li>å­ç±»æ²¡æœ‰æ— å‚æ„é€ å‡½æ•°ï¼Œè€Œä¸”æ²¡æœ‰å®ç° Serializable åºåˆ—åŒ–æ¥å£</li>\n</ol>\n<p>Spring AI Message çš„ç±»å›¾ï¼š</p>\n<p><img src=\"/post/Advisor/image-20251105200715709.png\" alt=\"image-20251105200715709\"></p>\n<p>å› æ­¤ï¼Œå¦‚æœä½¿ç”¨ JSON æ¥åºåˆ—åŒ–ä¼šå­˜åœ¨å¾ˆå¤šæŠ¥é”™ã€‚æ‰€ä»¥æ­¤å¤„æˆ‘ä»¬é€‰æ‹©é«˜æ€§èƒ½çš„ <a href=\"https://github.com/EsotericSoftware/kryo\">Kryo åºåˆ—åŒ–åº“</a>ã€‚</p>\n<p>1ï¼‰å¼•å…¥ä¾èµ–ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;com.esotericsoftware&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;kryo&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;<span class=\"number\">5.6</span><span class=\"number\">.2</span>&lt;/version&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>\n\n<p>2ï¼‰åœ¨æ ¹åŒ…ä¸‹æ–°å»º <code>chatmemory</code> åŒ…ï¼Œç¼–å†™åŸºäºæ–‡ä»¶æŒä¹…åŒ–çš„å¯¹è¯è®°å¿† FileBasedChatMemoryï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">puâ blic <span class=\"keyword\">class</span> <span class=\"title class_\">FileBasedChatMemory</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">ChatMemory</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    privâ ate <span class=\"keyword\">final</span> String BASE_DIR;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"type\">Kryo</span> <span class=\"variable\">kryo</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Kryo</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;</span><br><span class=\"line\">        kryo.setRegistrationRequired(faylse);</span><br><span class=\"line\">        </span><br><span class=\"line\">        kryo.setInstantiatorStrategy(<span class=\"keyword\">new</span> <span class=\"title class_\">StdInstantiatorStrategy</span>());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"title function_\">FileBasedChatMemory</span><span class=\"params\">(String dir)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.BASE_DIR = dir;</span><br><span class=\"line\">     â    <span class=\"type\">File</span> <span class=\"variable\">baseDir</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(dir);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!baseDir.exists()) &#123;</span><br><span class=\"line\">            baseDir.mkdirs();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">add</span><span class=\"params\">(String conversationId, List&lt;Message&gt; messages)</span> &#123;</span><br><span class=\"line\">        List&lt;Message&gt; conversationMessages = getOrCreateConversation(conversationId);</span><br><span class=\"line\">        conversationMessages.addAll(messages);</span><br><span class=\"line\">      â   saveConversation(conversationId, conversationMessages);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> List&lt;Message&gt; <span class=\"title function_\">get</span><span class=\"params\">(String conversationId, <span class=\"type\">int</span> lastN)</span> &#123;</span><br><span class=\"line\">        List&lt;Message&gt; allMessages = getOrCreateConversation(conversationId);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> allMessages.stream()</span><br><span class=\"line\">                .skip(Math.max(<span class=\"number\">0</span>, allMessages.size() - lastN))</span><br><span class=\"line\">     â           .toList();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Overri</span>â de</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">clear</span><span class=\"params\">(String conversationId)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">File</span> <span class=\"variable\">file</span> <span class=\"operator\">=</span> getConversationFile(conversationId);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (file.exists()) &#123;</span><br><span class=\"line\">            file.delete();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Message&gt; <span class=\"title function_\">getOrCreateConversation</span><span class=\"params\">(String conversationId)</span> &#123;</span><br><span class=\"line\">     â    <span class=\"type\">File</span> <span class=\"variable\">file</span> <span class=\"operator\">=</span> getConversationFile(conversationId);</span><br><span class=\"line\">        List&lt;Message&gt; messages = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (file.exists()) &#123;</span><br><span class=\"line\">       â      <span class=\"keyword\">try</span> (<span class=\"type\">Input</span> <span class=\"variable\">input</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Input</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">FileInputStream</span>(file))) &#123;</span><br><span class=\"line\">                messages = kryo.readObject(input, ArrayList.class);</span><br><span class=\"line\">     â        &#125;<span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">     â        &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> messages;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title function_\">saveConversation</span><span class=\"params\">(String conversationId, List&lt;Message&gt; messages)</span> &#123;</span><br><span class=\"line\">        Fileâ  file = getConversationFile(conversationId);</span><br><span class=\"line\">        <span class=\"keyword\">try</span> (<span class=\"type\">Output</span> <span class=\"variable\">output</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Output</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">FileOutputStream</span>(file))) &#123;</span><br><span class=\"line\">            kryo.writeObject(output, messages);</span><br><span class=\"line\">     â    &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Fâ ile <span class=\"title function_\">getConversationFile</span><span class=\"params\">(String conversationId)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>(BASE_DIR, conversationId +<span class=\"string\">&quot;.kryo&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è™½ç„¶ä¸Šè¿°ä»£ç çœ‹èµ·æ¥å¤æ‚ï¼Œä½†å¤§å¤šæ•°ä»£ç éƒ½æ˜¯æ–‡ä»¶å’Œ Message å¯¹è±¡çš„è½¬æ¢ï¼Œå®Œå…¨å¯ä»¥åˆ©ç”¨ AI ç”Ÿæˆè¿™æ®µä»£ç ã€‚</p>\n<p>3ï¼‰ä¿®æ”¹ LoveApp çš„æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åŸºäºæ–‡ä»¶çš„å¯¹è¯è®°å¿†ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span>â  LoveApp(ChatModel dashscopeChatModel) &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">fileDir</span> <span class=\"operator\">=</span> System.getProperty(<span class=\"string\">&quot;user.dir&quot;</span>) + <span class=\"string\">&quot;/chat-memory&quot;</span>;</span><br><span class=\"line\">    Châ <span class=\"type\">atMemory</span> <span class=\"variable\">chatMemory</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FileBasedChatMemoy</span>(fileDir);</span><br><span class=\"line\">    chatClient = ChatClient.builder(dashscopeChatModel)</span><br><span class=\"line\">            .defaâ ultSystem(SYSTEM_PROMPT)</span><br><span class=\"line\">           .defaultAdvisors(</span><br><span class=\"line\">                    <span class=\"keyword\">new</span> <span class=\"title class_\">MessageChatMemoryAdvisor</span>(chatMemory)</span><br><span class=\"line\">            )</span><br><span class=\"line\">           .build();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>4ï¼‰æµ‹è¯•è¿è¡Œï¼Œæ–‡ä»¶æŒä¹…åŒ–æˆåŠŸï¼š</p>\n<p><img src=\"/post/Advisor/image-20251105204000865.png\" alt=\"image-20251105204000865\"></p>\n<h2 id=\"4ã€PromptTemplate-æ¨¡æ¿\"><a href=\"#4ã€PromptTemplate-æ¨¡æ¿\" class=\"headerlink\" title=\"4ã€PromptTemplate æ¨¡æ¿\"></a>4ã€PromptTemplate æ¨¡æ¿</h2><h3 id=\"ä»€ä¹ˆæ˜¯-PromptTemplateï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯-PromptTemplateï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ PromptTemplateï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯ PromptTemplateï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p><a href=\"https://docs.spring.io/spring-ai/reference/api/prompt.html#_prompttemplate\">PromptTemplate</a> æ˜¯ Spring AI æ¡†æ¶ä¸­ç”¨äºæ„å»ºå’Œç®¡ç†æç¤ºè¯çš„æ ¸å¿ƒç»„ä»¶ã€‚å…è®¸å¼€å‘è€…åˆ›å»ºå¸¦æœ‰å ä½ç¬¦çš„æ–‡æœ¬æ¨¡æ¿ï¼Œç„¶ååœ¨è¿è¡Œæ—¶åŠ¨æ€æ›¿æ¢è¿™äº›å ä½ç¬¦ã€‚</p>\n<p>å®ƒç›¸å½“äº AI äº¤äº’ä¸­çš„ â€œè§†å›¾å±‚â€ï¼Œç±»ä¼¼äº Spring MVC ä¸­çš„è§†å›¾æ¨¡æ¿ï¼ˆæˆ–è€… JSPï¼‰ã€‚é€šè¿‡ä½¿ç”¨ PromptTemplateï¼Œä½ å¯ä»¥æ›´åŠ ç»“æ„åŒ–ã€å¯ç»´æŠ¤åœ°ç®¡ç† AI åº”ç”¨ä¸­çš„æç¤ºè¯ï¼Œä½¿å…¶æ›´æ˜“äºä¼˜åŒ–å’Œæ‰©å±•ï¼ŒåŒæ—¶é™ä½ç¡¬ç¼–ç å¸¦æ¥çš„ç»´æŠ¤æˆæœ¬ã€‚</p>\n<p>PromptTemplate æœ€åŸºæœ¬çš„åŠŸèƒ½æ˜¯æ”¯æŒå˜é‡æ›¿æ¢ã€‚ä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­å®šä¹‰å ä½ç¬¦ï¼Œç„¶ååœ¨è¿è¡Œæ—¶æä¾›è¿™äº›å˜é‡çš„å€¼ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">template</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;ä½ å¥½ï¼Œ&#123;name&#125;ã€‚ä»Šå¤©æ˜¯&#123;day&#125;ï¼Œå¤©æ°”&#123;weather&#125;ã€‚&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">PromptTemplate</span> <span class=\"variable\">promptTemplate</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">PromptTemplate</span>(template);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Map&lt;String, Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">variables.put(<span class=\"string\">&quot;name&quot;</span>, <span class=\"string\">&quot;Azer&quot;</span>);</span><br><span class=\"line\">variables.put(<span class=\"string\">&quot;day&quot;</span>, <span class=\"string\">&quot;æ˜ŸæœŸä¸€&quot;</span>);</span><br><span class=\"line\">variables.put(<span class=\"string\">&quot;weather&quot;</span>, <span class=\"string\">&quot;æ™´æœ—&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">prompt</span> <span class=\"operator\">=</span> promptTemplate.render(variables);</span><br></pre></td></tr></table></figure>\n\n<p>ğŸ’¡ æ¨¡æ¿çš„æ€è·¯åœ¨ç¼–ç¨‹æŠ€æœ¯ä¸­ç»å¸¸ç”¨åˆ°ï¼Œæ¯”å¦‚æ•°æ®åº“çš„é¢„ç¼–è¯‘è¯­å¥ã€è®°å½•æ—¥å¿—æ—¶çš„å˜é‡å ä½ç¬¦ã€æ¨¡æ¿å¼•æ“ç­‰ã€‚</p>\n<p>PromptTemplate åœ¨ä»¥ä¸‹åœºæ™¯ç‰¹åˆ«æœ‰ç”¨ï¼š</p>\n<ol>\n<li>åŠ¨æ€ä¸ªæ€§åŒ–äº¤äº’ï¼šæ ¹æ®ç”¨æˆ·ä¿¡æ¯ã€ä¸Šä¸‹æ–‡æˆ–ä¸šåŠ¡è§„åˆ™å®šåˆ¶æç¤ºè¯</li>\n<li>å¤šè¯­è¨€æ”¯æŒï¼šä½¿ç”¨ç›¸åŒçš„å˜é‡ä½†ä¸åŒçš„æ¨¡æ¿æ–‡ä»¶æ”¯æŒå¤šç§è¯­è¨€</li>\n<li>A&#x2F;B æµ‹è¯•ï¼šè½»æ¾åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„æç¤ºè¯è¿›è¡Œæ•ˆæœå¯¹æ¯”</li>\n<li>æç¤ºè¯ç‰ˆæœ¬ç®¡ç†ï¼šå°†æç¤ºè¯å¤–éƒ¨åŒ–ï¼Œä¾¿äºç‰ˆæœ¬æ§åˆ¶å’Œè¿­ä»£ä¼˜åŒ–</li>\n</ol>\n<h3 id=\"å®ç°åŸç†\"><a href=\"#å®ç°åŸç†\" class=\"headerlink\" title=\"å®ç°åŸç†\"></a>å®ç°åŸç†</h3><p>PromptTemplate åº•å±‚ä½¿ç”¨äº† OSS StringTemplate å¼•æ“ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¨¡æ¿å¼•æ“ï¼Œä¸“æ³¨äºæ–‡æœ¬ç”Ÿæˆã€‚åœ¨ Spring AI ä¸­ï¼ŒPromptTemplate ç±»å®ç°äº†ä»¥ä¸‹æ¥å£ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> claâ ss PromptTemplate <span class=\"keyword\">implements</span> <span class=\"title class_\">PromptTemplateActions</span>, PromptTemplateMessageActions &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™äº›æ¥å£æä¾›äº†ä¸åŒç±»å‹çš„æ¨¡æ¿æ“ä½œåŠŸèƒ½ï¼Œä½¿å…¶æ—¢èƒ½ç”Ÿæˆæ™®é€šæ–‡æœ¬ï¼Œä¹Ÿèƒ½ç”Ÿæˆç»“æ„åŒ–çš„æ¶ˆæ¯ã€‚</p>\n<p>ç±»å›¾å¦‚ä¸‹ï¼š</p>\n<p><img src=\"/post/Advisor/image-20251105205036936.png\" alt=\"image-20251105205036936\"></p>\n<h3 id=\"ä¸“ç”¨æ¨¡æ¿ç±»\"><a href=\"#ä¸“ç”¨æ¨¡æ¿ç±»\" class=\"headerlink\" title=\"ä¸“ç”¨æ¨¡æ¿ç±»\"></a>ä¸“ç”¨æ¨¡æ¿ç±»</h3><p>Spring AI æä¾›äº†å‡ ç§ä¸“ç”¨çš„æ¨¡æ¿ç±»ï¼Œå¯¹åº”ä¸åŒè§’è‰²çš„æ¶ˆæ¯ï¼š</p>\n<ol>\n<li><p>SystemPromptTemplateï¼šç”¨äºç³»ç»Ÿæ¶ˆæ¯ï¼Œè®¾ç½® AI çš„è¡Œä¸ºå’ŒèƒŒæ™¯</p>\n</li>\n<li><p>AssistantPromptTemplateï¼šç”¨äºåŠ©æ‰‹æ¶ˆæ¯ï¼Œç”¨äºè®¾ç½® AI å›å¤çš„ç»“æ„</p>\n</li>\n<li><p>FunctionPromptTemplateï¼šç›®å‰æ²¡ç”¨</p>\n<p><img src=\"/post/Advisor/image-20251105205149408.png\" alt=\"image-20251105205149408\"></p>\n</li>\n</ol>\n<p>è¿™äº›ä¸“ç”¨æ¨¡æ¿ç±»è®©å¼€å‘è€…èƒ½æ›´æ¸…æ™°åœ°è¡¨è¾¾ä¸åŒç±»å‹æ¶ˆæ¯çš„æ„å›¾ï¼Œæ¯”å¦‚ç³»ç»Ÿæ¶ˆæ¯æ¨¡æ¿èƒ½å¤Ÿå¿«é€Ÿæ„é€ ç³»ç»Ÿ Promptï¼Œç¤ºä¾‹ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">userText</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;â &quot;</span><span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\">    Tell me about three famous pirates from the Golden Age of Piracy and why they did.</span></span><br><span class=\"line\"><span class=\"string\">    Write at least a sentence for each pirate.</span></span><br><span class=\"line\"><span class=\"string\">    &quot;</span><span class=\"string\">&quot;&quot;</span>;â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€‚â€‚â€‚â€‚â€‚â€‚â€‰â€‚â€‰â€‰â€‚â€‰â€‰</span><br><span class=\"line\"></span><br><span class=\"line\">Messaâ <span class=\"type\">ge</span> <span class=\"variable\">userMessage</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">UserMessage</span>(userText);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">systemText</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;â &quot;</span><span class=\"string\">&quot;</span></span><br><span class=\"line\"><span class=\"string\">  You are a helpful AI assistant thathelps people find information.</span></span><br><span class=\"line\"><span class=\"string\">  Your name is &#123;name&#125;</span></span><br><span class=\"line\"><span class=\"string\">  You should reply to the user&#x27;s request with your name and also in the style of a &#123;voice&#125;.</span></span><br><span class=\"line\"><span class=\"string\">  &quot;</span><span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">SystemPrâ <span class=\"type\">omptTemplate</span> <span class=\"variable\">systemPromptTemplate</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SystemPromptTemplate</span>(systemText);</span><br><span class=\"line\"><span class=\"type\">Message</span> <span class=\"variable\">systemMessage</span> <span class=\"operator\">=</span> systemPromptTemplate.createMessage(Map.of(<span class=\"string\">&quot;name&quot;</span>, name, <span class=\"string\">&quot;voice&quot;</span>, voice));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">Prompt</span> <span class=\"variable\">prompt</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Prompt</span>(List.of(userMessage, systemMessage));</span><br><span class=\"line\"></span><br><span class=\"line\">List&lt;Generation&gt; response = chatModel.call(prompt).getResults();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä»æ–‡ä»¶åŠ è½½æ¨¡æ¿\"><a href=\"#ä»æ–‡ä»¶åŠ è½½æ¨¡æ¿\" class=\"headerlink\" title=\"ä»æ–‡ä»¶åŠ è½½æ¨¡æ¿\"></a>ä»æ–‡ä»¶åŠ è½½æ¨¡æ¿</h3><p>PromptTemplate æ”¯æŒä»å¤–éƒ¨æ–‡ä»¶åŠ è½½æ¨¡æ¿å†…å®¹ï¼Œå¾ˆé€‚åˆç®¡ç†å¤æ‚çš„æç¤ºè¯ã€‚Spring AI åˆ©ç”¨ Spring çš„ Resource å¯¹è±¡æ¥ä»æŒ‡å®šè·¯å¾„åŠ è½½æ¨¡æ¿æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Value(&quot;classpath:/prompts/system-message.st&quot;)</span></span><br><span class=\"line\">privaâ te Resource systemResource;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">SystemPromptTemplate</span> <span class=\"variable\">systemPromptTemplate</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SystemPromptTemplate</span>(systemResource);</span><br></pre></td></tr></table></figure>\n\n<p>è¿™ç§æ–¹å¼è®©ä½ å¯ä»¥ï¼š</p>\n<ul>\n<li>å°†å¤æ‚çš„æç¤ºè¯æ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ç®¡ç†</li>\n<li>åœ¨ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹è°ƒæ•´æç¤ºè¯</li>\n<li>ä¸ºä¸åŒåœºæ™¯å‡†å¤‡å¤šå¥—æç¤ºè¯æ¨¡æ¿</li>\n</ul>\n<p>æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒå†™é…ç½®æ–‡ä»¶ï¼Ÿæœ‰ç‚¹å„¿å‰åç«¯åˆ†ç¦»çš„æ„Ÿè§‰äº†ï¼Ÿæˆ‘ä¹Ÿä¼šæ›´æ¨èå¤§å®¶ä½¿ç”¨è¿™ç§æ–¹å¼æ¥ç®¡ç† Prompt æ¨¡æ¿ã€‚</p>\n<h2 id=\"5ã€å¤šæ¨¡æ€\"><a href=\"#5ã€å¤šæ¨¡æ€\" class=\"headerlink\" title=\"5ã€å¤šæ¨¡æ€\"></a>5ã€å¤šæ¨¡æ€</h2><p>AI å¤šæ¨¡æ€æ˜¯æŒ‡èƒ½å¤ŸåŒæ—¶å¤„ç†ã€ç†è§£å’Œç”Ÿæˆå¤šç§ä¸åŒç±»å‹æ•°æ®çš„èƒ½åŠ›ï¼Œæ¯”å¦‚æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ã€PDFã€ç»“æ„åŒ–æ•°æ®ï¼ˆæ¯”å¦‚è¡¨æ ¼ï¼‰ç­‰ã€‚</p>\n<p>è¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µå« â€œåŸç”Ÿå¤šæ¨¡æ€å¤§æ¨¡å‹â€ï¼Œæ˜¯æŒ‡åœ¨æ¶æ„è®¾è®¡å’Œé¢„è®­ç»ƒé˜¶æ®µå°±ç›´æ¥æ•´åˆå¤šç§æ•°æ®ç±»å‹çš„ AI æ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨å•ä¸€æ¨¡å‹åŒæ—¶å¤„ç†å¤šç§æ¨¡æ€æ•°æ®ï¼Œè€Œéå°†å¤šä¸ªå•æ¨¡æ€æ¨¡å‹ç®€å•ç»„åˆåœ¨ä¸€èµ·ã€‚æ¯”å¦‚ OpenAI GPT-4oã€Google Vertex AI Gemini 1.5ã€Anthropic Claude3 ç­‰ã€‚</p>\n<p>åŸç”Ÿå¤šæ¨¡æ€å¤§æ¨¡å‹å¯ä»¥åœ¨æ•´ä¸ªæ¨¡å‹ä¸­å…±äº«ç‰¹å¾å’Œå­¦ä¹ ç­–ç•¥ï¼Œæœ‰åŠ©äºæ•è·è·¨æ¨¡æ€ç‰¹å¾é—´çš„å¤æ‚å…³ç³»ã€‚æ‰€ä»¥å®ƒä»¬é€šå¸¸åœ¨æ‰§è¡Œè·¨æ¨¡æ€ä»»åŠ¡æ—¶è¡¨ç°æ›´å¥½ï¼Œæ¯”å¦‚å›¾æ–‡åŒ¹é…ã€è§†è§‰é—®ç­”æˆ–å¤šæ¨¡æ€ç¿»è¯‘ã€‚</p>\n<p>ä¸‹é¢åˆ†äº« 2 ç§å¤šæ¨¡æ€å¼€å‘çš„æ–¹æ³•ã€‚</p>\n<h3 id=\"ï¼ˆ1ï¼‰Spring-AI-å¤šæ¨¡æ€å¼€å‘\"><a href=\"#ï¼ˆ1ï¼‰Spring-AI-å¤šæ¨¡æ€å¼€å‘\" class=\"headerlink\" title=\"ï¼ˆ1ï¼‰Spring AI å¤šæ¨¡æ€å¼€å‘\"></a>ï¼ˆ1ï¼‰Spring AI å¤šæ¨¡æ€å¼€å‘</h3><p>Spring AI æä¾›äº† <a href=\"https://docs.spring.io/spring-ai/reference/api/multimodality.html\">å¤šæ¨¡æ€å¼€å‘</a> çš„æ”¯æŒï¼Œä½†æ˜¯è¦æ³¨æ„å¾ˆå¤šæ¨¡å‹æ˜¯ä¸æ”¯æŒå¤šæ¨¡æ€çš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘å‰ä¸€å®šè¦æŸ¥çœ‹ <a href=\"https://docs.spring.io/spring-ai/reference/api/chat/comparison.html\">æ”¯æŒå¤šæ¨¡æ€çš„æ¨¡å‹æ–‡æ¡£</a>ã€‚</p>\n<p>ç›®å‰å¤šæ¨¡æ€èƒ½åŠ›è¾ƒå¼ºçš„æ¨¡å‹æœ‰ Google VertexAI Gemini å’Œ OpenAIï¼š</p>\n<h3 id=\"ï¼ˆ2ï¼‰å¹³å°-SDK-å¤šæ¨¡æ€å¼€å‘\"><a href=\"#ï¼ˆ2ï¼‰å¹³å°-SDK-å¤šæ¨¡æ€å¼€å‘\" class=\"headerlink\" title=\"ï¼ˆ2ï¼‰å¹³å° SDK å¤šæ¨¡æ€å¼€å‘\"></a>ï¼ˆ2ï¼‰å¹³å° SDK å¤šæ¨¡æ€å¼€å‘</h3><p>è¿™ç§æ–¹å¼æ›´é€‚åˆä¸­å›½å®å®çš„ä½“è´¨ï¼Œç›´æ¥å‚è€ƒå¤§æ¨¡å‹å¹³å°çš„å®˜æ–¹æ–‡æ¡£ï¼Œä½¿ç”¨å¹³å°æä¾›çš„ SDK æˆ– API è°ƒç”¨å¤šæ¨¡æ€å¤§æ¨¡å‹ã€‚æ¯”å¦‚ <a href=\"https://help.aliyun.com/zh/model-studio/use-qwen-by-calling-api#d0e30636ad3s3\">é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°çš„å¤šæ¨¡æ€æ”¯æŒ</a>ï¼š</p>\n","text":"1ã€Advisorè‡ªå®šä¹‰ Advisorå­¦è¿‡ Servâ let å’Œ Spring Aâ€ŒOP çš„åŒå­¦åº”è¯¥å¯¹è¿™ä¸ªåŠŸèƒ½å¹¶ä¸é™Œç”Ÿï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–å†™æ‹¦æˆªâ€å™¨æˆ–åˆ‡é¢å¯¹è¯·æ±‚å’Œ...","permalink":"/post/Advisor","photos":[],"count_time":{"symbolsCount":"20k","symbolsTime":"18 mins."},"categories":[{"name":"SpringBoot","slug":"SpringBoot","count":7,"path":"api/categories/SpringBoot.json"},{"name":"Spring AI","slug":"SpringBoot/Spring-AI","count":6,"path":"api/categories/SpringBoot/Spring-AI.json"}],"tags":[{"name":"Spring AI","slug":"Spring-AI","count":7,"path":"api/tags/Spring-AI.json"},{"name":"å¤§æ¨¡å‹","slug":"å¤§æ¨¡å‹","count":7,"path":"api/tags/å¤§æ¨¡å‹.json"},{"name":"AI","slug":"AI","count":6,"path":"api/tags/AI.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#1%E3%80%81Advisor\"><span class=\"toc-text\">1ã€Advisor</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89-Advisor\"><span class=\"toc-text\">è‡ªå®šä¹‰ Advisor</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89-Advisor-%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">è‡ªå®šä¹‰ Advisor æ­¥éª¤</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97-Advisor\"><span class=\"toc-text\">è‡ªå®šä¹‰æ—¥å¿— Advisor</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89-Re-Reading-Advisor\"><span class=\"toc-text\">è‡ªå®šä¹‰ Re-Reading Advisor</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5\"><span class=\"toc-text\">æœ€ä½³å®è·µ</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#2%E3%80%81%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA\"><span class=\"toc-text\">2ã€ç»“æ„åŒ–è¾“å‡º</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">åŸºæœ¬åŸç† - å·¥ä½œæµç¨‹</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BF%9B%E9%98%B6%E5%8E%9F%E7%90%86-API-%E8%AE%BE%E8%AE%A1\"><span class=\"toc-text\">è¿›é˜¶åŸç† - API è®¾è®¡</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">ä½¿ç”¨ç¤ºä¾‹</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%94%AF%E6%8C%81%E7%9A%84-AI-%E6%A8%A1%E5%9E%8B\"><span class=\"toc-text\">æ”¯æŒçš„ AI æ¨¡å‹</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%81%8B%E7%88%B1%E6%8A%A5%E5%91%8A%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91\"><span class=\"toc-text\">æ‹çˆ±æŠ¥å‘ŠåŠŸèƒ½å¼€å‘</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3%E3%80%81%E5%AF%B9%E8%AF%9D%E8%AE%B0%E5%BF%86%E6%8C%81%E4%B9%85%E5%8C%96\"><span class=\"toc-text\">3ã€å¯¹è¯è®°å¿†æŒä¹…åŒ–</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">åŸºæœ¬æ¦‚å¿µ</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%A9%E7%94%A8%E7%8E%B0%E6%9C%89%E4%BE%9D%E8%B5%96%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">åˆ©ç”¨ç°æœ‰ä¾èµ–å®ç°</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">è‡ªå®šä¹‰å®ç°</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6%E6%8C%81%E4%B9%85%E5%8C%96-ChatMemory\"><span class=\"toc-text\">è‡ªå®šä¹‰æ–‡ä»¶æŒä¹…åŒ– ChatMemory</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4%E3%80%81PromptTemplate-%E6%A8%A1%E6%9D%BF\"><span class=\"toc-text\">4ã€PromptTemplate æ¨¡æ¿</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%98%AF-PromptTemplate%EF%BC%9F%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F\"><span class=\"toc-text\">ä»€ä¹ˆæ˜¯ PromptTemplateï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86\"><span class=\"toc-text\">å®ç°åŸç†</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%93%E7%94%A8%E6%A8%A1%E6%9D%BF%E7%B1%BB\"><span class=\"toc-text\">ä¸“ç”¨æ¨¡æ¿ç±»</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%8E%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E6%A8%A1%E6%9D%BF\"><span class=\"toc-text\">ä»æ–‡ä»¶åŠ è½½æ¨¡æ¿</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5%E3%80%81%E5%A4%9A%E6%A8%A1%E6%80%81\"><span class=\"toc-text\">5ã€å¤šæ¨¡æ€</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%EF%BC%881%EF%BC%89Spring-AI-%E5%A4%9A%E6%A8%A1%E6%80%81%E5%BC%80%E5%8F%91\"><span class=\"toc-text\">ï¼ˆ1ï¼‰Spring AI å¤šæ¨¡æ€å¼€å‘</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%EF%BC%882%EF%BC%89%E5%B9%B3%E5%8F%B0-SDK-%E5%A4%9A%E6%A8%A1%E6%80%81%E5%BC%80%E5%8F%91\"><span class=\"toc-text\">ï¼ˆ2ï¼‰å¹³å° SDK å¤šæ¨¡æ€å¼€å‘</span></a></li></ol></li></ol></li></ol>","author":{"name":"Azer","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"<span style='font-size:30px;background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;'>æ€€æ°‘äº¦æœªå¯</span><span style='font-size:30px;'>ğŸ’•</span>","socials":{"github":"https://github.com/azer-2025","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_52541129?type=blog","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/1764589563?spm_id_from=333.1007.0.0"},"gitee":{"icon":"/svg/gitee.svg","link":"https://gitee.com/azzzer"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"RAG(1)","uid":"0b6174194fca75a66e45364f4a9eec76","slug":"RAG-1","date":"2025-11-06T04:59:49.000Z","updated":"2025-11-06T05:03:39.663Z","comments":true,"path":"api/articles/RAG-1.json","keywords":"VUEã€Pythonã€JAVA","cover":"/medias/RAG(1).png","text":"0.å¼•è¨€å¦‚ä½•è®© AI è·å–çŸ¥è¯†ï¼Ÿåœ¨å®ç°éœ€æ±‚å‰ï¼Œæˆ‘ä»¬éœ€è¦æ€è€ƒä¸€ä¸ªå…³é”®é—®é¢˜ï¼šæ‹çˆ±çŸ¥è¯†ä»å“ªé‡Œè·å–å‘¢ï¼Ÿ é¦–å…ˆ AI åŸæœ¬å°±æ‹¥æœ‰ä¸€äº›é€šç”¨çš„â çŸ¥è¯†ï¼Œå¯¹äºä¸ä¼šçš„çŸ¥è¯†ï¼Œè¿˜å¯ä»¥åˆ©...","permalink":"/post/RAG-1","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"SpringBoot","slug":"SpringBoot","count":7,"path":"api/categories/SpringBoot.json"},{"name":"Spring AI","slug":"SpringBoot/Spring-AI","count":6,"path":"api/categories/SpringBoot/Spring-AI.json"}],"tags":[{"name":"Spring AI","slug":"Spring-AI","count":7,"path":"api/tags/Spring-AI.json"},{"name":"å¤§æ¨¡å‹","slug":"å¤§æ¨¡å‹","count":7,"path":"api/tags/å¤§æ¨¡å‹.json"},{"name":"AI","slug":"AI","count":6,"path":"api/tags/AI.json"}],"author":{"name":"Azer","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"<span style='font-size:30px;background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;'>æ€€æ°‘äº¦æœªå¯</span><span style='font-size:30px;'>ğŸ’•</span>","socials":{"github":"https://github.com/azer-2025","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_52541129?type=blog","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/1764589563?spm_id_from=333.1007.0.0"},"gitee":{"icon":"/svg/gitee.svg","link":"https://gitee.com/azzzer"}}}},"feature":true},"next_post":{"title":"Prompt å·¥ç¨‹","uid":"5c0d008f6ea2400e1b86324b9faa98ca","slug":"Promptæç¤ºè¯","date":"2025-11-05T11:14:09.000Z","updated":"2025-11-05T13:25:18.791Z","comments":true,"path":"api/articles/Promptæç¤ºè¯.json","keywords":"VUEã€Pythonã€JAVA","cover":"/medias/prompt.png","text":"1ã€Prompt å·¥ç¨‹â€‹ å¾ˆå¤šäººå…¶å®æ ¹æœ¬ä¸äº†è§£Prompt ,è¿™é‡Œæˆ‘è‡ªå·±çš„æœ€ç®€å•çš„ç†è§£æ˜¯ï¼šæˆ‘è‡ªå·±ä½¿ç”¨aiçš„æ—¶å€™ï¼Œæˆ‘ä¼šå…ˆç»™ä»–ä¸€ä¸ªè§’è‰²ï¼Œæ¯”å¦‚ä½ ç°åœ¨åªèƒ½ç”¨Spring...","permalink":"/post/Promptæç¤ºè¯","photos":[],"count_time":{"symbolsCount":"15k","symbolsTime":"14 mins."},"categories":[{"name":"SpringBoot","slug":"SpringBoot","count":7,"path":"api/categories/SpringBoot.json"},{"name":"Spring AI","slug":"SpringBoot/Spring-AI","count":6,"path":"api/categories/SpringBoot/Spring-AI.json"}],"tags":[{"name":"Spring AI","slug":"Spring-AI","count":7,"path":"api/tags/Spring-AI.json"},{"name":"å¤§æ¨¡å‹","slug":"å¤§æ¨¡å‹","count":7,"path":"api/tags/å¤§æ¨¡å‹.json"},{"name":"AI","slug":"AI","count":6,"path":"api/tags/AI.json"}],"author":{"name":"Azer","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"<span style='font-size:30px;background:linear-gradient(90deg,#00c6ff,#0072ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;'>æ€€æ°‘äº¦æœªå¯</span><span style='font-size:30px;'>ğŸ’•</span>","socials":{"github":"https://github.com/azer-2025","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/weixin_52541129?type=blog","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/1764589563?spm_id_from=333.1007.0.0"},"gitee":{"icon":"/svg/gitee.svg","link":"https://gitee.com/azzzer"}}}}}}